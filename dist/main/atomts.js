var t=require("crypto"),e=require("module"),n=require("events"),r=require("assert"),i=require("fs"),o=S({},i),s=x(i),a=require("timers"),c=require("util"),u=require("stream"),l=u,f=u.Transform,p=S({},require("typescript")),h=require("path"),d=S({},h),g=h.dirname,m=require("atom"),v=S({},m),y=m.CompositeDisposable,b=m.Emitter,w=m.BufferedNodeProcess,_=(m.BufferedProcess,m.Disposable);function x(t){return t&&t.__esModule?t.default:t}function S(t,e){return Object.keys(e).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t}var k,E,C,O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},T=!1,P={};C={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var A={};function j(t,e,...n){let r=[];for(let t=0;t<n.length;){const e=n[t];switch(typeof e){case"string":case"number":n[t]={text:e},t++;break;case"object":Array.isArray(e)?n.splice(t,1,...e):e?(e.context||(r.push(e),e.ambiguous&&e.ambiguous.length&&(r=r.concat(e.ambiguous))),t++):n.splice(t,1);break;default:throw new Error("Invalid child node: "+e)}}if(e){for(const t in e){const n=C[t];n&&(e.on||(e.on={}),e.on[n]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:n,ambiguous:r}}A=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);const I=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of I)j[t]=(e,...n)=>j(t,e,...n);for(const t of A)j[t]=(e,...n)=>j(t,e,...n);E=j;var N,D={},L={};L=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);var F;function M(t,e,n,r,i){if(n)for(var o in n)"ref"!==o&&"on"!==o&&(o in C||i&&o in i||("dataset"===o?M(t.dataset,null,n&&n.dataset,null,null):"innerHTML"!==o&&e&&A.has(e.tag)?t.removeAttribute(L.get(o)||o):(t[o]="",delete t[o])));if(i)for(var o in i)if("ref"!==o&&"on"!==o&&!(o in C)){var s=n&&n[o],a=i[o];"dataset"===o?R(t.dataset,s,a,!1):"style"===o&&"string"!=typeof a?("string"==typeof s&&(t.style="",s=null),R(t.style,s,a,!0)):"attributes"===o?B(t,s,a):a!==s&&("innerHTML"!==o&&r&&A.has(r.tag)?t.setAttribute(L.get(o)||o,a):r&&"input"===r.tag&&"value"===o&&t[o]===a||(t[o]=a))}}function R(t,e,n,r){if(e)for(var i in e)n&&i in n||(r?t[i]="":delete t[i]);if(n)for(var i in n){const r=e&&e[i],o=n[i];o!==r&&(t[i]=o)}}function B(t,e,n){if(e)for(var r in e)n&&r in n||t.removeAttribute(r);if(n)for(var r in n){const i=e&&e[r],o=n[r];o!==i&&t.setAttribute(r,o)}}function z(t,e){let n;if(null!=t.text)n=document.createTextNode(t.text);else{const{tag:r,children:i}=t;let{props:o,context:s}=t;if(s&&(e={refs:s.refs,listenerContext:s}),"function"==typeof r){let s;o&&o.ref&&(s=o.ref);const a=new r(o||{},i);t.component=a,n=a.element,"function"==typeof s?s(a):e&&e.refs&&s&&(e.refs[s]=a)}else A.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&q(n,i,e),o&&N(n,null,t,e)):(n=document.createElement(r),i&&q(n,i,e),o&&N(n,null,t,e))}return t.domNode=n,n}function q(t,e,n){for(let r=0;r<e.length;r++)t.appendChild(z(e[r],n))}F=function(t,e,n,r){n!==e&&("function"==typeof e?e(null):e&&r[e]===t&&delete r[e],"function"==typeof n?n(t):n&&(r[n]=t))},N=function(t,e,n,r){const i=e&&e.props,o=n.props;let s,a;r&&(s=r.refs,a=r.listenerContext),M(t,e,i,n,o),s&&F(t,i&&i.ref,o&&o.ref,s),function(t,e,n,r){const i=e&&e.props&&e.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=e&&e.boundListeners&&e.boundListeners[n]?e.boundListeners[n]:i[n],t.removeEventListener(n,r)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let n;n=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,n)}if(c){let e;r?(e=c.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,n,a)},D=z;var H,U={};function W(t,e,n){const r=t.domNode;if(e===t)return r;if(G(t,e)){let i;return null!=e.text?(r.nodeValue=e.text,i=r):"function"==typeof e.tag?i=function(t,e,n){const{component:r,props:i}=t;let{props:o,children:s}=e;e.component=r;const a=n&&n.refs;a&&F(r,i&&i.ref,o&&o.ref,a);return r.update(o||{},s),r.element}(t,e,n):(!function(t,e,n,r){var i,o=0,s=e.length-1,a=e[0],c=e[s],u=0,l=n.length-1,f=n[0],p=n[l];for(;o<=s&&u<=l;)if(a)if(c)if(G(a,f))W(a,f,r),a=e[++o],f=n[++u];else if(G(c,p))W(c,p,r),c=e[--s],p=n[--l];else if(G(a,p))W(a,p,r),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],p=n[--l];else if(G(c,f))W(c,f,r),t.insertBefore(c.domNode,a.domNode),c=e[--s],f=n[++u];else{i||(V.length>0?(i=V.pop()).clear():i=new Map,Q(i,e,o,s));var h=K(f),d=h?i.get(h):null;if(null==d)t.insertBefore(D(f,r),a.domNode),f=n[++u];else{var g=e[d];W(g,f,r),e[d]=void 0,t.insertBefore(g.domNode,a.domNode),f=n[++u]}}else c=e[--s];else a=e[++o];if(o>s){var m=n[l+1]?n[l+1].domNode:null;for(let e=u;e<=l;e++)t.insertBefore(D(n[e],r),m)}else if(u>l)for(let t=o;t<=s;t++){var v=e[t];v&&$(v,r&&r.refs)}i&&V.push(i)}(r,t.children,e.children,n),N(r,t,e,n),i=r),e.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;$(t,n&&n.refs);const s=D(e,n);return i&&i.insertBefore(s,o),e.domNode=s,s}}let V=[new Map,new Map,new Map,new Map];function $(t,e,n=!0){const{domNode:r,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)"function"==typeof a?a(null):e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if("function"==typeof a?a(null):e&&a&&e[a]===r&&delete e[a],o)for(let t=0;t<o.length;t++)$(o[t],e,!1);n&&r.remove()}function G(t,e){return K(t)===K(e)&&t.tag===e.tag}function K(t){return t.props?t.props.key:void 0}function Q(t,e,n,r){for(let i=n;i<=r;i++){const n=K(e[i]);n&&t.set(n,i)}return t}U=W;var Z;Z=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise((t=>{this.resolveNextUpdatePromise=t}))),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}};let J=null;var X=function(){return J||(J=new Z),J};const Y=new WeakSet;let tt=0,et=0;function nt(t){return null!=t&&!1!==t}function rt(t,e){e.context=t,e.ambiguous&&(e.ambiguous.forEach((e=>{e.context=t})),delete e.ambiguous)}function it(t,e=!0){if(!nt(t.virtualNode))throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==t.element)throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a DOM element. Perhaps this component was never initialized?");let n=t.render();if(!nt(n)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+e)}rt(t,n),tt++;let r=t.virtualNode,i=t.element,o=U(r,n,{refs:t.refs,listenerContext:t});if(t.virtualNode=n,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&X().readDocument((function(){t.readAfterUpdate()})),tt--}function ot(t,e=!0){et++,st(t.virtualNode),1===et&&e&&t.element.remove(),et--}function st(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach(st)}H={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!nt(e)){let n=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+n)}rt(t,e),t.refs={},t.virtualNode=e,t.element=D(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(tt>0)return it(t,e),Promise.resolve();let n=X();return Y.has(t)||(Y.add(t),n.updateDocument((function(){Y.delete(t),it(t,e)}))),n.getNextUpdatePromise()},updateSync:it,destroy:function(t,e=!0){if(tt>0||et>0)return ot(t,e),Promise.resolve();let n=X();return n.updateDocument((function(){ot(t,e)})),n.getNextUpdatePromise()},destroySync:ot};const{initialize:at,update:ct,updateSync:ut,destroy:lt,destroySync:ft}=H;function pt(t){void 0!==t&&("function"==typeof t.catch?t.catch((t=>{atom.notifications.addFatalError("Atom-Typescript error: "+t.message,{detail:t.toString(),stack:t.stack,dismissable:!0})})):atom.notifications.addFatalError("Atom-Typescript: non-promise passed to handlePromise. Please report this.",{stack:(new Error).stack,dismissable:!0}))}function ht(){return T||(T=!0,k={},k=Promise.resolve(require("./atom-package-deps.abef52e0.js"))),k}P={dom:E,render:D,initialize:at,update:ct,updateSync:ut,destroy:lt,destroySync:ft,setScheduler:function(t){J=t},getScheduler:X};var dt=function(){var t=this,e={exports:this};return function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,a=32,c=64,u=128,l=256,f=1/0,p=9007199254740991,h=NaN,d=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",a],["partialRight",c],["rearg",l]],m="[object Arguments]",v="[object Array]",y="[object Boolean]",b="[object Date]",w="[object Error]",_="[object Function]",x="[object GeneratorFunction]",S="[object Map]",k="[object Number]",E="[object Object]",C="[object Promise]",T="[object RegExp]",P="[object Set]",A="[object String]",j="[object Symbol]",I="[object WeakMap]",N="[object ArrayBuffer]",D="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",B="[object Int32Array]",z="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",U="[object Uint32Array]",W=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Q=RegExp(G.source),Z=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),ot=/^\s+|\s+$/g,st=/^\s+/,at=/\s+$/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Ot="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="['’]",At="[\\ud800-\\udfff]",jt="["+Tt+"]",It="["+St+"]",Nt="\\d+",Dt="[\\u2700-\\u27bf]",Lt="["+Et+"]",Ft="[^\\ud800-\\udfff"+Tt+Nt+kt+Et+Ct+"]",Mt="\\ud83c[\\udffb-\\udfff]",Rt="[^\\ud800-\\udfff]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="["+Ct+"]",Ht="(?:"+Lt+"|"+Ft+")",Ut="(?:"+qt+"|"+Ft+")",Wt="(?:['’](?:d|ll|m|re|s|t|ve))?",Vt="(?:['’](?:D|LL|M|RE|S|T|VE))?",$t="(?:"+It+"|"+Mt+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Kt=Gt+$t+("(?:\\u200d(?:"+[Rt,Bt,zt].join("|")+")"+Gt+$t+")*"),Qt="(?:"+[Dt,Bt,zt].join("|")+")"+Kt,Zt="(?:"+[Rt+It+"?",It,Bt,zt,At].join("|")+")",Jt=RegExp(Pt,"g"),Xt=RegExp(It,"g"),Yt=RegExp(Mt+"(?="+Mt+")|"+Zt+Kt,"g"),te=RegExp([qt+"?"+Lt+"+"+Wt+"(?="+[jt,qt,"$"].join("|")+")",Ut+"+"+Vt+"(?="+[jt,qt+Ht,"$"].join("|")+")",qt+"?"+Ht+"+"+Wt,qt+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt,Qt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+St+Ot+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[L]=oe[F]=oe[M]=oe[R]=oe[B]=oe[z]=oe[q]=oe[H]=oe[U]=!0,oe[m]=oe[v]=oe[N]=oe[y]=oe[D]=oe[b]=oe[w]=oe[_]=oe[S]=oe[k]=oe[E]=oe[T]=oe[P]=oe[A]=oe[I]=!1;var se={};se[m]=se[v]=se[N]=se[D]=se[y]=se[b]=se[L]=se[F]=se[M]=se[R]=se[B]=se[S]=se[k]=se[E]=se[T]=se[P]=se[A]=se[j]=se[z]=se[q]=se[H]=se[U]=!0,se[w]=se[_]=se[I]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,ue=parseInt,le="object"==typeof O&&O&&O.Object===Object&&O,fe="object"==typeof self&&self&&self.Object===Object&&self,pe=le||fe||Function("return this")(),he="object"==typeof t&&t&&!t.nodeType&&t,de=he&&"object"==typeof e&&e&&!e.nodeType&&e,ge=de&&de.exports===he,me=ge&&le.process,ve=function(){try{var t=de&&de.require&&de.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}(),ye=ve&&ve.isArrayBuffer,be=ve&&ve.isDate,we=ve&&ve.isMap,_e=ve&&ve.isRegExp,xe=ve&&ve.isSet,Se=ve&&ve.isTypedArray;function ke(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ae(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function De(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Le(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Fe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Me=We("length");function Re(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ze(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,He,n)}function qe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function He(t){return t!=t}function Ue(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:h}function We(t){return function(e){return null==e?n:e[t]}}function Ve(t){return function(e){return null==t?n:t[e]}}function $e(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ge(t,e){for(var r,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==n&&(r=r===n?s:r+s)}return r}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return function(e){return t(e)}}function Ze(t,e){return Ie(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&ze(e,t[n],0)>-1;);return n}function Ye(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var en=Ve({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(t){return"\\"+ae[t]}function on(t){return ee.test(t)}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function an(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var a=t[n];a!==e&&a!==o||(t[n]=o,s[i++]=n)}return s}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return on(t)?function(t){var e=Yt.lastIndex=0;for(;Yt.test(t);)++e;return e}(t):Me(t)}function pn(t){return on(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.split("")}(t)}var hn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var dn=function t(e){var O,St=(e=null==e?pe:dn.defaults(pe.Object(),e,dn.pick(pe,re))).Array,kt=e.Date,Et=e.Error,Ct=e.Function,Ot=e.Math,Tt=e.Object,Pt=e.RegExp,At=e.String,jt=e.TypeError,It=St.prototype,Nt=Ct.prototype,Dt=Tt.prototype,Lt=e["__core-js_shared__"],Ft=Nt.toString,Mt=Dt.hasOwnProperty,Rt=0,Bt=(O=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",zt=Dt.toString,qt=Ft.call(Tt),Ht=pe._,Ut=Pt("^"+Ft.call(Mt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=ge?e.Buffer:n,Vt=e.Symbol,$t=e.Uint8Array,Gt=Wt?Wt.allocUnsafe:n,Kt=an(Tt.getPrototypeOf,Tt),Qt=Tt.create,Zt=Dt.propertyIsEnumerable,Yt=It.splice,ee=Vt?Vt.isConcatSpreadable:n,ae=Vt?Vt.iterator:n,le=Vt?Vt.toStringTag:n,fe=function(){try{var t=po(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,de=kt&&kt.now!==pe.Date.now&&kt.now,me=e.setTimeout!==pe.setTimeout&&e.setTimeout,ve=Ot.ceil,Me=Ot.floor,Ve=Tt.getOwnPropertySymbols,gn=Wt?Wt.isBuffer:n,mn=e.isFinite,vn=It.join,yn=an(Tt.keys,Tt),bn=Ot.max,wn=Ot.min,_n=kt.now,xn=e.parseInt,Sn=Ot.random,kn=It.reverse,En=po(e,"DataView"),Cn=po(e,"Map"),On=po(e,"Promise"),Tn=po(e,"Set"),Pn=po(e,"WeakMap"),An=po(Tt,"create"),jn=Pn&&new Pn,In={},Nn=zo(En),Dn=zo(Cn),Ln=zo(On),Fn=zo(Tn),Mn=zo(Pn),Rn=Vt?Vt.prototype:n,Bn=Rn?Rn.valueOf:n,zn=Rn?Rn.toString:n;function qn(t){if(ra(t)&&!$s(t)&&!(t instanceof Vn)){if(t instanceof Wn)return t;if(Mt.call(t,"__wrapped__"))return qo(t)}return new Wn(t)}var Hn=function(){function t(){}return function(e){if(!na(e))return{};if(Qt)return Qt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Un(){}function Wn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function $n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Jn(t,e){var n=$s(t),r=!n&&Vs(t),i=!n&&!r&&Zs(t),o=!n&&!r&&!i&&fa(t),s=n||r||i||o,a=s?Ke(t.length,At):[],c=a.length;for(var u in t)!e&&!Mt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,c))||a.push(u);return a}function Xn(t){var e=t.length;return e?t[Qr(0,e-1)]:n}function Yn(t,e){return Mo(Ai(t),cr(e,0,t.length))}function tr(t){return Mo(Ai(t))}function er(t,e,r){(r!==n&&!Hs(t[e],r)||r===n&&!(e in t))&&sr(t,e,r)}function nr(t,e,r){var i=t[e];Mt.call(t,e)&&Hs(i,r)&&(r!==n||e in t)||sr(t,e,r)}function rr(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function ir(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&ji(e,Na(e),t)}function sr(t,e,n){"__proto__"==e&&fe?fe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var r=-1,i=e.length,o=St(i),s=null==t;++r<i;)o[r]=s?n:Ta(t,e[r]);return o}function cr(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function ur(t,e,r,i,o,s){var a,c=1&e,u=2&e,l=4&e;if(r&&(a=o?r(t,i,o,s):r(t)),a!==n)return a;if(!na(t))return t;var f=$s(t);if(f){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Ai(t,a)}else{var p=mo(t),h=p==_||p==x;if(Zs(t))return ki(t,c);if(p==E||p==m||h&&!o){if(a=u||h?{}:yo(t),!c)return u?function(t,e){return ji(t,go(t),e)}(t,function(t,e){return t&&ji(e,Da(e),t)}(a,t)):function(t,e){return ji(t,ho(t),e)}(t,or(a,t))}else{if(!se[p])return o?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case N:return Ei(t);case y:case b:return new r(+t);case D:return function(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case F:case M:case R:case B:case z:case q:case H:case U:return Ci(t,n);case S:return new r;case k:case A:return new r(t);case T:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new r;case j:return i=t,Bn?Tt(Bn.call(i)):{}}var i}(t,p,c)}}s||(s=new Zn);var d=s.get(t);if(d)return d;s.set(t,a),ca(t)?t.forEach((function(n){a.add(ur(n,e,r,n,t,s))})):ia(t)&&t.forEach((function(n,i){a.set(i,ur(n,e,r,i,t,s))}));var g=f?n:(l?u?oo:io:u?Da:Na)(t);return Ce(g||t,(function(n,i){g&&(n=t[i=n]),nr(a,i,ur(n,e,r,i,t,s))})),a}function lr(t,e,r){var i=r.length;if(null==t)return!i;for(t=Tt(t);i--;){var o=r[i],s=e[o],a=t[o];if(a===n&&!(o in t)||!s(a))return!1}return!0}function fr(t,e,i){if("function"!=typeof t)throw new jt(r);return No((function(){t.apply(n,i)}),e)}function pr(t,e,n,r){var i=-1,o=Ae,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=Ie(e,Qe(n))),r?(o=je,s=!1):e.length>=200&&(o=Je,s=!1,e=new Qn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,s&&f==f){for(var p=u;p--;)if(e[p]===f)continue t;c.push(l)}else o(e,f,r)||c.push(l)}return c}qn.templateSettings={escape:J,evaluate:X,interpolate:Y,variable:"",imports:{_:qn}},qn.prototype=Un.prototype,qn.prototype.constructor=qn,Wn.prototype=Hn(Un.prototype),Wn.prototype.constructor=Wn,Vn.prototype=Hn(Un.prototype),Vn.prototype.constructor=Vn,$n.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},$n.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$n.prototype.get=function(t){var e=this.__data__;if(An){var r=e[t];return r===i?n:r}return Mt.call(e,t)?e[t]:n},$n.prototype.has=function(t){var e=this.__data__;return An?e[t]!==n:Mt.call(e,t)},$n.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=An&&e===n?i:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,r=rr(e,t);return r<0?n:e[r][1]},Gn.prototype.has=function(t){return rr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Cn||Gn),string:new $n}},Kn.prototype.delete=function(t){var e=lo(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return lo(this,t).get(t)},Kn.prototype.has=function(t){return lo(this,t).has(t)},Kn.prototype.set=function(t,e){var n=lo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(t){return this.__data__.set(t,i),this},Qn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Cn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(t,e),this.size=n.size,this};var hr=Di(_r),dr=Di(xr,!0);function gr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,r){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(c===n?a==a&&!la(a):r(a,c)))var c=a,u=s}return u}function vr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function yr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=bo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?yr(a,e-1,n,r,i):Ne(i,a):r||(i[i.length]=a)}return i}var br=Li(),wr=Li(!0);function _r(t,e){return t&&br(t,e,Na)}function xr(t,e){return t&&wr(t,e,Na)}function Sr(t,e){return Pe(e,(function(e){return Ys(t[e])}))}function kr(t,e){for(var r=0,i=(e=wi(e,t)).length;null!=t&&r<i;)t=t[Bo(e[r++])];return r&&r==i?t:n}function Er(t,e,n){var r=e(t);return $s(t)?r:Ne(r,n(t))}function Cr(t){return null==t?t===n?"[object Undefined]":"[object Null]":le&&le in Tt(t)?function(t){var e=Mt.call(t,le),r=t[le];try{t[le]=n;var i=!0}catch(t){}var o=zt.call(t);i&&(e?t[le]=r:delete t[le]);return o}(t):function(t){return zt.call(t)}(t)}function Or(t,e){return t>e}function Tr(t,e){return null!=t&&Mt.call(t,e)}function Pr(t,e){return null!=t&&e in Tt(t)}function Ar(t,e,r){for(var i=r?je:Ae,o=t[0].length,s=t.length,a=s,c=St(s),u=1/0,l=[];a--;){var f=t[a];a&&e&&(f=Ie(f,Qe(e))),u=wn(f.length,u),c[a]=!r&&(e||o>=120&&f.length>=120)?new Qn(a&&f):n}f=t[0];var p=-1,h=c[0];t:for(;++p<o&&l.length<u;){var d=f[p],g=e?e(d):d;if(d=r||0!==d?d:0,!(h?Je(h,g):i(l,g,r))){for(a=s;--a;){var m=c[a];if(!(m?Je(m,g):i(t[a],g,r)))continue t}h&&h.push(g),l.push(d)}}return l}function jr(t,e,r){var i=null==(t=Po(t,e=wi(e,t)))?t:t[Bo(Xo(e))];return null==i?n:ke(i,t,r)}function Ir(t){return ra(t)&&Cr(t)==m}function Nr(t,e,r,i,o){return t===e||(null==t||null==e||!ra(t)&&!ra(e)?t!=t&&e!=e:function(t,e,r,i,o,s){var a=$s(t),c=$s(e),u=a?v:mo(t),l=c?v:mo(e),f=(u=u==m?E:u)==E,p=(l=l==m?E:l)==E,h=u==l;if(h&&Zs(t)){if(!Zs(e))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new Zn),a||fa(t)?no(t,e,r,i,o,s):function(t,e,n,r,i,o,s){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!o(new $t(t),new $t(e)));case y:case b:case k:return Hs(+t,+e);case w:return t.name==e.name&&t.message==e.message;case T:case A:return t==e+"";case S:var a=sn;case P:var c=1&r;if(a||(a=un),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var l=no(a(t),a(e),r,i,o,s);return s.delete(t),l;case j:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,u,r,i,o,s);if(!(1&r)){var d=f&&Mt.call(t,"__wrapped__"),g=p&&Mt.call(e,"__wrapped__");if(d||g){var _=d?t.value():t,x=g?e.value():e;return s||(s=new Zn),o(_,x,r,i,s)}}if(!h)return!1;return s||(s=new Zn),function(t,e,r,i,o,s){var a=1&r,c=io(t),u=c.length,l=io(e).length;if(u!=l&&!a)return!1;var f=u;for(;f--;){var p=c[f];if(!(a?p in e:Mt.call(e,p)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var g=!0;s.set(t,e),s.set(e,t);var m=a;for(;++f<u;){var v=t[p=c[f]],y=e[p];if(i)var b=a?i(y,v,p,e,t,s):i(v,y,p,t,e,s);if(!(b===n?v===y||o(v,y,r,i,s):b)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var w=t.constructor,_=e.constructor;w==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(g=!1)}return s.delete(t),s.delete(e),g}(t,e,r,i,o,s)}(t,e,r,i,Nr,o))}function Dr(t,e,r,i){var o=r.length,s=o,a=!i;if(null==t)return!s;for(t=Tt(t);o--;){var c=r[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var u=(c=r[o])[0],l=t[u],f=c[1];if(a&&c[2]){if(l===n&&!(u in t))return!1}else{var p=new Zn;if(i)var h=i(l,f,u,t,e,p);if(!(h===n?Nr(f,l,3,i,p):h))return!1}}return!0}function Lr(t){return!(!na(t)||(e=t,Bt&&Bt in e))&&(Ys(t)?Ut:vt).test(zo(t));var e}function Fr(t){return"function"==typeof t?t:null==t?oc:"object"==typeof t?$s(t)?Hr(t[0],t[1]):qr(t):dc(t)}function Mr(t){if(!Eo(t))return yn(t);var e=[];for(var n in Tt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rr(t){if(!na(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Eo(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function zr(t,e){var n=-1,r=Ks(t)?St(t.length):[];return hr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function qr(t){var e=fo(t);return 1==e.length&&e[0][2]?Oo(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function Hr(t,e){return xo(t)&&Co(e)?Oo(Bo(t),e):function(r){var i=Ta(r,t);return i===n&&i===e?Pa(r,t):Nr(e,i,3)}}function Ur(t,e,r,i,o){t!==e&&br(e,(function(s,a){if(o||(o=new Zn),na(s))!function(t,e,r,i,o,s,a){var c=jo(t,r),u=jo(e,r),l=a.get(u);if(l)return void er(t,r,l);var f=s?s(c,u,r+"",t,e,a):n,p=f===n;if(p){var h=$s(u),d=!h&&Zs(u),g=!h&&!d&&fa(u);f=u,h||d||g?$s(c)?f=c:Qs(c)?f=Ai(c):d?(p=!1,f=ki(u,!0)):g?(p=!1,f=Ci(u,!0)):f=[]:sa(u)||Vs(u)?(f=c,Vs(c)?f=ba(c):na(c)&&!Ys(c)||(f=yo(u))):p=!1}p&&(a.set(u,f),o(f,u,i,s,a),a.delete(u));er(t,r,f)}(t,e,a,r,Ur,i,o);else{var c=i?i(jo(t,a),s,a+"",t,e,o):n;c===n&&(c=s),er(t,a,c)}}),Da)}function Wr(t,e){var r=t.length;if(r)return wo(e+=e<0?r:0,r)?t[e]:n}function Vr(t,e,n){e=e.length?Ie(e,(function(t){return $s(t)?function(e){return kr(e,1===t.length?t[0]:t)}:t})):[oc];var r=-1;return e=Ie(e,Qe(uo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(zr(t,(function(t,n,i){return{criteria:Ie(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var c=Oi(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function $r(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=kr(t,s);n(a,s)&&ti(o,wi(s,t),a)}return o}function Gr(t,e,n,r){var i=r?qe:ze,o=-1,s=e.length,a=t;for(t===e&&(e=Ai(e)),n&&(a=Ie(t,Qe(n)));++o<s;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==t&&Yt.call(a,c,1),Yt.call(t,c,1);return t}function Kr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;wo(i)?Yt.call(t,i,1):pi(t,i)}}return t}function Qr(t,e){return t+Me(Sn()*(e-t+1))}function Zr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=Me(e/2))&&(t+=t)}while(e);return n}function Jr(t,e){return Do(To(t,e,oc),t+"")}function Xr(t){return Xn(Ha(t))}function Yr(t,e){var n=Ha(t);return Mo(n,cr(e,0,n.length))}function ti(t,e,r,i){if(!na(t))return t;for(var o=-1,s=(e=wi(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var u=Bo(e[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var f=c[u];(l=i?i(f,u,c):n)===n&&(l=na(f)?f:wo(e[o+1])?[]:{})}nr(c,u,l),c=c[u]}return t}var ei=jn?function(t,e){return jn.set(t,e),t}:oc,ni=fe?function(t,e){return fe(t,"toString",{configurable:!0,enumerable:!1,value:nc(e),writable:!0})}:oc;function ri(t){return Mo(Ha(t))}function ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=St(i);++r<i;)o[r]=t[r+e];return o}function oi(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!la(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ai(t,e,oc,n)}function ai(t,e,r,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=r(e))!=e,c=null===e,u=la(e),l=e===n;o<s;){var f=Me((o+s)/2),p=r(t[f]),h=p!==n,d=null===p,g=p==p,m=la(p);if(a)var v=i||g;else v=l?g&&(i||h):c?g&&h&&(i||!d):u?g&&h&&!d&&(i||!m):!d&&!m&&(i?p<=e:p<e);v?o=f+1:s=f}return wn(s,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Hs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function ui(t){return"number"==typeof t?t:la(t)?h:+t}function li(t){if("string"==typeof t)return t;if($s(t))return Ie(t,li)+"";if(la(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fi(t,e,n){var r=-1,i=Ae,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=je;else if(o>=200){var u=e?null:Zi(t);if(u)return un(u);s=!1,i=Je,c=new Qn}else c=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,s&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue t;e&&c.push(f),a.push(l)}else i(c,f,n)||(c!==a&&c.push(f),a.push(l))}return a}function pi(t,e){return null==(t=Po(t,e=wi(e,t)))||delete t[Bo(Xo(e))]}function hi(t,e,n,r){return ti(t,e,n(kr(t,e)),r)}function di(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof Vn&&(n=n.value()),De(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function mi(t,e,n){var r=t.length;if(r<2)return r?fi(t[0]):[];for(var i=-1,o=St(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=pr(o[i]||s,t[a],e,n));return fi(yr(o,1),e,n)}function vi(t,e,r){for(var i=-1,o=t.length,s=e.length,a={};++i<o;){var c=i<s?e[i]:n;r(a,t[i],c)}return a}function yi(t){return Qs(t)?t:[]}function bi(t){return"function"==typeof t?t:oc}function wi(t,e){return $s(t)?t:xo(t,e)?[t]:Ro(wa(t))}var _i=Jr;function xi(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:ii(t,e,r)}var Si=he||function(t){return pe.clearTimeout(t)};function ki(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ei(t){var e=new t.constructor(t.byteLength);return new $t(e).set(new $t(t)),e}function Ci(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Oi(t,e){if(t!==e){var r=t!==n,i=null===t,o=t==t,s=la(t),a=e!==n,c=null===e,u=e==e,l=la(e);if(!c&&!l&&!s&&t>e||s&&a&&u&&!c&&!l||i&&a&&u||!r&&u||!o)return 1;if(!i&&!s&&!l&&t<e||l&&r&&o&&!i&&!s||c&&r&&o||!a&&o||!u)return-1}return 0}function Ti(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,c=e.length,u=bn(o-s,0),l=St(c+u),f=!r;++a<c;)l[a]=e[a];for(;++i<s;)(f||i<o)&&(l[n[i]]=t[i]);for(;u--;)l[a++]=t[i++];return l}function Pi(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,c=-1,u=e.length,l=bn(o-a,0),f=St(l+u),p=!r;++i<l;)f[i]=t[i];for(var h=i;++c<u;)f[h+c]=e[c];for(;++s<a;)(p||i<o)&&(f[h+n[s]]=t[i++]);return f}function Ai(t,e){var n=-1,r=t.length;for(e||(e=St(r));++n<r;)e[n]=t[n];return e}function ji(t,e,r,i){var o=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var c=e[s],u=i?i(r[c],t[c],c,r,t):n;u===n&&(u=t[c]),o?sr(r,c,u):nr(r,c,u)}return r}function Ii(t,e){return function(n,r){var i=$s(n)?Ee:ir,o=e?e():{};return i(n,t,uo(r,2),o)}}function Ni(t){return Jr((function(e,r){var i=-1,o=r.length,s=o>1?r[o-1]:n,a=o>2?r[2]:n;for(s=t.length>3&&"function"==typeof s?(o--,s):n,a&&_o(r[0],r[1],a)&&(s=o<3?n:s,o=1),e=Tt(e);++i<o;){var c=r[i];c&&t(e,c,i,s)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Ks(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Tt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Li(t){return function(e,n,r){for(var i=-1,o=Tt(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function Fi(t){return function(e){var r=on(e=wa(e))?pn(e):n,i=r?r[0]:e.charAt(0),o=r?xi(r,1).join(""):e.slice(1);return i[t]()+o}}function Mi(t){return function(e){return De(Ya(Va(e).replace(Jt,"")),t,"")}}function Ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Hn(t.prototype),r=t.apply(n,e);return na(r)?r:n}}function Bi(t){return function(e,r,i){var o=Tt(e);if(!Ks(e)){var s=uo(r,3);e=Na(e),r=function(t){return s(o[t],t,o)}}var a=t(e,r,i);return a>-1?o[s?e[a]:a]:n}}function zi(t){return ro((function(e){var i=e.length,o=i,s=Wn.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new jt(r);if(s&&!c&&"wrapper"==ao(a))var c=new Wn([],!0)}for(o=c?o:i;++o<i;){var u=ao(a=e[o]),l="wrapper"==u?so(a):n;c=l&&So(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[ao(l[0])].apply(c,l[3]):1==a.length&&So(a)?c[u]():c.thru(a)}return function(){var t=arguments,n=t[0];if(c&&1==t.length&&$s(n))return c.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function qi(t,e,r,i,o,s,a,c,l,f){var p=e&u,h=1&e,d=2&e,g=24&e,m=512&e,v=d?n:Ri(t);return function n(){for(var u=arguments.length,y=St(u),b=u;b--;)y[b]=arguments[b];if(g)var w=co(n),_=tn(y,w);if(i&&(y=Ti(y,i,o,g)),s&&(y=Pi(y,s,a,g)),u-=_,g&&u<f){var x=cn(y,w);return Ki(t,e,qi,n.placeholder,r,y,x,c,l,f-u)}var S=h?r:this,k=d?S[t]:t;return u=y.length,c?y=Ao(y,c):m&&u>1&&y.reverse(),p&&l<u&&(y.length=l),this&&this!==pe&&this instanceof n&&(k=v||Ri(k)),k.apply(S,y)}}function Hi(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(r,i){var o;if(r===n&&i===n)return e;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=li(r),i=li(i)):(r=ui(r),i=ui(i)),o=t(r,i)}return o}}function Wi(t){return ro((function(e){return e=Ie(e,Qe(uo())),Jr((function(n){var r=this;return t(e,(function(t){return ke(t,r,n)}))}))}))}function Vi(t,e){var r=(e=e===n?" ":li(e)).length;if(r<2)return r?Zr(e,t):e;var i=Zr(e,ve(t/fn(e)));return on(e)?xi(pn(i),0,t).join(""):i.slice(0,t)}function $i(t){return function(e,r,i){return i&&"number"!=typeof i&&_o(e,r,i)&&(r=i=n),e=ga(e),r===n?(r=e,e=0):r=ga(r),function(t,e,n,r){for(var i=-1,o=bn(ve((e-t)/(n||1)),0),s=St(o);o--;)s[r?o:++i]=t,t+=n;return s}(e,r,i=i===n?e<r?1:-1:ga(i),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ya(e),n=ya(n)),t(e,n)}}function Ki(t,e,r,i,o,s,u,l,f,p){var h=8&e;e|=h?a:c,4&(e&=~(h?c:a))||(e&=-4);var d=[t,e,o,h?s:n,h?u:n,h?n:s,h?n:u,l,f,p],g=r.apply(n,d);return So(t)&&Io(g,d),g.placeholder=i,Lo(g,t,e)}function Qi(t){var e=Ot[t];return function(t,n){if(t=ya(t),(n=null==n?0:wn(ma(n),292))&&mn(t)){var r=(wa(t)+"e").split("e");return+((r=(wa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Zi=Tn&&1/un(new Tn([,-0]))[1]==f?function(t){return new Tn(t)}:lc;function Ji(t){return function(e){var n=mo(e);return n==S?sn(e):n==P?ln(e):function(t,e){return Ie(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,i,f,p,h,d,g){var m=2&e;if(!m&&"function"!=typeof t)throw new jt(r);var v=f?f.length:0;if(v||(e&=-97,f=p=n),d=d===n?d:bn(ma(d),0),g=g===n?g:ma(g),v-=p?p.length:0,e&c){var y=f,b=p;f=p=n}var w=m?n:so(t),_=[t,e,i,f,p,y,b,h,d,g];if(w&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,a=r==u&&8==n||r==u&&n==l&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?Ti(f,c,e[4]):c,t[4]=f?cn(t[3],o):e[4]}(c=e[5])&&(f=t[5],t[5]=f?Pi(f,c,e[6]):c,t[6]=f?cn(t[5],o):e[6]);(c=e[7])&&(t[7]=c);r&u&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(_,w),t=_[0],e=_[1],i=_[2],f=_[3],p=_[4],!(g=_[9]=_[9]===n?m?0:t.length:bn(_[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||e==s?function(t,e,r){var i=Ri(t);return function o(){for(var s=arguments.length,a=St(s),c=s,u=co(o);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==u&&a[s-1]!==u?[]:cn(a,u);return(s-=l.length)<r?Ki(t,e,qi,o.placeholder,n,a,l,n,n,r-s):ke(this&&this!==pe&&this instanceof o?i:t,this,a)}}(t,e,g):e!=a&&33!=e||p.length?qi.apply(n,_):function(t,e,n,r){var i=1&e,o=Ri(t);return function e(){for(var s=-1,a=arguments.length,c=-1,u=r.length,l=St(u+a),f=this&&this!==pe&&this instanceof e?o:t;++c<u;)l[c]=r[c];for(;a--;)l[c++]=arguments[++s];return ke(f,i?n:this,l)}}(t,e,i,f);else var x=function(t,e,n){var r=1&e,i=Ri(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return Lo((w?ei:Io)(x,_),t,e)}function Yi(t,e,r,i){return t===n||Hs(t,Dt[r])&&!Mt.call(i,r)?e:t}function to(t,e,r,i,o,s){return na(t)&&na(e)&&(s.set(e,t),Ur(t,e,n,to,s),s.delete(e)),t}function eo(t){return sa(t)?n:t}function no(t,e,r,i,o,s){var a=1&r,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(t),f=s.get(e);if(l&&f)return l==e&&f==t;var p=-1,h=!0,d=2&r?new Qn:n;for(s.set(t,e),s.set(e,t);++p<c;){var g=t[p],m=e[p];if(i)var v=a?i(m,g,p,e,t,s):i(g,m,p,t,e,s);if(v!==n){if(v)continue;h=!1;break}if(d){if(!Fe(e,(function(t,e){if(!Je(d,e)&&(g===t||o(g,t,r,i,s)))return d.push(e)}))){h=!1;break}}else if(g!==m&&!o(g,m,r,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function ro(t){return Do(To(t,n,Go),t+"")}function io(t){return Er(t,Na,ho)}function oo(t){return Er(t,Da,go)}var so=jn?function(t){return jn.get(t)}:lc;function ao(t){for(var e=t.name+"",n=In[e],r=Mt.call(In,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function co(t){return(Mt.call(qn,"placeholder")?qn:t).placeholder}function uo(){var t=qn.iteratee||sc;return t=t===sc?Fr:t,arguments.length?t(arguments[0],arguments[1]):t}function lo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function fo(t){for(var e=Na(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Co(i)]}return e}function po(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Lr(r)?r:n}var ho=Ve?function(t){return null==t?[]:(t=Tt(t),Pe(Ve(t),(function(e){return Zt.call(t,e)})))}:vc,go=Ve?function(t){for(var e=[];t;)Ne(e,ho(t)),t=Kt(t);return e}:vc,mo=Cr;function vo(t,e,n){for(var r=-1,i=(e=wi(e,t)).length,o=!1;++r<i;){var s=Bo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ea(i)&&wo(s,i)&&($s(t)||Vs(t))}function yo(t){return"function"!=typeof t.constructor||Eo(t)?{}:Hn(Kt(t))}function bo(t){return $s(t)||Vs(t)||!!(ee&&t&&t[ee])}function wo(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function _o(t,e,n){if(!na(n))return!1;var r=typeof e;return!!("number"==r?Ks(n)&&wo(e,n.length):"string"==r&&e in n)&&Hs(n[e],t)}function xo(t,e){if($s(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!la(t))||(et.test(t)||!tt.test(t)||null!=e&&t in Tt(e))}function So(t){var e=ao(t),n=qn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=so(n);return!!r&&t===r[0]}(En&&mo(new En(new ArrayBuffer(1)))!=D||Cn&&mo(new Cn)!=S||On&&mo(On.resolve())!=C||Tn&&mo(new Tn)!=P||Pn&&mo(new Pn)!=I)&&(mo=function(t){var e=Cr(t),r=e==E?t.constructor:n,i=r?zo(r):"";if(i)switch(i){case Nn:return D;case Dn:return S;case Ln:return C;case Fn:return P;case Mn:return I}return e});var ko=Lt?Ys:yc;function Eo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function Co(t){return t==t&&!na(t)}function Oo(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Tt(r)))}}function To(t,e,r){return e=bn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=bn(n.length-e,0),s=St(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=St(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),ke(t,this,a)}}function Po(t,e){return e.length<2?t:kr(t,ii(e,0,-1))}function Ao(t,e){for(var r=t.length,i=wn(e.length,r),o=Ai(t);i--;){var s=e[i];t[i]=wo(s,r)?o[s]:n}return t}function jo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Io=Fo(ei),No=me||function(t,e){return pe.setTimeout(t,e)},Do=Fo(ni);function Lo(t,e,n){var r=e+"";return Do(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ct,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(g,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(lt):[]}(r),n)))}function Fo(t){var e=0,r=0;return function(){var i=_n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Mo(t,e){var r=-1,i=t.length,o=i-1;for(e=e===n?i:e;++r<e;){var s=Qr(r,o),a=t[s];t[s]=t[r],t[r]=a}return t.length=e,t}var Ro=function(t){var e=Fs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(pt,"$1"):n||t)})),e}));function Bo(t){if("string"==typeof t||la(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Vn)return t.clone();var e=new Wn(t.__wrapped__,t.__chain__);return e.__actions__=Ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ho=Jr((function(t,e){return Qs(t)?pr(t,yr(e,1,Qs,!0)):[]})),Uo=Jr((function(t,e){var r=Xo(e);return Qs(r)&&(r=n),Qs(t)?pr(t,yr(e,1,Qs,!0),uo(r,2)):[]})),Wo=Jr((function(t,e){var r=Xo(e);return Qs(r)&&(r=n),Qs(t)?pr(t,yr(e,1,Qs,!0),n,r):[]}));function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=bn(r+i,0)),Be(t,uo(e,3),i)}function $o(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==n&&(o=ma(r),o=r<0?bn(i+o,0):wn(o,i-1)),Be(t,uo(e,3),o,!0)}function Go(t){return(null==t?0:t.length)?yr(t,1):[]}function Ko(t){return t&&t.length?t[0]:n}var Qo=Jr((function(t){var e=Ie(t,yi);return e.length&&e[0]===t[0]?Ar(e):[]})),Zo=Jr((function(t){var e=Xo(t),r=Ie(t,yi);return e===Xo(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Ar(r,uo(e,2)):[]})),Jo=Jr((function(t){var e=Xo(t),r=Ie(t,yi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Ar(r,n,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Yo=Jr(ts);function ts(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var es=ro((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Kr(t,Ie(e,(function(t){return wo(t,n)?+t:t})).sort(Oi)),r}));function ns(t){return null==t?t:kn.call(t)}var rs=Jr((function(t){return fi(yr(t,1,Qs,!0))})),is=Jr((function(t){var e=Xo(t);return Qs(e)&&(e=n),fi(yr(t,1,Qs,!0),uo(e,2))})),os=Jr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,fi(yr(t,1,Qs,!0),n,e)}));function ss(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Qs(t))return e=bn(t.length,e),!0})),Ke(e,(function(e){return Ie(t,We(e))}))}function as(t,e){if(!t||!t.length)return[];var r=ss(t);return null==e?r:Ie(r,(function(t){return ke(e,n,t)}))}var cs=Jr((function(t,e){return Qs(t)?pr(t,e):[]})),us=Jr((function(t){return mi(Pe(t,Qs))})),ls=Jr((function(t){var e=Xo(t);return Qs(e)&&(e=n),mi(Pe(t,Qs),uo(e,2))})),fs=Jr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,mi(Pe(t,Qs),n,e)})),ps=Jr(ss);var hs=Jr((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,as(t,r)}));function ds(t){var e=qn(t);return e.__chain__=!0,e}function gs(t,e){return e(t)}var ms=ro((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,o=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Vn&&wo(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:gs,args:[o],thisArg:n}),new Wn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));var vs=Ii((function(t,e,n){Mt.call(t,n)?++t[n]:sr(t,n,1)}));var ys=Bi(Vo),bs=Bi($o);function ws(t,e){return($s(t)?Ce:hr)(t,uo(e,3))}function _s(t,e){return($s(t)?Oe:dr)(t,uo(e,3))}var xs=Ii((function(t,e,n){Mt.call(t,n)?t[n].push(e):sr(t,n,[e])}));var Ss=Jr((function(t,e,n){var r=-1,i="function"==typeof e,o=Ks(t)?St(t.length):[];return hr(t,(function(t){o[++r]=i?ke(e,t,n):jr(t,e,n)})),o})),ks=Ii((function(t,e,n){sr(t,n,e)}));function Es(t,e){return($s(t)?Ie:zr)(t,uo(e,3))}var Cs=Ii((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Os=Jr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_o(t,e[0],e[1])?e=[]:n>2&&_o(e[0],e[1],e[2])&&(e=[e[0]]),Vr(t,yr(e,1),[])})),Ts=de||function(){return pe.Date.now()};function Ps(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Xi(t,u,n,n,n,n,e)}function As(t,e){var i;if("function"!=typeof e)throw new jt(r);return t=ma(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var js=Jr((function(t,e,n){var r=1;if(n.length){var i=cn(n,co(js));r|=a}return Xi(t,r,e,n,i)})),Is=Jr((function(t,e,n){var r=3;if(n.length){var i=cn(n,co(Is));r|=a}return Xi(e,r,t,n,i)}));function Ns(t,e,i){var o,s,a,c,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new jt(r);function g(e){var r=o,i=s;return o=s=n,f=e,c=t.apply(i,r)}function m(t){return f=t,u=No(y,e),p?g(t):c}function v(t){var r=t-l;return l===n||r>=e||r<0||h&&t-f>=a}function y(){var t=Ts();if(v(t))return b(t);u=No(y,function(t){var n=e-(t-l);return h?wn(n,a-(t-f)):n}(t))}function b(t){return u=n,d&&o?g(t):(o=s=n,c)}function w(){var t=Ts(),r=v(t);if(o=arguments,s=this,l=t,r){if(u===n)return m(l);if(h)return Si(u),u=No(y,e),g(l)}return u===n&&(u=No(y,e)),c}return e=ya(e)||0,na(i)&&(p=!!i.leading,a=(h="maxWait"in i)?bn(ya(i.maxWait)||0,e):a,d="trailing"in i?!!i.trailing:d),w.cancel=function(){u!==n&&Si(u),f=0,o=l=s=u=n},w.flush=function(){return u===n?c:b(Ts())},w}var Ds=Jr((function(t,e){return fr(t,1,e)})),Ls=Jr((function(t,e,n){return fr(t,ya(e)||0,n)}));function Fs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new jt(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Fs.Cache||Kn),n}function Ms(t){if("function"!=typeof t)throw new jt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Fs.Cache=Kn;var Rs=_i((function(t,e){var n=(e=1==e.length&&$s(e[0])?Ie(e[0],Qe(uo())):Ie(yr(e,1),Qe(uo()))).length;return Jr((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ke(t,this,r)}))})),Bs=Jr((function(t,e){var r=cn(e,co(Bs));return Xi(t,a,n,e,r)})),zs=Jr((function(t,e){var r=cn(e,co(zs));return Xi(t,c,n,e,r)})),qs=ro((function(t,e){return Xi(t,l,n,n,n,e)}));function Hs(t,e){return t===e||t!=t&&e!=e}var Us=Gi(Or),Ws=Gi((function(t,e){return t>=e})),Vs=Ir(function(){return arguments}())?Ir:function(t){return ra(t)&&Mt.call(t,"callee")&&!Zt.call(t,"callee")},$s=St.isArray,Gs=ye?Qe(ye):function(t){return ra(t)&&Cr(t)==N};function Ks(t){return null!=t&&ea(t.length)&&!Ys(t)}function Qs(t){return ra(t)&&Ks(t)}var Zs=gn||yc,Js=be?Qe(be):function(t){return ra(t)&&Cr(t)==b};function Xs(t){if(!ra(t))return!1;var e=Cr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!sa(t)}function Ys(t){if(!na(t))return!1;var e=Cr(t);return e==_||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ta(t){return"number"==typeof t&&t==ma(t)}function ea(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function na(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ra(t){return null!=t&&"object"==typeof t}var ia=we?Qe(we):function(t){return ra(t)&&mo(t)==S};function oa(t){return"number"==typeof t||ra(t)&&Cr(t)==k}function sa(t){if(!ra(t)||Cr(t)!=E)return!1;var e=Kt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==qt}var aa=_e?Qe(_e):function(t){return ra(t)&&Cr(t)==T};var ca=xe?Qe(xe):function(t){return ra(t)&&mo(t)==P};function ua(t){return"string"==typeof t||!$s(t)&&ra(t)&&Cr(t)==A}function la(t){return"symbol"==typeof t||ra(t)&&Cr(t)==j}var fa=Se?Qe(Se):function(t){return ra(t)&&ea(t.length)&&!!oe[Cr(t)]};var pa=Gi(Br),ha=Gi((function(t,e){return t<=e}));function da(t){if(!t)return[];if(Ks(t))return ua(t)?pn(t):Ai(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=mo(t);return(e==S?sn:e==P?un:Ha)(t)}function ga(t){return t?(t=ya(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ma(t){var e=ga(t),n=e%1;return e==e?n?e-n:e:0}function va(t){return t?cr(ma(t),0,d):0}function ya(t){if("number"==typeof t)return t;if(la(t))return h;if(na(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=na(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ot,"");var n=mt.test(t);return n||yt.test(t)?ue(t.slice(2),n?2:8):gt.test(t)?h:+t}function ba(t){return ji(t,Da(t))}function wa(t){return null==t?"":li(t)}var _a=Ni((function(t,e){if(Eo(e)||Ks(e))ji(e,Na(e),t);else for(var n in e)Mt.call(e,n)&&nr(t,n,e[n])})),xa=Ni((function(t,e){ji(e,Da(e),t)})),Sa=Ni((function(t,e,n,r){ji(e,Da(e),t,r)})),ka=Ni((function(t,e,n,r){ji(e,Na(e),t,r)})),Ea=ro(ar);var Ca=Jr((function(t,e){t=Tt(t);var r=-1,i=e.length,o=i>2?e[2]:n;for(o&&_o(e[0],e[1],o)&&(i=1);++r<i;)for(var s=e[r],a=Da(s),c=-1,u=a.length;++c<u;){var l=a[c],f=t[l];(f===n||Hs(f,Dt[l])&&!Mt.call(t,l))&&(t[l]=s[l])}return t})),Oa=Jr((function(t){return t.push(n,to),ke(Fa,n,t)}));function Ta(t,e,r){var i=null==t?n:kr(t,e);return i===n?r:i}function Pa(t,e){return null!=t&&vo(t,e,Pr)}var Aa=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),nc(oc)),ja=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),uo),Ia=Jr(jr);function Na(t){return Ks(t)?Jn(t):Mr(t)}function Da(t){return Ks(t)?Jn(t,!0):Rr(t)}var La=Ni((function(t,e,n){Ur(t,e,n)})),Fa=Ni((function(t,e,n,r){Ur(t,e,n,r)})),Ma=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ie(e,(function(e){return e=wi(e,t),r||(r=e.length>1),e})),ji(t,oo(t),n),r&&(n=ur(n,7,eo));for(var i=e.length;i--;)pi(n,e[i]);return n}));var Ra=ro((function(t,e){return null==t?{}:function(t,e){return $r(t,e,(function(e,n){return Pa(t,n)}))}(t,e)}));function Ba(t,e){if(null==t)return{};var n=Ie(oo(t),(function(t){return[t]}));return e=uo(e),$r(t,n,(function(t,n){return e(t,n[0])}))}var za=Ji(Na),qa=Ji(Da);function Ha(t){return null==t?[]:Ze(t,Na(t))}var Ua=Mi((function(t,e,n){return e=e.toLowerCase(),t+(n?Wa(e):e)}));function Wa(t){return Xa(wa(t).toLowerCase())}function Va(t){return(t=wa(t))&&t.replace(wt,en).replace(Xt,"")}var $a=Mi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ga=Mi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ka=Fi("toLowerCase");var Qa=Mi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Za=Mi((function(t,e,n){return t+(n?" ":"")+Xa(e)}));var Ja=Mi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Fi("toUpperCase");function Ya(t,e,r){return t=wa(t),(e=r?n:e)===n?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(ft)||[]}(t):t.match(e)||[]}var tc=Jr((function(t,e){try{return ke(t,n,e)}catch(t){return Xs(t)?t:new Et(t)}})),ec=ro((function(t,e){return Ce(e,(function(e){e=Bo(e),sr(t,e,js(t[e],t))})),t}));function nc(t){return function(){return t}}var rc=zi(),ic=zi(!0);function oc(t){return t}function sc(t){return Fr("function"==typeof t?t:ur(t,1))}var ac=Jr((function(t,e){return function(n){return jr(n,t,e)}})),cc=Jr((function(t,e){return function(n){return jr(t,n,e)}}));function uc(t,e,n){var r=Na(e),i=Sr(e,r);null!=n||na(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Sr(e,Na(e)));var o=!(na(n)&&"chain"in n&&!n.chain),s=Ys(t);return Ce(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function lc(){}var fc=Wi(Ie),pc=Wi(Te),hc=Wi(Fe);function dc(t){return xo(t)?We(Bo(t)):function(t){return function(e){return kr(e,t)}}(t)}var gc=$i(),mc=$i(!0);function vc(){return[]}function yc(){return!1}var bc=Ui((function(t,e){return t+e}),0),wc=Qi("ceil"),_c=Ui((function(t,e){return t/e}),1),xc=Qi("floor");var Sc,kc=Ui((function(t,e){return t*e}),1),Ec=Qi("round"),Cc=Ui((function(t,e){return t-e}),0);return qn.after=function(t,e){if("function"!=typeof e)throw new jt(r);return t=ma(t),function(){if(--t<1)return e.apply(this,arguments)}},qn.ary=Ps,qn.assign=_a,qn.assignIn=xa,qn.assignInWith=Sa,qn.assignWith=ka,qn.at=Ea,qn.before=As,qn.bind=js,qn.bindAll=ec,qn.bindKey=Is,qn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return $s(t)?t:[t]},qn.chain=ds,qn.chunk=function(t,e,r){e=(r?_o(t,e,r):e===n)?1:bn(ma(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,a=St(ve(i/e));o<i;)a[s++]=ii(t,o,o+=e);return a},qn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},qn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=St(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne($s(n)?Ai(n):[n],yr(e,1))},qn.cond=function(t){var e=null==t?0:t.length,n=uo();return t=e?Ie(t,(function(t){if("function"!=typeof t[1])throw new jt(r);return[n(t[0]),t[1]]})):[],Jr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ke(i[0],this,n))return ke(i[1],this,n)}}))},qn.conforms=function(t){return function(t){var e=Na(t);return function(n){return lr(n,t,e)}}(ur(t,1))},qn.constant=nc,qn.countBy=vs,qn.create=function(t,e){var n=Hn(t);return null==e?n:or(n,e)},qn.curry=function t(e,r,i){var o=Xi(e,8,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},qn.curryRight=function t(e,r,i){var o=Xi(e,s,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},qn.debounce=Ns,qn.defaults=Ca,qn.defaultsDeep=Oa,qn.defer=Ds,qn.delay=Ls,qn.difference=Ho,qn.differenceBy=Uo,qn.differenceWith=Wo,qn.drop=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=r||e===n?1:ma(e))<0?0:e,i):[]},qn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=r||e===n?1:ma(e)))<0?0:e):[]},qn.dropRightWhile=function(t,e){return t&&t.length?di(t,uo(e,3),!0,!0):[]},qn.dropWhile=function(t,e){return t&&t.length?di(t,uo(e,3),!0):[]},qn.fill=function(t,e,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&_o(t,e,r)&&(r=0,i=o),function(t,e,r,i){var o=t.length;for((r=ma(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:ma(i))<0&&(i+=o),i=r>i?0:va(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},qn.filter=function(t,e){return($s(t)?Pe:vr)(t,uo(e,3))},qn.flatMap=function(t,e){return yr(Es(t,e),1)},qn.flatMapDeep=function(t,e){return yr(Es(t,e),f)},qn.flatMapDepth=function(t,e,r){return r=r===n?1:ma(r),yr(Es(t,e),r)},qn.flatten=Go,qn.flattenDeep=function(t){return(null==t?0:t.length)?yr(t,f):[]},qn.flattenDepth=function(t,e){return(null==t?0:t.length)?yr(t,e=e===n?1:ma(e)):[]},qn.flip=function(t){return Xi(t,512)},qn.flow=rc,qn.flowRight=ic,qn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},qn.functions=function(t){return null==t?[]:Sr(t,Na(t))},qn.functionsIn=function(t){return null==t?[]:Sr(t,Da(t))},qn.groupBy=xs,qn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},qn.intersection=Qo,qn.intersectionBy=Zo,qn.intersectionWith=Jo,qn.invert=Aa,qn.invertBy=ja,qn.invokeMap=Ss,qn.iteratee=sc,qn.keyBy=ks,qn.keys=Na,qn.keysIn=Da,qn.map=Es,qn.mapKeys=function(t,e){var n={};return e=uo(e,3),_r(t,(function(t,r,i){sr(n,e(t,r,i),t)})),n},qn.mapValues=function(t,e){var n={};return e=uo(e,3),_r(t,(function(t,r,i){sr(n,r,e(t,r,i))})),n},qn.matches=function(t){return qr(ur(t,1))},qn.matchesProperty=function(t,e){return Hr(t,ur(e,1))},qn.memoize=Fs,qn.merge=La,qn.mergeWith=Fa,qn.method=ac,qn.methodOf=cc,qn.mixin=uc,qn.negate=Ms,qn.nthArg=function(t){return t=ma(t),Jr((function(e){return Wr(e,t)}))},qn.omit=Ma,qn.omitBy=function(t,e){return Ba(t,Ms(uo(e)))},qn.once=function(t){return As(2,t)},qn.orderBy=function(t,e,r,i){return null==t?[]:($s(e)||(e=null==e?[]:[e]),$s(r=i?n:r)||(r=null==r?[]:[r]),Vr(t,e,r))},qn.over=fc,qn.overArgs=Rs,qn.overEvery=pc,qn.overSome=hc,qn.partial=Bs,qn.partialRight=zs,qn.partition=Cs,qn.pick=Ra,qn.pickBy=Ba,qn.property=dc,qn.propertyOf=function(t){return function(e){return null==t?n:kr(t,e)}},qn.pull=Yo,qn.pullAll=ts,qn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,uo(n,2)):t},qn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Gr(t,e,n,r):t},qn.pullAt=es,qn.range=gc,qn.rangeRight=mc,qn.rearg=qs,qn.reject=function(t,e){return($s(t)?Pe:vr)(t,Ms(uo(e,3)))},qn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=uo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Kr(t,i),n},qn.rest=function(t,e){if("function"!=typeof t)throw new jt(r);return Jr(t,e=e===n?e:ma(e))},qn.reverse=ns,qn.sampleSize=function(t,e,r){return e=(r?_o(t,e,r):e===n)?1:ma(e),($s(t)?Yn:Yr)(t,e)},qn.set=function(t,e,n){return null==t?t:ti(t,e,n)},qn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ti(t,e,r,i)},qn.shuffle=function(t){return($s(t)?tr:ri)(t)},qn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&_o(t,e,r)?(e=0,r=i):(e=null==e?0:ma(e),r=r===n?i:ma(r)),ii(t,e,r)):[]},qn.sortBy=Os,qn.sortedUniq=function(t){return t&&t.length?ci(t):[]},qn.sortedUniqBy=function(t,e){return t&&t.length?ci(t,uo(e,2)):[]},qn.split=function(t,e,r){return r&&"number"!=typeof r&&_o(t,e,r)&&(e=r=n),(r=r===n?d:r>>>0)?(t=wa(t))&&("string"==typeof e||null!=e&&!aa(e))&&!(e=li(e))&&on(t)?xi(pn(t),0,r):t.split(e,r):[]},qn.spread=function(t,e){if("function"!=typeof t)throw new jt(r);return e=null==e?0:bn(ma(e),0),Jr((function(n){var r=n[e],i=xi(n,0,e);return r&&Ne(i,r),ke(t,this,i)}))},qn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},qn.take=function(t,e,r){return t&&t.length?ii(t,0,(e=r||e===n?1:ma(e))<0?0:e):[]},qn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=r||e===n?1:ma(e)))<0?0:e,i):[]},qn.takeRightWhile=function(t,e){return t&&t.length?di(t,uo(e,3),!1,!0):[]},qn.takeWhile=function(t,e){return t&&t.length?di(t,uo(e,3)):[]},qn.tap=function(t,e){return e(t),t},qn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new jt(r);return na(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ns(t,e,{leading:i,maxWait:e,trailing:o})},qn.thru=gs,qn.toArray=da,qn.toPairs=za,qn.toPairsIn=qa,qn.toPath=function(t){return $s(t)?Ie(t,Bo):la(t)?[t]:Ai(Ro(wa(t)))},qn.toPlainObject=ba,qn.transform=function(t,e,n){var r=$s(t),i=r||Zs(t)||fa(t);if(e=uo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:na(t)&&Ys(o)?Hn(Kt(t)):{}}return(i?Ce:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},qn.unary=function(t){return Ps(t,1)},qn.union=rs,qn.unionBy=is,qn.unionWith=os,qn.uniq=function(t){return t&&t.length?fi(t):[]},qn.uniqBy=function(t,e){return t&&t.length?fi(t,uo(e,2)):[]},qn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?fi(t,n,e):[]},qn.unset=function(t,e){return null==t||pi(t,e)},qn.unzip=ss,qn.unzipWith=as,qn.update=function(t,e,n){return null==t?t:hi(t,e,bi(n))},qn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:hi(t,e,bi(r),i)},qn.values=Ha,qn.valuesIn=function(t){return null==t?[]:Ze(t,Da(t))},qn.without=cs,qn.words=Ya,qn.wrap=function(t,e){return Bs(bi(e),t)},qn.xor=us,qn.xorBy=ls,qn.xorWith=fs,qn.zip=ps,qn.zipObject=function(t,e){return vi(t||[],e||[],nr)},qn.zipObjectDeep=function(t,e){return vi(t||[],e||[],ti)},qn.zipWith=hs,qn.entries=za,qn.entriesIn=qa,qn.extend=xa,qn.extendWith=Sa,uc(qn,qn),qn.add=bc,qn.attempt=tc,qn.camelCase=Ua,qn.capitalize=Wa,qn.ceil=wc,qn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=ya(r))==r?r:0),e!==n&&(e=(e=ya(e))==e?e:0),cr(ya(t),e,r)},qn.clone=function(t){return ur(t,4)},qn.cloneDeep=function(t){return ur(t,5)},qn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:n)},qn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:n)},qn.conformsTo=function(t,e){return null==e||lr(t,e,Na(e))},qn.deburr=Va,qn.defaultTo=function(t,e){return null==t||t!=t?e:t},qn.divide=_c,qn.endsWith=function(t,e,r){t=wa(t),e=li(e);var i=t.length,o=r=r===n?i:cr(ma(r),0,i);return(r-=e.length)>=0&&t.slice(r,o)==e},qn.eq=Hs,qn.escape=function(t){return(t=wa(t))&&Z.test(t)?t.replace(K,nn):t},qn.escapeRegExp=function(t){return(t=wa(t))&&it.test(t)?t.replace(rt,"\\$&"):t},qn.every=function(t,e,r){var i=$s(t)?Te:gr;return r&&_o(t,e,r)&&(e=n),i(t,uo(e,3))},qn.find=ys,qn.findIndex=Vo,qn.findKey=function(t,e){return Re(t,uo(e,3),_r)},qn.findLast=bs,qn.findLastIndex=$o,qn.findLastKey=function(t,e){return Re(t,uo(e,3),xr)},qn.floor=xc,qn.forEach=ws,qn.forEachRight=_s,qn.forIn=function(t,e){return null==t?t:br(t,uo(e,3),Da)},qn.forInRight=function(t,e){return null==t?t:wr(t,uo(e,3),Da)},qn.forOwn=function(t,e){return t&&_r(t,uo(e,3))},qn.forOwnRight=function(t,e){return t&&xr(t,uo(e,3))},qn.get=Ta,qn.gt=Us,qn.gte=Ws,qn.has=function(t,e){return null!=t&&vo(t,e,Tr)},qn.hasIn=Pa,qn.head=Ko,qn.identity=oc,qn.includes=function(t,e,n,r){t=Ks(t)?t:Ha(t),n=n&&!r?ma(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ze(t,e,n)>-1},qn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=bn(r+i,0)),ze(t,e,i)},qn.inRange=function(t,e,r){return e=ga(e),r===n?(r=e,e=0):r=ga(r),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=ya(t),e,r)},qn.invoke=Ia,qn.isArguments=Vs,qn.isArray=$s,qn.isArrayBuffer=Gs,qn.isArrayLike=Ks,qn.isArrayLikeObject=Qs,qn.isBoolean=function(t){return!0===t||!1===t||ra(t)&&Cr(t)==y},qn.isBuffer=Zs,qn.isDate=Js,qn.isElement=function(t){return ra(t)&&1===t.nodeType&&!sa(t)},qn.isEmpty=function(t){if(null==t)return!0;if(Ks(t)&&($s(t)||"string"==typeof t||"function"==typeof t.splice||Zs(t)||fa(t)||Vs(t)))return!t.length;var e=mo(t);if(e==S||e==P)return!t.size;if(Eo(t))return!Mr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},qn.isEqual=function(t,e){return Nr(t,e)},qn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Nr(t,e,n,r):!!i},qn.isError=Xs,qn.isFinite=function(t){return"number"==typeof t&&mn(t)},qn.isFunction=Ys,qn.isInteger=ta,qn.isLength=ea,qn.isMap=ia,qn.isMatch=function(t,e){return t===e||Dr(t,e,fo(e))},qn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Dr(t,e,fo(e),r)},qn.isNaN=function(t){return oa(t)&&t!=+t},qn.isNative=function(t){if(ko(t))throw new Et("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(t)},qn.isNil=function(t){return null==t},qn.isNull=function(t){return null===t},qn.isNumber=oa,qn.isObject=na,qn.isObjectLike=ra,qn.isPlainObject=sa,qn.isRegExp=aa,qn.isSafeInteger=function(t){return ta(t)&&t>=-9007199254740991&&t<=p},qn.isSet=ca,qn.isString=ua,qn.isSymbol=la,qn.isTypedArray=fa,qn.isUndefined=function(t){return t===n},qn.isWeakMap=function(t){return ra(t)&&mo(t)==I},qn.isWeakSet=function(t){return ra(t)&&"[object WeakSet]"==Cr(t)},qn.join=function(t,e){return null==t?"":vn.call(t,e)},qn.kebabCase=$a,qn.last=Xo,qn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=ma(r))<0?bn(i+o,0):wn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,He,o,!0)},qn.lowerCase=Ga,qn.lowerFirst=Ka,qn.lt=pa,qn.lte=ha,qn.max=function(t){return t&&t.length?mr(t,oc,Or):n},qn.maxBy=function(t,e){return t&&t.length?mr(t,uo(e,2),Or):n},qn.mean=function(t){return Ue(t,oc)},qn.meanBy=function(t,e){return Ue(t,uo(e,2))},qn.min=function(t){return t&&t.length?mr(t,oc,Br):n},qn.minBy=function(t,e){return t&&t.length?mr(t,uo(e,2),Br):n},qn.stubArray=vc,qn.stubFalse=yc,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=kc,qn.nth=function(t,e){return t&&t.length?Wr(t,ma(e)):n},qn.noConflict=function(){return pe._===this&&(pe._=Ht),this},qn.noop=lc,qn.now=Ts,qn.pad=function(t,e,n){t=wa(t);var r=(e=ma(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Vi(Me(i),n)+t+Vi(ve(i),n)},qn.padEnd=function(t,e,n){t=wa(t);var r=(e=ma(e))?fn(t):0;return e&&r<e?t+Vi(e-r,n):t},qn.padStart=function(t,e,n){t=wa(t);var r=(e=ma(e))?fn(t):0;return e&&r<e?Vi(e-r,n)+t:t},qn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(wa(t).replace(st,""),e||0)},qn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&_o(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=ga(t),e===n?(e=t,t=0):e=ga(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var o=Sn();return wn(t+o*(e-t+ce("1e-"+((o+"").length-1))),e)}return Qr(t,e)},qn.reduce=function(t,e,n){var r=$s(t)?De:$e,i=arguments.length<3;return r(t,uo(e,4),n,i,hr)},qn.reduceRight=function(t,e,n){var r=$s(t)?Le:$e,i=arguments.length<3;return r(t,uo(e,4),n,i,dr)},qn.repeat=function(t,e,r){return e=(r?_o(t,e,r):e===n)?1:ma(e),Zr(wa(t),e)},qn.replace=function(){var t=arguments,e=wa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},qn.result=function(t,e,r){var i=-1,o=(e=wi(e,t)).length;for(o||(o=1,t=n);++i<o;){var s=null==t?n:t[Bo(e[i])];s===n&&(i=o,s=r),t=Ys(s)?s.call(t):s}return t},qn.round=Ec,qn.runInContext=t,qn.sample=function(t){return($s(t)?Xn:Xr)(t)},qn.size=function(t){if(null==t)return 0;if(Ks(t))return ua(t)?fn(t):t.length;var e=mo(t);return e==S||e==P?t.size:Mr(t).length},qn.snakeCase=Qa,qn.some=function(t,e,r){var i=$s(t)?Fe:oi;return r&&_o(t,e,r)&&(e=n),i(t,uo(e,3))},qn.sortedIndex=function(t,e){return si(t,e)},qn.sortedIndexBy=function(t,e,n){return ai(t,e,uo(n,2))},qn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&Hs(t[r],e))return r}return-1},qn.sortedLastIndex=function(t,e){return si(t,e,!0)},qn.sortedLastIndexBy=function(t,e,n){return ai(t,e,uo(n,2),!0)},qn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(Hs(t[n],e))return n}return-1},qn.startCase=Za,qn.startsWith=function(t,e,n){return t=wa(t),n=null==n?0:cr(ma(n),0,t.length),e=li(e),t.slice(n,n+e.length)==e},qn.subtract=Cc,qn.sum=function(t){return t&&t.length?Ge(t,oc):0},qn.sumBy=function(t,e){return t&&t.length?Ge(t,uo(e,2)):0},qn.template=function(t,e,r){var i=qn.templateSettings;r&&_o(t,e,r)&&(e=n),t=wa(t),e=Sa({},e,i,Yi);var o,s,a=Sa({},e.imports,i.imports,Yi),c=Na(a),u=Ze(a,c),l=0,f=e.interpolate||_t,p="__p += '",h=Pt((e.escape||_t).source+"|"+f.source+"|"+(f===Y?ht:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(h,(function(e,n,r,i,a,c){return r||(r=i),p+=t.slice(l,c).replace(xt,rn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),p+="';\n";var g=Mt.call(e,"variable")&&e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(W,""):p).replace(V,"$1").replace($,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=tc((function(){return Ct(c,d+"return "+p).apply(n,u)}));if(m.source=p,Xs(m))throw m;return m},qn.times=function(t,e){if((t=ma(t))<1||t>p)return[];var n=d,r=wn(t,d);e=uo(e),t-=d;for(var i=Ke(r,e);++n<t;)e(n);return i},qn.toFinite=ga,qn.toInteger=ma,qn.toLength=va,qn.toLower=function(t){return wa(t).toLowerCase()},qn.toNumber=ya,qn.toSafeInteger=function(t){return t?cr(ma(t),-9007199254740991,p):0===t?t:0},qn.toString=wa,qn.toUpper=function(t){return wa(t).toUpperCase()},qn.trim=function(t,e,r){if((t=wa(t))&&(r||e===n))return t.replace(ot,"");if(!t||!(e=li(e)))return t;var i=pn(t),o=pn(e);return xi(i,Xe(i,o),Ye(i,o)+1).join("")},qn.trimEnd=function(t,e,r){if((t=wa(t))&&(r||e===n))return t.replace(at,"");if(!t||!(e=li(e)))return t;var i=pn(t);return xi(i,0,Ye(i,pn(e))+1).join("")},qn.trimStart=function(t,e,r){if((t=wa(t))&&(r||e===n))return t.replace(st,"");if(!t||!(e=li(e)))return t;var i=pn(t);return xi(i,Xe(i,pn(e))).join("")},qn.truncate=function(t,e){var r=30,i="...";if(na(e)){var o="separator"in e?e.separator:o;r="length"in e?ma(e.length):r,i="omission"in e?li(e.omission):i}var s=(t=wa(t)).length;if(on(t)){var a=pn(t);s=a.length}if(r>=s)return t;var c=r-fn(i);if(c<1)return i;var u=a?xi(a,0,c).join(""):t.slice(0,c);if(o===n)return u+i;if(a&&(c+=u.length-c),aa(o)){if(t.slice(c).search(o)){var l,f=u;for(o.global||(o=Pt(o.source,wa(dt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;u=u.slice(0,p===n?c:p)}}else if(t.indexOf(li(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},qn.unescape=function(t){return(t=wa(t))&&Q.test(t)?t.replace(G,hn):t},qn.uniqueId=function(t){var e=++Rt;return wa(t)+e},qn.upperCase=Ja,qn.upperFirst=Xa,qn.each=ws,qn.eachRight=_s,qn.first=Ko,uc(qn,(Sc={},_r(qn,(function(t,e){Mt.call(qn.prototype,e)||(Sc[e]=t)})),Sc),{chain:!1}),qn.VERSION="4.17.20",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){qn[t].placeholder=qn})),Ce(["drop","take"],(function(t,e){Vn.prototype[t]=function(r){r=r===n?1:bn(ma(r),0);var i=this.__filtered__&&!e?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=wn(r,i.__takeCount__):i.__views__.push({size:wn(r,d),type:t+(i.__dir__<0?"Right":"")}),i},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(oc)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Jr((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return jr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Ms(uo(t)))},Vn.prototype.slice=function(t,e){t=ma(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Vn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=ma(e))<0?r.dropRight(-e):r.take(e-t)),r)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(d)},_r(Vn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=qn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(qn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,c=e instanceof Vn,u=a[0],l=c||$s(e),f=function(t){var e=o.apply(qn,Ne([t],a));return i&&p?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=s&&!p,g=c&&!h;if(!s&&l){e=g?e:new Vn(this);var m=t.apply(e,a);return m.__actions__.push({func:gs,args:[f],thisArg:n}),new Wn(m,p)}return d&&g?t.apply(this,a):(m=this.thru(f),d?i?m.value()[0]:m.value():m)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);qn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply($s(i)?i:[],t)}return this[n]((function(n){return e.apply($s(n)?n:[],t)}))}})),_r(Vn.prototype,(function(t,e){var n=qn[e];if(n){var r=n.name+"";Mt.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[qi(n,2).name]=[{name:"wrapper",func:n}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ai(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=$s(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=wn(e,t+s);break;case"takeRight":t=bn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,f=l.length,p=0,h=wn(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return gi(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var g=-1,m=t[u+=e];++g<f;){var v=l[g],y=v.iteratee,b=v.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue t;break t}}d[p++]=m}return d},qn.prototype.at=ms,qn.prototype.chain=function(){return ds(this)},qn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===n&&(this.__values__=da(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},qn.prototype.plant=function(t){for(var e,r=this;r instanceof Un;){var i=qo(r);i.__index__=0,i.__values__=n,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e},qn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:gs,args:[ns],thisArg:n}),new Wn(e,this.__chain__)}return this.thru(ns)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,ae&&(qn.prototype[ae]=function(){return this}),qn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(pe._=dn,define((function(){return dn}))):de?((de.exports=dn)._=dn,he._=dn):pe._=dn}.call(this),e.exports}.call({});const gt=p.DiagnosticCategory;function mt(t){return new v.Point(t.line-1,t.offset-1)}function vt(t){return yt(t.start,t.end)}function yt(t,e){return new v.Range(mt(t),mt(e))}function bt(t){const e=wt(t),n=e.formatCodeOptions;return{formatCodeOptions:Object.assign({indentSize:atom.config.get("editor.tabLength"),tabSize:atom.config.get("editor.tabLength")},n),compileOnSave:!!e.compileOnSave}}function wt(t){".json"!==d.extname(t)&&(t+=".json");let{config:e}=p.readConfigFile(t,(t=>p.sys.readFile(t)));if(void 0===e)return{};if("string"==typeof e.extends){const n=wt(d.join(d.dirname(t),e.extends));e=Object.assign({},n,e)}return e}function _t(t){return{label:St(t.prefixDisplayParts)+t.parameters.map((t=>St(t.displayParts))).join(St(t.separatorDisplayParts))+St(t.suffixDisplayParts),documentation:St(t.documentation),parameters:t.parameters.map(xt)}}function xt(t){return{label:St(t.displayParts),documentation:St(t.documentation)}}function St(t){return t.map((t=>t.text)).join("")}const kt=function(){let t;return function(e,n){if(void 0===e)return!0;void 0===t&&(t=new Map(Object.values(p.Diagnostics).map((t=>[t.code,t.category]))));const r=t.get(e);return void 0===r||r===n}}();function Et(t){return void 0!==t&&function(t){const e=atom.config.get("atom-typescript").tsFileExtensions;atom.config.get("atom-typescript").allowJS&&e.push(...atom.config.get("atom-typescript").jsFileExtensions);return e.includes(t)}(d.extname(t))}function Ct(){const t=atom.config.get("atom-typescript").tsSyntaxScopes;return atom.config.get("atom-typescript").allowJS&&t.push(...atom.config.get("atom-typescript").jsSyntaxScopes),t}function Ot(t){return Et(t.getPath())&&Tt(t)}function Tt(t){const[e]=t.getRootScopeDescriptor().getScopesArray();return Ct().includes(e)}function Pt(t,e){const n=t.getPath();if(void 0!==n){const i=e?{line:(r=e).row+1,offset:r.column+1}:function(t){const e=t.getCursorBufferPosition();return{line:e.row+1,offset:e.column+1}}(t);return Object.assign({file:n},i)}var r}async function At(t,e){const n=new v.TextEditor({readonly:!0,keyboardInputEnabled:!1,showInvisibles:!1,tabLength:atom.config.get("editor.tabLength")}),r=atom.views.getView(n);try{return r.setUpdatedSynchronously(!0),r.style.pointerEvents="none",r.style.position="absolute",r.style.top="100vh",r.style.width="100vw",atom.grammars.assignLanguageMode(n.getBuffer(),e),n.setText(t),n.scrollToBufferPosition(n.getBuffer().getEndPosition()),atom.views.getView(atom.workspace).appendChild(r),await async function(t){return new Promise((e=>{const n=t.getBuffer().getLanguageMode(),r=t.component.getNextUpdatePromise();if(n.fullyTokenized||n.tree)e(r);else{const n=t.onDidTokenize((()=>{n.dispose(),e(r)}))}}))}(n),Array.from(r.querySelectorAll(".line:not(.dummy)")).map((t=>t.innerHTML))}finally{r.remove()}}function jt(t,e,n){if(!n.childItems)return;for(const r of n.childItems){const n=It(r),i=Nt(r);if(isFinite(n)&&isFinite(i)){if(t>=n&&e<=i){const n=jt(t,e,r);return n||r}if(isFinite(i)&&e<i)break}const o=jt(t,e,r);if(o)return o}const r=It(n),i=Nt(n);return isFinite(r)&&isFinite(i)&&t>=r&&e<=i?n:void 0}function It(t){return t.spans.length>0?t.spans[0].start.line-1:0}function Nt(t){const e=t.spans;return e.length>0?e[e.length-1].end.line-1:0}function Dt(t,e){if(!t||!e)return t===e;if(t.text===e.text){if(e.collapsed&&(t.collapsed=!0),t.childItems&&e.childItems){let n,r;for(let i=0,o=t.childItems.length;i<o;++i)n=t.childItems[i],r=e.childItems[i],Dt(n,r)||(r=e.childItems[i+1],Dt(n,r)||(r=e.childItems[i-1],Dt(n,r)))}return!0}return!1}function Lt(t){if(null!==t&&t.childItems){if(t.childItems.length<1)return void(t.childItems=void 0);t.childItems.sort(((t,e)=>It(t)-It(e)));for(const e of t.childItems)Lt(e)}}class Ft{constructor(t){this.props=t,P.initialize(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),await P.update(this)}async destroy(){await P.destroy(this)}render(){const t=this.props.navTree,{ctrl:e}=this.props,n=e.getSelectedNode(),r=n&&(o=n,(i=t).text===o.text&&dt.isEqual(i.spans,o.spans));var i,o;const s=(t.childItems?"nested-":"")+"item"+(t.collapsed?" collapsed":" expanded")+(r?" selected":""),a=this.getStyles();return P.dom("li",{className:"node entry exanded list-"+s},P.dom("div",{className:"header list-item",on:{click:e=>this.entryClicked(e,t)}},P.dom("span",{className:a},t.text)),P.dom("ol",{className:"entries list-tree"},t.childItems?t.childItems.map((t=>P.dom(Ft,{navTree:t,ctrl:e}))):null))}getStyles(){const{kind:t}=this.props.navTree;let e="icon icon-"+t;const{kindModifiers:n}=this.props.navTree;return n&&(e+=" "+n.split(/[, ]/).map((t=>"modifier-"+t.trim())).join(" ")),e}entryClicked(t,e){t.stopPropagation();(function(t,e){return!!t.childItems&&e.target===e.currentTarget})(e,t)?(e.collapsed=!e.collapsed,pt(P.update(this))):this.props.ctrl.gotoNode(e)}}class Mt{constructor(t){this.props=t,this.subscriptions=new y,this.loadNavTree=async()=>{if(!this.editor)return;if(!this.getClient)return;const t=this.editor.getPath();if(void 0!==t)try{const e=await this.getClient(t),n=(await e.execute("navtree",{file:t})).body;n&&(this.setNavTree(n),await P.update(this))}catch(e){console.error(e,t)}},this.selectAtCursorLine=({newBufferPosition:t})=>{if(!this.props.navTree)return;const e=t.row,n=jt(e,e,this.props.navTree);n!==this.selectedNode&&(this.selectedNode=n,pt(P.update(this)))},this.subscribeToEditor=async t=>{if(this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),!t||!Ot(t))return this.update({navTree:null});this.editor=t,await this.loadNavTree(),this.editorScrolling=t.onDidChangeCursorPosition(this.selectAtCursorLine),this.editorChanging=t.onDidStopChanging(this.loadNavTree)},Lt(t.navTree),P.initialize(this),this.subscriptions.add(atom.workspace.observeActiveTextEditor(this.subscribeToEditor))}async update(t){void 0!==t.navTree&&this.setNavTree(t.navTree),this.props=Object.assign(Object.assign({},this.props),t),await P.update(this)}async destroy(){this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),this.editorScrolling=void 0,this.editorChanging=void 0,this.selectedNode=void 0,this.subscriptions.dispose(),await P.destroy(this)}async setGetClient(t){this.getClient=t,await this.loadNavTree()}getSelectedNode(){return this.selectedNode}render(){const t=this.props.navTree?P.dom(Ft,{navTree:this.props.navTree,ctrl:this}):null;return P.dom("div",{className:"atomts atomts-semantic-view native-key-bindings"},P.dom("ol",{className:"list-tree has-collapsable-children focusable-panel"},t))}readAfterUpdate(){const t=this.element.querySelector(".selected");t&&this.scrollTo(t)}gotoNode(t){if(!this.editor)return;const e=It(t),n=function(t){return t.spans.length>0?t.spans[0].start.offset-1:0}(t);this.editor.setCursorBufferPosition([e,n])}getCursorLine(){return this.editor?this.editor.getLastCursor().getBufferRow():void 0}setNavTree(t){if(Lt(t),dt.isEqual(t,this.props.navTree))return;let e;if(Dt(t,this.props.navTree),this.props.navTree=t,t){const n=this.getCursorLine();void 0!==n&&(e=jt(n,n,t))}this.selectedNode=e}scrollTo(t){const e=t;"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}}class Rt{constructor(t){this.comp=new Mt({navTree:t.navTree})}static create(t){return Rt.instance||(Rt.instance=new Rt(t)),Rt.instance}get element(){return this.comp.element}async setGetClient(t){await this.comp.setGetClient(t),await this.comp.update({})}getTitle(){return"TypeScript"}getURI(){return"atom-typescript://semantic-view"}async destroy(){Rt.instance=null,await this.comp.destroy()}getDefaultLocation(){return"right"}getAllowedLocations(){return["left","right"]}serialize(){return{deserializer:"atomts-semantic-view/SemanticView",data:{navTree:this.comp.props.navTree}}}}Rt.instance=null;var Bt,zt=l,qt=c,Ht=a;Bt=function(t,e){return Ut(t,e)};var Ut=function(t,e){return t?Wt(t,e):new Vt(e)};Bt.createStream=Ut;function Wt(t,e){if(!t)throw new Error("expected readStream");if(!t.readable)throw new Error("readStream must be readable");var n=new Vt(e);return t.pipe(n),n}function Vt(t){zt.Transform.call(this,t),t=t||{},this._readableState.objectMode=!0,this._lineBuffer=[],this._keepEmptyLines=t.keepEmptyLines||!1,this._lastChunkEndedWithCR=!1;var e=this;this.on("pipe",(function(t){e.encoding||t instanceof zt.Readable&&(e.encoding=t._readableState.encoding)}))}Bt.createLineStream=function(t){return console.log("WARNING: byline#createLineStream is deprecated and will be removed soon"),Wt(t)},Bt.LineStream=Vt,qt.inherits(Vt,zt.Transform),Vt.prototype._transform=function(t,e,n){e=e||"utf8",Buffer.isBuffer(t)&&("buffer"==e?(t=t.toString(),e="utf8"):t=t.toString(e)),this._chunkEncoding=e;var r=t.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/g);this._lastChunkEndedWithCR&&"\n"==t[0]&&r.shift(),this._lineBuffer.length>0&&(this._lineBuffer[this._lineBuffer.length-1]+=r[0],r.shift()),this._lastChunkEndedWithCR="\r"==t[t.length-1],this._lineBuffer=this._lineBuffer.concat(r),this._pushBuffer(e,1,n)},Vt.prototype._pushBuffer=function(t,e,n){for(;this._lineBuffer.length>e;){var r=this._lineBuffer.shift();if((this._keepEmptyLines||r.length>0)&&!this.push(this._reencode(r,t))){var i=this;return void Ht.setImmediate((function(){i._pushBuffer(t,e,n)}))}}n()},Vt.prototype._flush=function(t){this._pushBuffer(this._chunkEncoding,0,t)},Vt.prototype._reencode=function(t,e){return this.encoding&&this.encoding!=e?new Buffer(t,e).toString(this.encoding):this.encoding?t:new Buffer(t,e)};class $t{constructor(t){this.reportBusyWhile=t,this.callbacks=new Map,this.interval=0}async add(t,e){try{const n=new Promise(((n,r)=>{this.callbacks.set(t,{command:e,resolve:n,reject:r,started:Date.now()})}));return 0===this.interval&&(this.interval=window.setInterval((()=>{process.activateUvLoop()}),100)),await this.reportBusyWhile(e,(()=>n))}finally{this.callbacks.delete(t),0!==this.interval&&0===this.callbacks.size&&(clearInterval(this.interval),this.interval=0)}}rejectAll(t){for(const{reject:e}of this.callbacks.values())e(t);this.callbacks.clear()}resolve(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log("received response for",t.command,"in",Date.now()-e.started,"ms","with data",t.body),t.success?e.resolve(t):e.reject(new Error(t.message))):console.warn("unexpected response:",t)}resolveMS(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log(`received requestCompleted event for multistep command ${e.command} in ${Date.now()-e.started} ms`),e.resolve(void 0)):console.warn("unexpected requestCompleted event:",t)}error(t,e){const n=this.callbacks.get(t);n?n.reject(e):console.error(e)}}const Gt=new Set(Object.keys({compileOnSaveAffectedFileList:!0,compileOnSaveEmitFile:!0,completionEntryDetails:!0,completions:!0,completionInfo:!0,configure:!0,definition:!0,format:!0,getCodeFixes:!0,getSupportedCodeFixes:!0,documentHighlights:!0,projectInfo:!0,quickinfo:!0,references:!0,reload:!0,rename:!0,navtree:!0,navto:!0,getApplicableRefactors:!0,getEditsForRefactor:!0,organizeImports:!0,signatureHelp:!0,getEditsForFileRename:!0})),Kt=new Set(Object.keys({geterr:!0,geterrForProject:!0})),Qt=new Set(Object.keys({configFileDiag:!0,semanticDiag:!0,suggestionDiag:!0,syntaxDiag:!0}));class Zt{constructor(t,e,n){this.tsServerPath=t,this.version=e,this.reportBusyWhile=n,this.emitter=new b,this.seq=0,this.lastStderrOutput="",this.on=this.emitter.on.bind(this.emitter),this.exitHandler=(t,e=!0)=>{if(this.callbacks.rejectAll(t),e&&console.error("tsserver: ",t),this.server=void 0,this.emitter.emit("terminated"),e){let e=t.message;this.lastStderrOutput&&(e=`Last output from tsserver:\n${this.lastStderrOutput}\n\n${e}`),atom.notifications.addError("TypeScript server quit unexpectedly",{detail:e,stack:t.stack,dismissable:!0})}},this.onMessage=t=>{"response"===t.type?this.callbacks.resolve(t):this.onEvent(t)};const[r,i]=e.split(".");this.multistepSupported=parseInt(r,10)>=2&&parseInt(i,10)>=2,this.callbacks=new $t(this.reportBusyWhile),this.server=this.startServer()}async execute(t,...e){this.server||(this.server=this.startServer(),this.emitter.emit("restarted"));const n={seq:this.seq++,command:t,arguments:e[0]};window.atom_typescript_debug&&console.log("sending request",n);let r=void 0;(function(t){return Gt.has(t)}(t)||this.multistepSupported&&function(t){return Kt.has(t)}(t))&&(r=this.callbacks.add(n.seq,t));try{if(!this.server.stdin)throw new Error("Server stdin is missing");this.server.stdin.write(JSON.stringify(n)+"\n")}catch(t){this.callbacks.error(n.seq,t)}return r}async restartServer(){if(this.server){const t=this.server,e=setTimeout((()=>t.kill()),1e4);await Promise.all([this.execute("exit"),new Promise((t=>{const e=this.emitter.once("terminated",(()=>{e.dispose(),t()}))}))]),clearTimeout(e)}this.server||(this.server=this.startServer(),this.emitter.emit("restarted"))}startServer(){window.atom_typescript_debug&&console.log("starting",this.tsServerPath);const t=function(t){const e=atom.config.get("atom-typescript").locale,n=e?["--locale",e]:[];return new w({command:t,args:n}).process}(this.tsServerPath);if(!t)throw new Error("ChildProcess failed to start");const e=this.exitHandler;if(t.once("error",e),t.once("exit",((t,n)=>{0===t?e(new Error("Server stopped normally"),!1):null!==t?e(new Error("exited with code: "+t)):null!==n&&e(new Error("terminated on signal: "+n))})),!t.stdout)throw new Error("ChildProcess stdout missing");if(!t.stderr)throw new Error("ChildProcess stderr missing");var n;return(n=t.stdout,n.pipe(Xt()).pipe(new Yt)).on("data",this.onMessage),t.stderr.on("data",(t=>{console.warn("tsserver stderr:",this.lastStderrOutput=t.toString())})),t}onEvent(t){var e;window.atom_typescript_debug&&console.log("received event",t),t.body&&(e=t.event,Qt.has(e)?this.emitter.emit(t.event,t.body):"requestCompleted"===t.event&&this.callbacks.resolveMS(t.body))}}var Jt,Xt=x(Bt);class Yt extends f{constructor(){super({objectMode:!0})}_transform(t,e,n){const r=t.toString();try{r.startsWith("{")?this.push(JSON.parse(r)):r.startsWith("Content-Length:")||console.warn(r)}catch(t){console.error("client: failed to parse: ",r)}finally{n(void 0)}}}function te(t,e){void 0===e&&(e=!1);var n=t.length,r=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,f=0;function p(e,n){for(var i=0,o=0;i<e||!n;){var s=t.charCodeAt(r);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}r++,i++}return i<e&&(o=-1),o}function h(){if(i="",f=0,o=r,c=a,l=u,r>=n)return o=n,s=17;var e=t.charCodeAt(r);if(ee(e)){do{r++,i+=String.fromCharCode(e),e=t.charCodeAt(r)}while(ee(e));return s=15}if(ne(e))return r++,i+=String.fromCharCode(e),13===e&&10===t.charCodeAt(r)&&(r++,i+="\n"),a++,u=r,s=14;switch(e){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=function(){for(var e="",i=r;;){if(r>=n){e+=t.substring(i,r),f=2;break}var o=t.charCodeAt(r);if(34===o){e+=t.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(ne(o)){e+=t.substring(i,r),f=2;break}f=6}r++}else{if(e+=t.substring(i,r),++r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:e+='"';break;case 92:e+="\\";break;case 47:e+="/";break;case 98:e+="\b";break;case 102:e+="\f";break;case 110:e+="\n";break;case 114:e+="\r";break;case 116:e+="\t";break;case 117:var s=p(4,!0);s>=0?e+=String.fromCharCode(s):f=4;break;default:f=5}i=r}}return e}(),s=10;case 47:var h=r-1;if(47===t.charCodeAt(r+1)){for(r+=2;r<n&&!ne(t.charCodeAt(r));)r++;return i=t.substring(h,r),s=12}if(42===t.charCodeAt(r+1)){r+=2;for(var g=n-1,m=!1;r<g;){var v=t.charCodeAt(r);if(42===v&&47===t.charCodeAt(r+1)){r+=2,m=!0;break}r++,ne(v)&&(13===v&&10===t.charCodeAt(r)&&r++,a++,u=r)}return m||(r++,f=1),i=t.substring(h,r),s=13}return i+=String.fromCharCode(e),r++,s=16;case 45:if(i+=String.fromCharCode(e),++r===n||!re(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=function(){var e=r;if(48===t.charCodeAt(r))r++;else for(r++;r<t.length&&re(t.charCodeAt(r));)r++;if(r<t.length&&46===t.charCodeAt(r)){if(!(++r<t.length&&re(t.charCodeAt(r))))return f=3,t.substring(e,r);for(r++;r<t.length&&re(t.charCodeAt(r));)r++}var n=r;if(r<t.length&&(69===t.charCodeAt(r)||101===t.charCodeAt(r)))if((++r<t.length&&43===t.charCodeAt(r)||45===t.charCodeAt(r))&&r++,r<t.length&&re(t.charCodeAt(r))){for(r++;r<t.length&&re(t.charCodeAt(r));)r++;n=r}else f=3;return t.substring(e,n)}(),s=11;default:for(;r<n&&d(e);)r++,e=t.charCodeAt(r);if(o!==r){switch(i=t.substring(o,r)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(e),r++,s=16}}function d(t){if(ee(t)||ne(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(t){r=t,i="",o=0,s=16,f=0},getPosition:function(){return r},scan:e?function(){var t;do{t=h()}while(t>=12&&t<=15);return t}:h,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return r-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-l},getTokenError:function(){return f}}}function ee(t){return 32===t||9===t||11===t||12===t||160===t||5760===t||t>=8192&&t<=8203||8239===t||8287===t||12288===t||65279===t}function ne(t){return 10===t||13===t||8232===t||8233===t}function re(t){return t>=48&&t<=57}(Jt||(Jt={})).DEFAULT={allowTrailingComma:!1};var ie,oe,se=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=Jt.DEFAULT);var r=null,i=[],o=[];function s(t){Array.isArray(i)?i.push(t):null!==r&&(i[r]=t)}return function(t,e,n){void 0===n&&(n=Jt.DEFAULT);var r=te(t,!1);function i(t){return t?function(){return t(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function o(t){return t?function(e){return t(e,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),u=i(e.onArrayBegin),l=i(e.onArrayEnd),f=o(e.onLiteralValue),p=o(e.onSeparator),h=i(e.onComment),d=o(e.onError),g=n&&n.disallowComments,m=n&&n.allowTrailingComma;function v(){for(;;){var t=r.scan();switch(r.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:g||y(11);break;case 2:y(12);break;case 6:y(16)}switch(t){case 12:case 13:g?y(10):h();break;case 16:y(1);break;case 15:case 14:break;default:return t}}}function y(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=[]),d(t),e.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==e.indexOf(i)){v();break}if(-1!==n.indexOf(i))break;i=v()}}function b(t){var e=r.getTokenValue();return t?f(e):a(e),v(),!0}function w(){switch(r.getToken()){case 11:var t=r.getTokenValue(),e=Number(t);isNaN(e)&&(y(2),e=0),f(e);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return v(),!0}function _(){return 10!==r.getToken()?(y(3,[],[2,5]),!1):(b(!1),6===r.getToken()?(p(":"),v(),k()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function x(){s(),v();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),2===r.getToken()&&m)break}else t&&y(6,[],[]);_()||y(4,[],[2,5]),t=!0}return c(),2!==r.getToken()?y(7,[2],[]):v(),!0}function S(){u(),v();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),4===r.getToken()&&m)break}else t&&y(6,[],[]);k()||y(4,[],[4,5]),t=!0}return l(),4!==r.getToken()?y(8,[4],[]):v(),!0}function k(){switch(r.getToken()){case 3:return S();case 1:return x();case 10:return b(!0);default:return w()}}if(v(),17===r.getToken())return!!n.allowEmptyContent||(y(4,[],[]),!1);if(!k())return y(4,[],[]),!1;17!==r.getToken()&&y(9,[],[])}(t,{onObjectBegin:function(){var t={};s(t),o.push(i),i=t,r=null},onObjectProperty:function(t){r=t},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var t=[];s(t),o.push(i),i=t,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(t,n,r){e.push({error:t,offset:n,length:r})}},n),i[0]},ae=o,ce=d;oe=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var e=(new Error).stack;return Error.prepareStackTrace=t,e[2].getFileName()};var ue,le,fe,pe,he,de,ge,me,ve,ye,be=d,we=!1;function _e(){le={},fe="win32"===process.platform,pe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,he=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,(de={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n,r,i,o,s=(e=t,n=pe.exec(e),r=(n[1]||"")+(n[2]||""),i=n[3]||"",o=he.exec(i),[r,o[1],o[2],o[3]]);if(!s||4!==s.length)throw new TypeError("Invalid path '"+t+"'");return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},ge=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,(me={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n=(e=t,ge.exec(e).slice(1));if(!n||4!==n.length)throw new TypeError("Invalid path '"+t+"'");return n[1]=n[1]||"",n[2]=n[2]||"",n[3]=n[3]||"",{root:n[0],dir:n[0]+n[1].slice(0,-1),base:n[2],ext:n[3],name:n[2].slice(0,n[2].length-n[3].length)}},le=fe?de.parse:me.parse,ve=me.parse,le.posix=ve,ye=de.parse,le.win32=ye}var xe=be.parse||(we||(we=!0,_e()),le),Se=function(t,e){var n="/";/^([A-Za-z]:)/.test(t)?n="":/^\\\\/.test(t)&&(n="\\\\");for(var r=[t],i=xe(t);i.dir!==r[r.length-1];)r.push(i.dir),i=xe(i.dir);return r.reduce((function(t,r){return t.concat(e.map((function(t){return be.resolve(n,r,t)})))}),[])};ue=function(t,e,n){var r=e&&e.moduleDirectory?[].concat(e.moduleDirectory):["node_modules"];if(e&&"function"==typeof e.paths)return e.paths(n,t,(function(){return Se(t,r)}),e);var i=Se(t,r);return e&&e.paths?i.concat(e.paths):i};var ke;ke=function(t,e){return e||{}};var Ee,Ce,Oe=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function Te(t){for(var e=t.split(" "),n=e.length>1?e[0]:"=",r=(e.length>1?e[1]:e[0]).split("."),i=0;i<3;++i){var o=Number(Oe[i]||0),s=Number(r[i]||0);if(o!==s)return"<"===n?o<s:">="===n&&o>=s}return">="===n}function Pe(t){var e=t.split(/ ?&& ?/);if(0===e.length)return!1;for(var n=0;n<e.length;++n)if(!Te(e[n]))return!1;return!0}function Ae(t){if("boolean"==typeof t)return t;if(t&&"object"==typeof t){for(var e=0;e<t.length;++e)if(Pe(t[e]))return!0;return!1}return Pe(t)}var je;je=JSON.parse('{"assert":true,"async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"dns":true,"domain":true,"events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"string_decoder":true,"sys":true,"timers":true,"_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}');var Ie={};for(var Ne in je)Object.prototype.hasOwnProperty.call(je,Ne)&&(Ie[Ne]=Ae(je[Ne]));Ce=Ie,Ee=function(t){return Object.prototype.hasOwnProperty.call(Ce,t)};var De=ae.realpath&&"function"==typeof ae.realpath.native?ae.realpath.native:ae.realpath,Le=function(t,e){ae.stat(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isFile()||n.isFIFO())}))},Fe=function(t,e){ae.stat(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isDirectory())}))},Me=function(t,e){De(t,(function(n,r){n&&"ENOENT"!==n.code?e(n):e(null,n?t:r)}))},Re=function(t,e,n,r){n&&!1===n.preserveSymlinks?t(e,r):r(null,e)};(ie=function(t,e,n){var r=n,i=e;if("function"==typeof e&&(r=i,i={}),"string"!=typeof t){var o=new TypeError("Path must be a string.");return process.nextTick((function(){r(o)}))}var s=(i=ke(0,i)).isFile||Le,a=i.isDirectory||Fe,c=i.readFile||ae.readFile,u=i.realpath||Me,l=i.packageIterator,f=i.extensions||[".js"],p=i.basedir||ce.dirname(oe()),h=i.filename||p;i.paths=i.paths||[];var d,g=ce.resolve(p);function m(e,n,o){e?r(e):n?r(null,n,o):b(d,(function(e,n,o){if(e)r(e);else if(n)Re(u,n,i,(function(t,e){t?r(t):r(null,e,o)}));else{var s=new Error("Cannot find module '"+t+"' from '"+h+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}function v(t,e,n){var r=e,o=n;"function"==typeof r&&(o=r,r=void 0),function t(e,n,r){if(0===e.length)return o(null,void 0,r);var a=n+e[0],c=r;c?u(null,c):y(ce.dirname(a),u);function u(r,u,p){if(c=u,r)return o(r);if(p&&c&&i.pathFilter){var h=ce.relative(p,a),d=h.slice(0,h.length-e[0].length),g=i.pathFilter(c,n,d);if(g)return t([""].concat(f.slice()),ce.resolve(p,g),c)}s(a,l)}function l(r,i){return r?o(r):i?o(null,a,c):void t(e.slice(1),n,c)}}([""].concat(f),t,r)}function y(t,e){return""===t||"/"===t||"win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t)?e(null):void Re(u,t,i,(function(n,r){if(n)return y(ce.dirname(t),e);var o=ce.join(r,"package.json");s(o,(function(n,r){if(!r)return y(ce.dirname(t),e);c(o,(function(n,r){n&&e(n);try{var s=JSON.parse(r)}catch(t){}s&&i.packageFilter&&(s=i.packageFilter(s,o)),e(null,s,t)}))}))}))}function b(t,e,n){var r=n,o=e;"function"==typeof o&&(r=o,o=i.package),Re(u,t,i,(function(e,n){if(e)return r(e);var a=ce.join(n,"package.json");s(a,(function(e,n){return e?r(e):n?void c(a,(function(e,n){if(e)return r(e);try{var o=JSON.parse(n)}catch(t){}if(o&&i.packageFilter&&(o=i.packageFilter(o,a)),o&&o.main){if("string"!=typeof o.main){var s=new TypeError("package “"+o.name+"” `main` must be a string");return s.code="INVALID_PACKAGE_MAIN",r(s)}return"."!==o.main&&"./"!==o.main||(o.main="index"),void v(ce.resolve(t,o.main),o,(function(e,n,i){return e?r(e):n?r(null,n,i):i?void b(ce.resolve(t,i.main),i,(function(e,n,i){return e?r(e):n?r(null,n,i):void v(ce.join(t,"index"),i,r)})):v(ce.join(t,"index"),i,r)}))}v(ce.join(t,"/index"),o,r)})):v(ce.join(t,"index"),o,r)}))}))}function w(t,e){if(0===e.length)return t(null,void 0);var n=e[0];function r(e,r,s){return e?t(e):r?t(null,r,s):void b(n,i.package,o)}function o(n,r,i){return n?t(n):r?t(null,r,i):void w(t,e.slice(1))}a(ce.dirname(n),(function(o,s){if(o)return t(o);if(!s)return w(t,e.slice(1));v(n,i.package,r)}))}Re(u,g,i,(function(e,n){e?r(e):function(e){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t))d=ce.resolve(e,t),"."!==t&&".."!==t&&"/"!==t.slice(-1)||(d+="/"),/\/$/.test(t)&&d===e?b(d,i.package,m):v(d,i.package,m);else{if(Ee(t))return r(null,t);!function(t,e,n){var r=function(){return function(t,e,n){for(var r=ue(e,n,t),i=0;i<r.length;i++)r[i]=ce.join(r[i],t);return r}(t,e,i)};w(n,l?l(t,e,r,i):r())}(t,e,(function(e,n,o){if(e)r(e);else{if(n)return Re(u,n,i,(function(t,e){t?r(t):r(null,e,o)}));var s=new Error("Cannot find module '"+t+"' from '"+h+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}}(n)}))}).core=Ce,ie.isCore=Ee;var Be=o,ze=d,qe=Be.realpathSync&&"function"==typeof Be.realpathSync.native?Be.realpathSync.native:Be.realpathSync,He=function(t){try{var e=Be.statSync(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isFile()||e.isFIFO()},Ue=function(t){try{var e=Be.statSync(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isDirectory()},We=function(t){try{return qe(t)}catch(t){if("ENOENT"!==t.code)throw t}return t},Ve=function(t,e,n){return n&&!1===n.preserveSymlinks?t(e):e};async function $e(t,e){const{NODE_PATH:n}=process.env,r=e+".js",i=await async function(t,e){return new Promise(((n,r)=>Ge(t,e,((t,e)=>{t?r(t):n(e)}))))}("typescript/lib/"+r,{basedir:d.dirname(t),paths:void 0!==n?n.split(d.delimiter):void 0}).catch((async()=>{const e=await async function(t){const e=await async function(t){let e=t,n=d.dirname(e);for(;e!==n;){const t=await Qe(e,[[".atom-typescript.json"],[".atom","atom-typescript.json"],[".vscode","settings.json"]]);if(void 0!==t)return{basedir:e,configFile:t};e=n,n=d.dirname(e)}}(t);if(e)try{const t=se(await async function(t){return new Promise(((e,n)=>o.readFile(t,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))}(e.configFile));let r;if("object"==typeof(n=t)&&null!==n&&"string"==typeof n.tsdkPath)r=t.tsdkPath;else{if(!function(t){return"object"==typeof t&&null!==t&&"string"==typeof t["typescript.tsdk"]}(t))return;r=d.dirname(t["typescript.tsdk"])}return d.isAbsolute(r)?r:d.join(e.basedir,r)}catch(t){console.warn(t)}var n}(d.dirname(t));if(void 0!==e){const t=d.join(e,"lib",r);if(await Ke(t))return t}const n=atom.config.get("atom-typescript.tsdkPath");if(n){const t=d.join(n,"lib",r);if(await Ke(t))return t}return require.resolve("typescript/lib/"+r)})),s=d.resolve(i,"../../package.json");return{version:require(s).version,pathToBin:i}}ie.sync=function(t,e){if("string"!=typeof t)throw new TypeError("Path must be a string.");var n=ke(0,e),r=n.isFile||He,i=n.readFileSync||Be.readFileSync,o=n.isDirectory||Ue,s=n.realpathSync||We,a=n.packageIterator,c=n.extensions||[".js"],u=n.basedir||ze.dirname(oe()),l=n.filename||u;n.paths=n.paths||[];var f=Ve(s,ze.resolve(u),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t)){var p=ze.resolve(f,t);"."!==t&&".."!==t&&"/"!==t.slice(-1)||(p+="/");var h=m(p)||y(p);if(h)return Ve(s,h,n)}else{if(Ee(t))return t;var d=function(t,e){for(var r=function(){return function(t,e,n){for(var r=ue(e,n,t),i=0;i<r.length;i++)r[i]=ze.join(r[i],t);return r}(t,e,n)},i=a?a(t,e,r,n):r(),s=0;s<i.length;s++){var c=i[s];if(o(ze.dirname(c))){var u=m(c);if(u)return u;var l=y(c);if(l)return l}}}(t,f);if(d)return Ve(s,d,n)}var g=new Error("Cannot find module '"+t+"' from '"+l+"'");throw g.code="MODULE_NOT_FOUND",g;function m(t){var e=v(ze.dirname(t));if(e&&e.dir&&e.pkg&&n.pathFilter){var i=ze.relative(e.dir,t),o=n.pathFilter(e.pkg,t,i);o&&(t=ze.resolve(e.dir,o))}if(r(t))return t;for(var s=0;s<c.length;s++){var a=t+c[s];if(r(a))return a}}function v(t){if(""!==t&&"/"!==t&&!("win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t))){var e=ze.join(Ve(s,t,n),"package.json");if(!r(e))return v(ze.dirname(t));var o=i(e);try{var a=JSON.parse(o)}catch(t){}return a&&n.packageFilter&&(a=n.packageFilter(a,t)),{pkg:a,dir:t}}}function y(t){var e=ze.join(Ve(s,t,n),"/package.json");if(r(e)){try{var o=i(e,"UTF8"),a=JSON.parse(o)}catch(t){}if(a&&n.packageFilter&&(a=n.packageFilter(a,t)),a&&a.main){if("string"!=typeof a.main){var c=new TypeError("package “"+a.name+"” `main` must be a string");throw c.code="INVALID_PACKAGE_MAIN",c}"."!==a.main&&"./"!==a.main||(a.main="index");try{var u=m(ze.resolve(t,a.main));if(u)return u;var l=y(ze.resolve(t,a.main));if(l)return l}catch(t){}}}return m(ze.join(t,"/index"))}};var Ge=x(ie);async function Ke(t){return new Promise((e=>o.access(t,o.constants.F_OK,(t=>{e(!t)}))))}async function Qe(t,e){for(const n of e){const e=d.join(t,...n);if(await Ke(e))return e}}class Ze{constructor(t){this.reportBusyWhile=t,this.clients=new Map,this.memoizedClients=new Map,this.emitter=new b,this.subscriptions=new y,this.tsserverInstancePerTsconfig=atom.config.get("atom-typescript").tsserverInstancePerTsconfig,this.on=this.emitter.on.bind(this.emitter),this.diagnosticHandler=(t,e)=>n=>{const r=(i=n)&&i.triggerFile&&i.configFile?n.configFile:n.file;var i;r&&this.emitter.emit("diagnostics",{type:e,serverPath:t,filePath:r,diagnostics:n.diagnostics})}}async restartAllServers(){await this.reportBusyWhile("Restarting servers",(()=>Promise.all(Array.from(this.getAllClients()).map((t=>t.restartServer())))))}async get(t){const e=this.memoizedClients.get(t);if(e)return e;const n=this._get(t);this.memoizedClients.set(t,n);try{return await n}catch(e){throw this.memoizedClients.delete(t),e}}dispose(){this.emitter.dispose(),this.subscriptions.dispose(),this.memoizedClients.clear(),this.clients.clear()}async _get(t){const{pathToBin:e,version:n}=await $e(t,"tsserver"),r=this.tsserverInstancePerTsconfig?p.findConfigFile(t,(t=>p.sys.fileExists(t))):void 0;let i=this.clients.get(e);i||(i=new Map,this.clients.set(e,i));const o=i.get(r);if(o)return o;const s=new Zt(e,n,this.reportBusyWhile);return i.set(r,s),this.subscriptions.add(s.on("configFileDiag",this.diagnosticHandler(e,"configFileDiag")),s.on("semanticDiag",this.diagnosticHandler(e,"semanticDiag")),s.on("syntaxDiag",this.diagnosticHandler(e,"syntaxDiag")),s.on("suggestionDiag",this.diagnosticHandler(e,"suggestionDiag"))),s}*getAllClients(){for(const t of this.clients.values())yield*t.values()}}function Je(t){return{grammarScopes:Ct(),priority:100,async highlight(e,n){if(!Ot(e))return;const r=Pt(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("documentHighlights",Object.assign(Object.assign({},r),{filesToSearch:[r.file]}));return o.body?Array.from(function*(t,e){for(const n of e)n.file===t&&(yield*n.highlightSpans.map(vt))}(r.file,o.body)):void 0}}}async function Xe(t,e,n){if(void 0===t)return null;const r=e.dom("div",{className:"atom-typescript-datatip-tooltip-kind"},t.kind,function(t,e){return void 0===e?null:t.dom("span",{className:"atom-typescript-datatip-tooltip-kind-modifiers"},e)}(t.kindModifiers)),i=t.tags?t.tags.map((t=>{const n="atom-typescript-datatip-tooltip-doc-tag atom-typescript-datatip-tooltip-doc-tag-name-"+t.name;return e.dom("div",{className:n},e.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-name"},t.name),function(t,e){if(void 0===e)return null;const[,n,r]=/^\s*(\S*)([^]*)$/.exec(e);return t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text"},t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text-first-word"},n),r)}(e,t.text))})):null,o=e.dom("div",{className:"atom-typescript-datatip-tooltip-doc"},t.documentation,i),s=t.displayString.replace(/^\(.+?\)\s+/,"");return[await n(s),r,o]}const Ye=Symbol.for("react.element"),tn={dom:(t,e,...n)=>n.length>0?{$$typeof:Ye,type:t,ref:null,props:Object.assign(Object.assign({},e),{children:n})}:{$$typeof:Ye,type:t,ref:null,props:Object.assign({},e)}};class en{constructor(t){this.getClient=t,this.providerName="TypeScript type tooltips",this.priority=100,this.grammarScopes=Ct()}async datatip(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("quickinfo",{file:n,line:e.row+1,offset:e.column+1})).body,o=await Xe(i,tn,nn);return{component:()=>tn.dom("div",{className:"atom-typescript-datatip-tooltip"},o),range:v.Range.fromObject([mt(i.start),mt(i.end)])}}catch(t){return}}}async function nn(t){const e=atom.config.get("editor.fontFamily"),n=await At(t.replace(/\r?\n$/,""),"source.ts");return tn.dom("div",{style:{fontFamily:e},className:"atom-typescript-datatip-tooltip-code",dangerouslySetInnerHTML:{__html:n.join("\n")}})}function rn(t){const e=vt(t);return{path:t.file,position:e.start,range:e,language:"TypeScript"}}function on(t){return{uri:t.file,range:yt(t.start,t.end),name:void 0}}class sn{constructor(t){this.props=t,P.initialize(this)}async update(t){return this.props=Object.assign(Object.assign({},this.props),t),P.update(this)}render(){const t={fontFamily:atom.config.get("editor.fontFamily")};return P.dom("div",{className:"editor editor-colors",style:t,innerHTML:this.props.highlightedText})}}var an,cn,un,ln={},fn=!1;function pn(){return fn||(fn=!0,function(){var t,e;t=d.sep,an=function(e,n,r){var i,o,s,a,c;for(o=e.length-1;e[o]===t;)o--;for(c=0,s=o,i=null;o>=0;)e[o]===t?(c++,null==i&&(i=e.substring(o+1,s+1))):0===o&&(s<e.length-1?null==i&&(i=e.substring(0,s+1)):null==i&&(i=e)),o--;return i===e?r*=2:i&&(r+=cn(i,n)),a=c+1,r*(.01*Math.max(1,10-a))},un.basenameScore=an,cn=function(n,r){var i,o,s,a,c,u,l,f,p,h,d,g;if(n===r)return 1;if(e(n,r))return 1;for(h=0,l=r.length,p=n.length,s=0,a=0;s<l;){if(i=r[s++],c=n.indexOf(i.toLowerCase()),d=n.indexOf(i.toUpperCase()),-1===(u=Math.min(c,d))&&(u=Math.max(c,d)),-1===(a=u))return 0;o=.1,n[a]===i&&(o+=.1),0===a||n[a-1]===t?o+=.8:"-"!==(g=n[a-1])&&"_"!==g&&" "!==g||(o+=.7),n=n.substring(a+1,p),h+=o}return((f=h/l)*(l/p)+f)/2},un.score=cn,e=function(e,n){if(e[e.length-n.length-1]===t)return e.lastIndexOf(n)===e.length-n.length}}.call(un={})),un}var hn,dn=!1;function gn(){return dn||(dn=!0,function(){var t,e,n;e=pn(),t=function(t){return t.candidate},n=function(t,e){return e.score-t.score},hn=function(r,i,o,s){var a,c,u,l,f,p,h,d,g;if(c=(g=null!=s?s:{}).key,u=g.maxResults,i){for(f=[],h=0,d=r.length;h<d;h++)a=r[h],(p=null!=c?a[c]:a)&&(l=e.score(p,i,o),o||(l=e.basenameScore(p,i,l)),l>0&&f.push({candidate:a,score:l}));f.sort(n),r=f.map(t)}return null!=u&&(r=r.slice(0,u)),r}}.call(hn={})),hn}var mn,vn,yn,bn=!1;function wn(){return bn||(bn=!0,function(){var t;t=d.sep,mn=function(e,n){var r,i,o;for(i=e.length-1;e[i]===t;)i--;for(o=i,r=null;i>=0;)e[i]===t?null==r&&(r=e.substring(i+1,o+1)):0===i&&(o<e.length-1?null==r&&(r=e.substring(0,o+1)):null==r&&(r=e)),i--;return vn(r,n,e.length-r.length)},yn.basenameMatch=mn,vn=function(t,e,n){var r,i,o,s,a,c,u,l,f,p;if(null==n&&(n=0),t===e)return function(){p=[];for(var e=n,r=n+t.length;n<=r?e<r:e>r;n<=r?e++:e--)p.push(e);return p}.apply(this);for(u=e.length,l=t.length,i=0,o=0,a=[];i<u;){if(r=e[i++],s=t.indexOf(r.toLowerCase()),f=t.indexOf(r.toUpperCase()),-1===(c=Math.min(s,f))&&(c=Math.max(s,f)),-1===(o=c))return[];a.push(n+o),n+=o+1,t=t.substring(o+1,l)}return a},yn.match=vn}.call(yn={})),yn}(function(){var t,e,n,r,i;i=pn(),n=gn(),r=wn(),t=d.sep,e=/\ /g,ln={filter:function(r,i,o){var s;return i&&(s=-1!==i.indexOf(t),i=i.replace(e,"")),n(r,i,s,o)},score:function(n,r){var o,s;return n&&r?n===r?2:(o=-1!==r.indexOf(t),r=r.replace(e,""),s=i.score(n,r),o||(s=i.basenameScore(n,r,s)),s):0},match:function(n,i){var o,s,a,c,u,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var t=0,e=n.length;0<=e?t<e:t>e;0<=e?t++:t--)l.push(t);return l}.apply(this);if(c=-1!==i.indexOf(t),i=i.replace(e,""),a=r.match(n,i),!c)for(o=r.basenameMatch(n,i),a=a.concat(o).sort((function(t,e){return t-e})),u=null,s=0;s<a.length;)s&&u===a[s]?a.splice(s,1):(u=a[s],s++);return a}}}).call(ln);class _n{constructor(t){this.props=t,this.matches=this.match(this.props),P.initialize(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),this.matches=this.match(this.props),await P.update(this)}async destroy(){await P.destroy(this)}render(){return P.dom("span",null,this.matches.map((t=>P.dom("span",{className:t.type},t.text))))}match(t){return t.query?function(t,e){let n=0,r=[];const i=[],o=ln.match(t,e);let s;for(s of o){if(s<0)continue;const e=t.substring(n,s);e&&(r.length>0&&i.push({text:r.join(""),type:"character-match"}),r=[],i.push({text:e})),r.push(t[s]),n=s+1}r.length>0&&i.push({text:r.join(""),type:"character-match"});return i.push({text:t.substring(n)}),i}(t.label,t.query):[{text:t.label}]}}var xn;const{Disposable:Sn,CompositeDisposable:kn,TextEditor:En}=v;var Cn,On,Tn={};On={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var Pn={};function An(t,e,...n){for(let t=0;t<n.length;){const e=n[t];switch(typeof e){case"string":case"number":n[t]={text:e},t++;break;case"object":Array.isArray(e)?n.splice(t,1,...e):e?t++:n.splice(t,1);break;default:throw new Error("Invalid child node: "+e)}}if(e){for(const t in e){const n=On[t];n&&(e.on||(e.on={}),e.on[n]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:n}}Pn=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);const jn=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of jn)An[t]=(e,...n)=>An(t,e,...n);for(const t of Pn)An[t]=(e,...n)=>An(t,e,...n);Cn=An;var In,Nn={},Dn={};Dn=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);function Ln(t,e,n,r,i){if(n)for(var o in n)"ref"!==o&&"on"!==o&&(o in On||i&&o in i||("dataset"===o?Ln(t.dataset,null,n&&n.dataset,null,null):"innerHTML"!==o&&e&&Pn.has(e.tag)?t.removeAttribute(Dn.get(o)||o):(t[o]="",delete t[o])));if(i)for(var o in i)if("ref"!==o&&"on"!==o&&!(o in On)){var s=n&&n[o],a=i[o];"dataset"===o?Fn(t.dataset,s,a,!1):"style"===o&&"string"!=typeof a?("string"==typeof s&&(t.style="",s=null),Fn(t.style,s,a,!0)):"attributes"===o?Mn(t,s,a):a!==s&&("innerHTML"!==o&&r&&Pn.has(r.tag)?t.setAttribute(Dn.get(o)||o,a):r&&"input"===r.tag&&"value"===o&&t[o]===a||(t[o]=a))}}function Fn(t,e,n,r){if(e)for(var i in e)n&&i in n||(r?t[i]="":delete t[i]);if(n)for(var i in n){const r=e&&e[i],o=n[i];o!==r&&(t[i]=o)}}function Mn(t,e,n){if(e)for(var r in e)n&&r in n||t.removeAttribute(r);if(n)for(var r in n){const i=e&&e[r],o=n[r];o!==i&&t.setAttribute(r,o)}}function Rn(t,e){let n;if(null!=t.text)n=document.createTextNode(t.text);else{const{tag:r,children:i}=t;let{props:o}=t;if("function"==typeof r){let s;o&&o.ref&&(s=o.ref);const a=new r(o||{},i);t.component=a,n=a.element,e&&e.refs&&s&&(e.refs[s]=a)}else Pn.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&Bn(n,i,e),o&&In(n,null,t,e)):(n=document.createElement(r),i&&Bn(n,i,e),o&&In(n,null,t,e))}return t.domNode=n,n}function Bn(t,e,n){for(let r=0;r<e.length;r++)t.appendChild(Rn(e[r],n))}In=function(t,e,n,r){const i=e&&e.props,o=n.props;let s,a;r&&(s=r.refs,a=r.listenerContext),Ln(t,e,i,n,o),s&&function(t,e,n,r){n!==e&&(e&&r[e]===t&&delete r[e],n&&(r[n]=t))}(t,i&&i.ref,o&&o.ref,s),function(t,e,n,r){const i=e&&e.props&&e.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=e&&e.boundListeners&&e.boundListeners[n]?e.boundListeners[n]:i[n],t.removeEventListener(n,r)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let n;n=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,n)}if(c){let e;r?(e=c.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,n,a)},Nn=Rn;var zn,qn={};function Hn(t,e,n){const r=t.domNode;if(e===t)return r;if(Vn(t,e)){let i;return null!=e.text?(r.nodeValue=e.text,i=r):"function"==typeof e.tag?i=function(t,e,n){const{component:r,props:i}=t;let{props:o,children:s}=e;if(e.component=r,n&&n.refs){const t=n.refs,e=i&&i.ref,s=o&&o.ref;s!==e&&(e&&t[e]===r&&delete t[e],s&&(t[s]=r))}return r.update(o||{},s),r.element}(t,e,n):(!function(t,e,n,r){var i,o=0,s=e.length-1,a=e[0],c=e[s],u=0,l=n.length-1,f=n[0],p=n[l];for(;o<=s&&u<=l;)if(a)if(c)if(Vn(a,f))Hn(a,f,r),a=e[++o],f=n[++u];else if(Vn(c,p))Hn(c,p,r),c=e[--s],p=n[--l];else if(Vn(a,p))Hn(a,p,r),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],p=n[--l];else if(Vn(c,f))Hn(c,f,r),t.insertBefore(c.domNode,a.domNode),c=e[--s],f=n[++u];else{i||(Un.length>0?(i=Un.pop()).clear():i=new Map,Gn(i,e,o,s));var h=$n(f),d=h?i.get(h):null;if(null==d)t.insertBefore(Nn(f,r),a.domNode),f=n[++u];else{var g=e[d];Hn(g,f,r),e[d]=void 0,t.insertBefore(g.domNode,a.domNode),f=n[++u]}}else c=e[--s];else a=e[++o];if(o>s){var m=n[l+1]?n[l+1].domNode:null;for(let e=u;e<=l;e++)t.insertBefore(Nn(n[e],r),m)}else if(u>l)for(let t=o;t<=s;t++){var v=e[t];v&&Wn(v,r&&r.refs)}i&&Un.push(i)}(r,t.children,e.children,n),In(r,t,e,n),i=r),e.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;Wn(t,n&&n.refs);const s=Nn(e,n);return i&&i.insertBefore(s,o),e.domNode=s,s}}let Un=[new Map,new Map,new Map,new Map];function Wn(t,e,n=!0){const{domNode:r,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if(e&&a&&e[a]===r&&delete e[a],o)for(let t=0;t<o.length;t++)Wn(o[t],e,!1);n&&r.remove()}function Vn(t,e){return $n(t)===$n(e)&&t.tag===e.tag}function $n(t){return t.props?t.props.key:void 0}function Gn(t,e,n,r){for(let i=n;i<=r;i++){const n=$n(e[i]);n&&t.set(n,i)}return t}qn=Hn;var Kn;Kn=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise((t=>{this.resolveNextUpdatePromise=t}))),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}};let Qn=null;var Zn=function(){return Qn||(Qn=new Kn),Qn};const Jn=new WeakSet;let Xn=0,Yn=0;function tr(t){return null!=t&&!1!==t}function er(t,e=!0){if(!tr(t.virtualNode))throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==t.element)throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a DOM element. Perhaps this component was never initialized?");let n=t.render();if(!tr(n)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+e)}Xn++;let r=t.virtualNode,i=t.element,o=qn(r,n,{refs:t.refs,listenerContext:t});if(t.virtualNode=n,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&Zn().readDocument((function(){t.readAfterUpdate()})),Xn--}function nr(t,e=!0){Yn++,rr(t.virtualNode),1===Yn&&e&&t.element.remove(),Yn--}function rr(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach(rr)}zn={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!tr(e)){let n=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+n)}t.refs={},t.virtualNode=e,t.element=Nn(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(Xn>0)return er(t,e),Promise.resolve();let n=Zn();return Jn.has(t)||(Jn.add(t),n.updateDocument((function(){Jn.delete(t),er(t,e)}))),n.getNextUpdatePromise()},updateSync:er,destroy:function(t,e=!0){if(Xn>0||Yn>0)return nr(t,e),Promise.resolve();let n=Zn();return n.updateDocument((function(){nr(t,e)})),n.getNextUpdatePromise()},destroySync:nr};const{initialize:ir,update:or,updateSync:sr,destroy:ar,destroySync:cr}=zn,ur=(Tn={dom:Cn,render:Nn,initialize:ir,update:or,updateSync:sr,destroy:ar,destroySync:cr,setScheduler:function(t){Qn=t},getScheduler:Zn}).dom;xn=class{static setScheduler(t){Tn.setScheduler(t)}static getScheduler(t){return Tn.getScheduler()}constructor(t){this.props=t,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),t.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new kn,Tn.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),t.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const e=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);e.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",(t=>{t.target===this.refs.items&&(this.didClickItemsList=!0)})),this.disposables.add(new Sn((()=>{e.removeEventListener("blur",n)})))}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver((t=>{for(const e of t)if(e.intersectionRatio>0){const t=e.target;this.visibilityObserver.unobserve(t);const n=Array.from(this.refs.items.children).indexOf(t);n>=0&&this.renderItemAtIndex(n)}}))}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(t){this.didClickItemsList||this.element.contains(t.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),Tn.destroy(this)}registerAtomCommands(){return O.atom.commands.add(this.element,{"core:move-up":t=>{this.selectPrevious(),t.stopPropagation()},"core:move-down":t=>{this.selectNext(),t.stopPropagation()},"core:move-to-top":t=>{this.selectFirst(),t.stopPropagation()},"core:move-to-bottom":t=>{this.selectLast(),t.stopPropagation()},"core:confirm":t=>{this.confirmSelection(),t.stopPropagation()},"core:cancel":t=>{this.cancelSelection(),t.stopPropagation()}})}update(t={}){let e=!1;return t.hasOwnProperty("items")&&(this.props.items=t.items,e=!0),t.hasOwnProperty("maxResults")&&(this.props.maxResults=t.maxResults,e=!0),t.hasOwnProperty("filter")&&(this.props.filter=t.filter,e=!0),t.hasOwnProperty("filterQuery")&&(this.props.filterQuery=t.filterQuery,e=!0),t.hasOwnProperty("query")&&(this.refs.queryEditor.setText(t.query),e=!1),t.hasOwnProperty("selectQuery")&&(t.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),t.hasOwnProperty("order")&&(this.props.order=t.order),t.hasOwnProperty("emptyMessage")&&(this.props.emptyMessage=t.emptyMessage),t.hasOwnProperty("errorMessage")&&(this.props.errorMessage=t.errorMessage),t.hasOwnProperty("infoMessage")&&(this.props.infoMessage=t.infoMessage),t.hasOwnProperty("loadingMessage")&&(this.props.loadingMessage=t.loadingMessage),t.hasOwnProperty("loadingBadge")&&(this.props.loadingBadge=t.loadingBadge),t.hasOwnProperty("itemsClassList")&&(this.props.itemsClassList=t.itemsClassList),t.hasOwnProperty("initialSelectionIndex")&&(this.props.initialSelectionIndex=t.initialSelectionIndex),e&&this.computeItems(),Tn.update(this)}render(){return ur.div({},ur(En,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const t=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&Tn.getScheduler().updateDocument((()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach((t=>{this.visibilityObserver.observe(t)}))})),this.listItems=this.items.map(((t,e)=>{const n=this.getSelectedItem()===t,r=!this.props.initiallyVisibleItemCount||e<this.props.initiallyVisibleItemCount;return ur(lr,{element:this.props.elementForItem(t,{selected:n,index:e,visible:r}),selected:n,onclick:()=>this.didClickItem(e)})})),ur.ol({className:t,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?ur.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?ur.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?ur.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?ur.div({className:"loading"},ur.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?ur.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(t){this.selectIndex(t),this.confirmSelection()}computeItems(t){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const e=this.props.filter||this.fuzzyFilter.bind(this);this.items=e(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,t)}fuzzyFilter(t,e){if(0===e.length)return t;{const n=[];for(const r of t){const t=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r;let i=ln.score(t,e);i>0&&n.push({item:r,score:i})}return n.sort(((t,e)=>e.score-t.score)),n.map((t=>t.item))}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(t){const e=this.items[t],n=this.getSelectedItem()===e,r=this.listItems[t].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(e,{selected:n,index:t,visible:!0}),selected:n,onclick:()=>this.didClickItem(t)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(t,e=!0){t>=this.items.length?t=0:t<0&&(t=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=t,void 0!==t&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),e?this.listItems?(n>=0&&this.renderItemAtIndex(n),t>=0&&this.renderItemAtIndex(t),Tn.getScheduler().getNextUpdatePromise()):Tn.update(this):Promise.resolve()}selectItem(t){const e=this.items.indexOf(t);if(-1===e)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(e)}confirmSelection(){const t=this.getSelectedItem();null!=t?this.props.didConfirmSelection&&this.props.didConfirmSelection(t):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class lr{constructor(t){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=t.selected,this.onclick=t.onclick,this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new Sn((()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)})),Tn.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(t){t.preventDefault()}mouseUp(t){t.preventDefault()}didClick(t){t.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(t){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(t.element,this.element),this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),t.selected&&this.element.classList.add("selected"),this.selected=t.selected,this.onclick=t.onclick,Tn.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var fr=x(xn);async function pr({items:t,itemTemplate:e,itemFilterKey:n,didChangeSelection:r}){let i;const o=document.activeElement;try{return await new Promise((o=>{let s,a,c="Loading...",u=!1;const l=t=>{u||pt(f.update(t))};"function"==typeof t&&(s=async e=>{const n=setTimeout((()=>l({loadingMessage:"Loading..."})),300),r=await t(e);clearTimeout(n),l({items:r,emptyMessage:"Nothing matches the search value",loadingMessage:void 0})},c=void 0,a="Please enter a search value");const f=new fr({items:[],elementForItem:t=>P.render(e(t,f)),filterKeyForItem:t=>""+t[n],didChangeSelection:r,didCancelSelection:()=>{u=!0,o()},didConfirmSelection:t=>{u=!0,o(t)},loadingMessage:c,didChangeQuery:s,emptyMessage:a,itemsClassList:["atom-typescript"]});"function"!=typeof t&&pt(Promise.resolve(t).then((t=>{l({items:t,loadingMessage:void 0})}))),i=atom.workspace.addModalPanel({item:f,visible:!0}),f.focus()}))}finally{i&&i.destroy(),o&&o.focus()}}const hr=[];function dr(t,e,n){hr.push({selector:t,command:e,desc:n})}async function gr(t,e,n){const r=Promise.all(t.body.refs.map((async t=>{var e;const n=(await new Promise(((e,n)=>o.readFile(t.file,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))).split(/\r?\n/g),r=void 0!==t.contextStart&&void 0!==t.contextEnd?n.slice(t.contextStart.line-1,t.contextEnd.line):n,i=(await At(r.join("\n"),"source.tsx"))[t.start.line-((null===(e=t.contextStart)||void 0===e?void 0:e.line)||1)];return Object.assign(Object.assign({},t),{hlText:i})}))),i=await pr({items:r,itemTemplate:(t,e)=>P.dom("li",null,P.dom(_n,{label:atom.project.relativize(t.file),query:e.getFilterQuery()}),P.dom("div",{className:"pull-right"},"line: ",t.start.line),P.dom(sn,{highlightedText:t.hlText})),itemFilterKey:"file"});i&&await n(e,i)}async function mr(t,e,n){if(t.body)if(t.body.length>1){const r=await pr({items:t.body,itemTemplate:(t,e)=>P.dom("li",null,P.dom(_n,{label:t.file,query:e.getFilterQuery()}),P.dom("div",{className:"pull-right"},"line: ",t.start.line)),itemFilterKey:"file"});r&&await n(e,r)}else t.body.length>0&&await n(e,t.body[0])}function vr(t){const e=t.spans.map(vt).reduce(((t,e)=>e.union(t)));return{kind:br[t.kind],plainText:t.text,startPosition:e.start,endPosition:e.end,landingPosition:t.nameSpan?vt(t.nameSpan).start:void 0,children:t.childItems?t.childItems.map(vr).sort(yr):[]}}function yr(t,e){const n=t.landingPosition?t.landingPosition:t.startPosition,r=e.landingPosition?e.landingPosition:e.startPosition;return n.compare(r)}dr("atom-text-editor","typescript:find-references",(t=>({description:"Find where symbol under text cursor is referenced",async didDispatch(e){const n=Pt(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("references",n);await gr(i,e,t.histGoForward)}}))),dr("atom-text-editor","typescript:go-to-declaration",(t=>({description:"Go to declaration of symbol under text cursor",async didDispatch(e){const n=Pt(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("definition",n);await mr(i,e,t.histGoForward)}})));const br={directory:"file",module:"module","external module name":"module",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"field",constructor:"constructor",enum:"enum",interface:"interface",type:"interface",function:"function","local function":"function",label:"variable",alias:"variable",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"string","":void 0,warning:void 0,keyword:void 0,script:void 0,call:void 0,index:void 0,construct:void 0,"type parameter":void 0,"primitive type":void 0};class wr{constructor(t){this.getClient=t,this.triggerCharacters=new Set([]),this.grammarScopes=Ct(),this.priority=100,this.disposables=new y;const e=new Set(["<","(",","]),n=new Set([]);this.disposables.add(atom.config.observe("atom-typescript.sigHelpDisplayOnChange",(t=>{this.triggerCharacters=t?e:n})))}dispose(){this.disposables.dispose()}async getSignatureHelp(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("signatureHelp",{file:n,line:e.row+1,offset:e.column+1})).body;return{signatures:i.items.map(_t),activeParameter:i.argumentIndex,activeSignature:i.selectedItemIndex}}catch(t){return}}}class _r{constructor(t){this.getClient=t,this.selector=Ct().map((t=>t.includes(".")?"."+t:t)).join(", "),this.disableForSelector=".comment",this.inclusionPriority=3,this.suggestionPriority=atom.config.get("atom-typescript").autocompletionSuggestionPriority,this.excludeLowerPriority=!1}async getSuggestions(t){const e=function(t){const e=t.editor.getPath();if(void 0===e)return;return{file:e,line:t.bufferPosition.row+1,offset:t.bufferPosition.column+1}}(t),n=function(t){const e=t.editor.getBuffer().getTextInRange([[t.bufferPosition.row,0],t.bufferPosition]).match(xr);return e?e[0]:""}(t);if(!e)return[];if(!n&&!t.activatedManually){if("."!==function(t,e){let n;const r=new v.Range([0,0],e);return t.backwardsScanInRange(/\S/,r,(({matchText:t,stop:e})=>{n=t,e()})),n}(t.editor.getBuffer(),t.bufferPosition))return[]}if(kr(t.scopeDescriptor.getScopesArray(),"string.template.")&&!kr(t.scopeDescriptor.getScopesArray(),"template.expression."))return[];try{let r=await this.getSuggestionsWithCache(n,e,t.activatedManually);return r=ln.filter(r,n,{key:"displayText"}),pt(this.getAdditionalDetails(r.slice(0,10),e)),r.map((r=>Object.assign({replacementPrefix:r.replacementRange?t.editor.getTextInBufferRange(r.replacementRange):n,location:e},function(t,e){return atom.config.get("atom-typescript.autocompleteParens")&&["function","method"].includes(e.leftLabel)&&!function(t){const e=t.editor.getBuffer(),n=t.bufferPosition;return!!e.getTextInRange([n,[n.row,e.lineLengthForRow(n.row)]]).match(/\s*\(/)}(t)?Object.assign(Object.assign({},e),{snippet:e.text+"($1)",text:void 0}):e}(t,r))))}catch(t){return[]}}async getSuggestionDetailsOnSelect(t){return"location"in t?(await this.getAdditionalDetails([t],t.location),t):null}async getAdditionalDetails(t,e){if(this.lastSuggestions&&t.some((t=>!t.details))){(await this.lastSuggestions.client.execute("completionEntryDetails",Object.assign({entryNames:t.map((t=>t.displayText))},e))).body.forEach(((e,n)=>{const r=t[n];r.details=e;let i=e.displayParts;i.length>=3&&"("===i[0].text&&i[1].text===r.leftLabel&&")"===i[2].text&&(i=i.slice(3)),r.rightLabel=i.map((t=>t.text)).join(""),r.description=e.documentation&&e.documentation.map((t=>t.text)).join(" ")}))}}async getSuggestionsWithCache(t,e,n){if(this.lastSuggestions&&!n){const n=this.lastSuggestions.location,r=Sr(this.lastSuggestions.prefix,n.offset),i=Sr(t,e.offset);if(n.file===e.file&&n.line===e.line&&r===i&&0!==this.lastSuggestions.suggestions.length)return this.lastSuggestions.suggestions}const r=await this.getClient(e.file),i=await async function(t,e,n){var r;if(parseInt(t.version.split(".")[0],10)>=3){const i=await t.execute("completionInfo",Object.assign({prefix:n,includeExternalModuleExports:!1,includeInsertTextCompletions:!0},e));return i.body.entries.map(Er.bind(null,null===(r=i.body)||void 0===r?void 0:r.isMemberCompletion,e))}return(await t.execute("completions",Object.assign({prefix:n,includeExternalModuleExports:!1,includeInsertTextCompletions:!0},e))).body.map(Er.bind(null,void 0,e))}(r,e,t);return this.lastSuggestions={client:r,location:e,prefix:t,suggestions:i},i}}const xr=/(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}])(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}\u200C\u200D\p{Mn}\p{Mc}\p{Nd}\p{Pc}])*$/u;function Sr(t,e){return e-("."===t?0:t.length)}function kr(t,e){for(const n of t)if(n.includes(e))return!0;return!1}function Er(t,e,n){return{displayText:n.name,text:void 0!==n.insertText?n.insertText:n.name,leftLabel:n.kind,replacementRange:n.replacementSpan?vt(n.replacementSpan):void 0,type:Cr[n.kind],isMemberCompletion:t,location:e}}const Cr={directory:"require",module:"import","external module name":"import",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"property",constructor:"method",enum:"type",interface:"type",type:"type","type parameter":"type","primitive type":"type",function:"function","local function":"function",label:"variable",alias:"import",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"value",keyword:"keyword","":void 0,warning:void 0,script:void 0,call:void 0,index:void 0,construct:void 0};class Or{constructor(t,e,n){this.clientResolver=t,this.errorPusher=e,this.applyEdits=n,this.supportedFixes=new WeakMap}async getFixableRanges(t,e){const n=t.getPath();if(void 0===n)return[];const r=this.errorPusher.getErrorsInRange(n,e),i=await this.clientResolver.get(n),o=await this.getSupportedFixes(i);return Array.from(r).filter((t=>void 0!==t.code&&o.has(t.code))).map((t=>vt(t)))}async runCodeFix(t,e){const n=t.getPath();if(void 0===n)return[];const r=await this.clientResolver.get(n),i=await this.getSupportedFixes(r),o=Array.from(this.errorPusher.getErrorsAt(n,e)).filter((t=>void 0!==t.code&&i.has(t.code))).map((t=>r.execute("getCodeFixes",{file:n,startLine:t.start.line,startOffset:t.start.offset,endLine:t.end.line,endOffset:t.end.offset,errorCodes:[t.code]}))),s=await Promise.all(o),a=[];for(const t of s)if(t.body)for(const e of t.body)a.push(e);return a}async applyFix(t){return this.applyEdits(t.changes)}dispose(){}async getSupportedFixes(t){let e=this.supportedFixes.get(t);if(e)return e;const n=await t.execute("getSupportedCodeFixes");if(!n.body)throw new Error("No code fixes are supported");return e=new Set(n.body.map((t=>parseInt(t,10)))),this.supportedFixes.set(t,e),e}}async function Tr(t,e){let n;try{return await new Promise(((r,i)=>{try{const o=new w({command:t,args:["--init"],options:{cwd:e},exit:t=>{0===t?r():i(new Error("Tsc ended with nonzero exit code "+t))}});n=o.onWillThrowError(i)}catch(t){i(t)}}))}finally{n&&n.dispose()}}dr("atom-text-editor","typescript:build",(t=>({description:"Compile all files in project related to current active text editor",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);t.reportBuildStatus(void 0);const i=await r.execute("projectInfo",{file:n,needFileNameList:!0}),o=new Set(i.body.fileNames);o.delete(i.body.configFileName);let s=0;const a=[...o.values()].map((e=>{return n=r.execute("compileOnSaveEmitFile",{file:e,forced:!0}),i=()=>{s+=1,t.reportProgress({max:o.size,value:s})},n.then(i,i),n;var n,i}));try{if((await Promise.all(a)).some((t=>!1===t.body)))throw new Error("Emit failed");t.reportBuildStatus({success:!0})}catch(e){const n=e;console.error(n),t.reportBuildStatus({success:!1,message:n.message})}}}))),dr("atom-text-editor","typescript:check-all-files",(t=>({description:"Typecheck all files in project related to current active text editor",async didDispatch(e){var n;const r=e.getPath();if(void 0===r)return;const i=await t.getClient(r),o=await i.execute("projectInfo",{file:r,needFileNameList:!0}),s=new Set(null===(n=o.body.fileNames)||void 0===n?void 0:n.filter((t=>!t.endsWith("tsconfig.json")&&!t.includes(`${d.sep}node_modules${d.sep}`)))),a=s.size;if(i.multistepSupported){const e=i.on("syntaxDiag",(e=>{"file"in e&&s.delete(e.file),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0}),e.dispose()}else{let e;const n=i.on("syntaxDiag",(r=>{void 0!==e&&window.clearTimeout(e),e=window.setTimeout((()=>{s.clear(),n.dispose(),t.reportProgress({max:a,value:a})}),2e3),"file"in r&&s.delete(r.file),0===s.size&&(n.dispose(),window.clearTimeout(e)),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0})}}}))),dr("atom-workspace","typescript:clear-errors",(t=>({description:"Clear error messages",didDispatch(){t.clearErrors()}}))),dr("atom-text-editor","typescript:format-code",(t=>({description:"Format code in currently active text editor",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=[];for(const t of e.getSelectedBufferRanges())t.isEmpty()||r.push({line:(i=t).start.row+1,offset:i.start.column+1,endLine:i.end.row+1,endOffset:i.end.column+1});var i;if(0===r.length){const t=e.getBuffer().getEndPosition();r.push({line:1,offset:1,endLine:t.row+1,endOffset:t.column+1})}const o=await t.getClient(n),s=[];for(const t of r){const e=await o.execute("format",Object.assign(Object.assign({},t),{file:n}));e.body&&s.push(...e.body)}s.length>0&&e.transact((()=>{!function(t,e){for(let n=e.length-1;n>=0;n--)t.setTextInBufferRange(vt(e[n]),e[n].newText)}(e,s)}))}}))),dr("atom-text-editor","typescript:initialize-config",(()=>({description:"Create tsconfig.json in the project related to currently-active text edtior",async didDispatch(t,e){const n=atom.project.getDirectories();if(0===n.length)return e();const r=t.getPath();if(void 0===r)return;const i=(await $e(r,"tsc")).pathToBin;for(const t of n)t.contains(r)&&(await Tr(i,t.getPath()),atom.notifications.addSuccess("Successfully created tsconfig.json in "+t.getPath()))}}))),dr("atom-text-editor","typescript:organize-imports",(t=>({description:"Organize module imports",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n),i=await r.execute("organizeImports",{scope:{type:"file",args:{file:n}}});i.body.length>0&&await t.applyEdits(i.body)}}))),dr("atom-text-editor","typescript:refactor-selection",(t=>({description:"Get a list of applicable refactors to selected code",async didDispatch(e){const n=Pt(e);if(!n)return;const r=e.getSelectedBufferRange(),i=await t.getClient(n.file),o=r.isEmpty()?n:{file:n.file,startLine:r.start.row+1,startOffset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1},s=await async function(t,e){const n=await async function(t,e){try{return await t.execute("getApplicableRefactors",e)}catch(t){return}}(t,e);if(!n)return[];if(void 0===n.body||0===n.body.length)return[];const r=[];for(const t of n.body)for(const e of t.actions)r.push({refactorName:t.name,refactorDescription:t.description,actionName:e.name,actionDescription:e.description,inlineable:void 0===t.inlineable||t.inlineable});return r}(i,o);if(0===s.length)return void atom.notifications.addInfo("AtomTS: No applicable refactors for the selection");const a=await pr({items:s,itemTemplate:(t,e)=>P.dom("li",null,P.dom(_n,{label:`${t.refactorDescription}: ${t.actionDescription}`,query:e.getFilterQuery()})),itemFilterKey:"actionDescription"});void 0!==a&&await async function(t,e,n,r){const i=await n.execute("getEditsForRefactor",Object.assign(Object.assign({},e),{refactor:t.refactorName,action:t.actionName}));if(void 0===i.body)return;const{edits:o,renameFilename:s,renameLocation:a}=i.body;if(await r.applyEdits(o),void 0===s||void 0===a)return;const c=await atom.workspace.open(s,{searchAllPanes:!0,initialLine:a.line-1,initialColumn:a.offset-1});await atom.commands.dispatch(atom.views.getView(c),"typescript:rename-refactor")}(a,o,i,t)}}))),dr("atom-text-editor","typescript:reload-projects",(t=>({description:"Reload projects",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);await r.execute("reloadProjects")}})));var Pr,Ar,jr={},Ir=!1;function Nr(){return Ir||(Ir=!0,Pr={},function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof O&&O.global===O&&O||this||{},e=t._,n=Array.prototype,r=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,o=n.push,s=n.slice,a=r.toString,c=r.hasOwnProperty,u=Array.isArray,l=Object.keys,f=Object.create,p=function(){},h=function(t){return t instanceof h?t:this instanceof h?void(this._wrapped=t):new h(t)};void 0===Pr||Pr.nodeType?t._=h:(!module.nodeType&&Pr&&(Pr=h),Ar=h,Pr._=Ar),h.VERSION="1.9.1";var d,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},m=function(t,e,n){return h.iteratee!==d?h.iteratee(t,e):null==t?h.identity:h.isFunction(t)?g(t,e,n):h.isObject(t)&&!h.isArray(t)?h.matcher(t):h.property(t)};h.iteratee=d=function(t,e){return m(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},y=function(t){if(!h.isObject(t))return{};if(f)return f(t);p.prototype=t;var e=new p;return p.prototype=null,e},b=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&c.call(t,e)},_=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},x=Math.pow(2,53)-1,S=b("length"),k=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=x};h.each=h.forEach=function(t,e,n){var r,i;if(e=g(e,n),k(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=h.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},h.map=h.collect=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o};var E=function(t){var e=function(e,n,r,i){var o=!k(e)&&h.keys(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;r=n(r,e[c],c,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,g(n,i,4),r,o)}};h.reduce=h.foldl=h.inject=E(1),h.reduceRight=h.foldr=E(-1),h.find=h.detect=function(t,e,n){var r=(k(t)?h.findIndex:h.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},h.filter=h.select=function(t,e,n){var r=[];return e=m(e,n),h.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},h.reject=function(t,e,n){return h.filter(t,h.negate(m(e)),n)},h.every=h.all=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},h.some=h.any=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},h.contains=h.includes=h.include=function(t,e,n,r){return k(t)||(t=h.values(t)),("number"!=typeof n||r)&&(n=0),h.indexOf(t,e,n)>=0},h.invoke=v((function(t,e,n){var r,i;return h.isFunction(e)?i=e:h.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),h.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=_(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),h.pluck=function(t,e){return h.map(t,h.property(e))},h.where=function(t,e){return h.filter(t,h.matcher(e))},h.findWhere=function(t,e){return h.find(t,h.matcher(e))},h.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=k(t)?t:h.values(t)).length;a<c;a++)null!=(r=t[a])&&r>o&&(o=r);else e=m(e,n),h.each(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o},h.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=k(t)?t:h.values(t)).length;a<c;a++)null!=(r=t[a])&&r<o&&(o=r);else e=m(e,n),h.each(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},h.shuffle=function(t){return h.sample(t,1/0)},h.sample=function(t,e,n){if(null==e||n)return k(t)||(t=h.values(t)),t[h.random(t.length-1)];var r=k(t)?h.clone(t):h.values(t),i=S(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=h.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)},h.sortBy=function(t,e,n){var r=0;return e=m(e,n),h.pluck(h.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var C=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=m(r,i),h.each(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}};h.groupBy=C((function(t,e,n){w(t,n)?t[n].push(e):t[n]=[e]})),h.indexBy=C((function(t,e,n){t[n]=e})),h.countBy=C((function(t,e,n){w(t,n)?t[n]++:t[n]=1}));var T=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;h.toArray=function(t){return t?h.isArray(t)?s.call(t):h.isString(t)?t.match(T):k(t)?h.map(t,h.identity):h.values(t):[]},h.size=function(t){return null==t?0:k(t)?t.length:h.keys(t).length},h.partition=C((function(t,e,n){t[n?0:1].push(e)}),!0),h.first=h.head=h.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:h.initial(t,t.length-e)},h.initial=function(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},h.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:h.rest(t,Math.max(0,t.length-e))},h.rest=h.tail=h.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},h.compact=function(t){return h.filter(t,Boolean)};var P=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,s=S(t);o<s;o++){var a=t[o];if(k(a)&&(h.isArray(a)||h.isArguments(a)))if(e)for(var c=0,u=a.length;c<u;)r[i++]=a[c++];else P(a,e,n,r),i=r.length;else n||(r[i++]=a)}return r};h.flatten=function(t,e){return P(t,e,!1)},h.without=v((function(t,e){return h.difference(t,e)})),h.uniq=h.unique=function(t,e,n,r){h.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=m(n,r));for(var i=[],o=[],s=0,a=S(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&o===u||i.push(c),o=u):n?h.contains(o,u)||(o.push(u),i.push(c)):h.contains(i,c)||i.push(c)}return i},h.union=v((function(t){return h.uniq(P(t,!0,!0))})),h.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!h.contains(e,o)){var s;for(s=1;s<n&&h.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},h.difference=v((function(t,e){return e=P(e,!0,!0),h.filter(t,(function(t){return!h.contains(e,t)}))})),h.unzip=function(t){for(var e=t&&h.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=h.pluck(t,r);return n},h.zip=v(h.unzip),h.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var A=function(t){return function(e,n,r){n=m(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};h.findIndex=A(1),h.findLastIndex=A(-1),h.sortedIndex=function(t,e,n,r){for(var i=(n=m(n,r,1))(e),o=0,s=S(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o};var j=function(t,e,n){return function(r,i,o){var a=0,c=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+c,a):c=o>=0?Math.min(o+1,c):o+c+1;else if(n&&o&&c)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(s.call(r,a,c),h.isNaN))>=0?o+a:-1;for(o=t>0?a:c-1;o>=0&&o<c;o+=t)if(r[o]===i)return o;return-1}};h.indexOf=j(1,h.findIndex,h.sortedIndex),h.lastIndexOf=j(-1,h.findLastIndex),h.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},h.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(s.call(t,r,r+=e));return n};var I=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=y(t.prototype),s=t.apply(o,i);return h.isObject(s)?s:o};h.bind=v((function(t,e,n){if(!h.isFunction(t))throw new TypeError("Bind must be called on a function");var r=v((function(i){return I(t,r,e,this,n.concat(i))}));return r})),h.partial=v((function(t,e){var n=h.partial.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return I(t,r,this,this,s)};return r})),h.partial.placeholder=h,h.bindAll=v((function(t,e){var n=(e=P(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=h.bind(t[r],t)}})),h.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},h.delay=v((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),h.defer=h.partial(h.delay,h,1),h.throttle=function(t,e,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:h.now(),r=null,s=t.apply(i,o),r||(i=o=null)},u=function(){var u=h.now();a||!1!==n.leading||(a=u);var l=e-(u-a);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),a=u,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},h.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},s=v((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,e),a&&(i=t.apply(this,s))}else r=h.delay(o,e,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},h.wrap=function(t,e){return h.partial(e,t)},h.negate=function(t){return function(){return!t.apply(this,arguments)}},h.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},h.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},h.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},h.once=h.partial(h.before,2),h.restArguments=v;var N=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(t,e){var n=D.length,i=t.constructor,o=h.isFunction(i)&&i.prototype||r,s="constructor";for(w(t,s)&&!h.contains(e,s)&&e.push(s);n--;)(s=D[n])in t&&t[s]!==o[s]&&!h.contains(e,s)&&e.push(s)};h.keys=function(t){if(!h.isObject(t))return[];if(l)return l(t);var e=[];for(var n in t)w(t,n)&&e.push(n);return N&&L(t,e),e},h.allKeys=function(t){if(!h.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&L(t,e),e},h.values=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},h.mapObject=function(t,e,n){e=m(e,n);for(var r=h.keys(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},h.pairs=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},h.invert=function(t){for(var e={},n=h.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},h.functions=h.methods=function(t){var e=[];for(var n in t)h.isFunction(t[n])&&e.push(n);return e.sort()};var F=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=o[u])}return n}};h.extend=F(h.allKeys),h.extendOwn=h.assign=F(h.keys),h.findKey=function(t,e,n){e=m(e,n);for(var r,i=h.keys(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r};var M,R,B=function(t,e,n){return e in n};h.pick=v((function(t,e){var n={},r=e[0];if(null==t)return n;h.isFunction(r)?(e.length>1&&(r=g(r,e[1])),e=h.allKeys(t)):(r=B,e=P(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),h.omit=v((function(t,e){var n,r=e[0];return h.isFunction(r)?(r=h.negate(r),e.length>1&&(n=e[1])):(e=h.map(P(e,!1,!1),String),r=function(t,n){return!h.contains(e,n)}),h.pick(t,r,n)})),h.defaults=F(h.allKeys,!0),h.create=function(t,e){var n=y(t);return e&&h.extendOwn(n,e),n},h.clone=function(t){return h.isObject(t)?h.isArray(t)?t.slice():h.extend({},t):t},h.tap=function(t,e){return e(t),t},h.isMatch=function(t,e){var n=h.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0},M=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&R(t,e,n,r)},R=function(t,e,n,r){t instanceof h&&(t=t._wrapped),e instanceof h&&(e=e._wrapped);var o=a.call(t);if(o!==a.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return i.valueOf.call(t)===i.valueOf.call(e)}var s="[object Array]"===o;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,u=e.constructor;if(c!==u&&!(h.isFunction(c)&&c instanceof c&&h.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!M(t[l],e[l],n,r))return!1}else{var f,p=h.keys(t);if(l=p.length,h.keys(e).length!==l)return!1;for(;l--;)if(f=p[l],!w(e,f)||!M(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},h.isEqual=function(t,e){return M(t,e)},h.isEmpty=function(t){return null==t||(k(t)&&(h.isArray(t)||h.isString(t)||h.isArguments(t))?0===t.length:0===h.keys(t).length)},h.isElement=function(t){return!(!t||1!==t.nodeType)},h.isArray=u||function(t){return"[object Array]"===a.call(t)},h.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){h["is"+t]=function(e){return a.call(e)==="[object "+t+"]"}})),h.isArguments(arguments)||(h.isArguments=function(t){return w(t,"callee")});var z=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof z&&(h.isFunction=function(t){return"function"==typeof t||!1}),h.isFinite=function(t){return!h.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},h.isNaN=function(t){return h.isNumber(t)&&isNaN(t)},h.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===a.call(t)},h.isNull=function(t){return null===t},h.isUndefined=function(t){return void 0===t},h.has=function(t,e){if(!h.isArray(e))return w(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!c.call(t,i))return!1;t=t[i]}return!!n},h.noConflict=function(){return t._=e,this},h.identity=function(t){return t},h.constant=function(t){return function(){return t}},h.noop=function(){},h.property=function(t){return h.isArray(t)?function(e){return _(e,t)}:b(t)},h.propertyOf=function(t){return null==t?function(){}:function(e){return h.isArray(e)?_(t,e):t[e]}},h.matcher=h.matches=function(t){return t=h.extendOwn({},t),function(e){return h.isMatch(e,t)}},h.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},h.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},h.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=h.invert(q),U=function(t){var e=function(e){return t[e]},n="(?:"+h.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};h.escape=U(q),h.unescape=U(H),h.result=function(t,e,n){h.isArray(e)||(e=[e]);var r=e.length;if(!r)return h.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=h.isFunction(o)?o.call(t):o}return t};var W=0;h.uniqueId=function(t){var e=++W+"";return t?t+e:e},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+$[t]};h.template=function(t,e,n){!e&&n&&(e=n),e=h.defaults({},e,h.templateSettings);var r,i=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,n,r,i,a){return s+=t.slice(o,a).replace(G,K),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,h)},c=e.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},h.chain=function(t){var e=h(t);return e._chain=!0,e};var Q=function(t,e){return t._chain?h(e).chain():e};h.mixin=function(t){return h.each(h.functions(t),(function(e){var n=h[e]=t[e];h.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),Q(this,n.apply(h,t))}})),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=n[t];h.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Q(this,n)}})),h.each(["concat","join","slice"],(function(t){var e=n[t];h.prototype[t]=function(){return Q(this,e.apply(this._wrapped,arguments))}})),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return h}))}()),Pr}var Dr,Lr=!1;function Fr(){return Lr||(Lr=!0,function(){var t,e,n,r,i,o,s,a,c=[].slice;a=Nr(),n={cmd:"⌘",ctrl:"⌃",alt:"⌥",option:"⌥",shift:"⇧",enter:"⏎",left:"←",right:"→",up:"↑",down:"↓"},r={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},o={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},s=function(t){var e,n,r,i,o;if(r=0,n=[],null==t)return n;for(e=i=0,o=t.length;i<o;e=++i)"."!==t[e]||0!==e&&"\\"===t[e-1]||(n.push(t.substring(r,e)),r=e+1);return n.push(t.substr(r,t.length)),n},e=function(t){return a.isObject(t)&&!a.isArray(t)},i={adviseBefore:function(t,e,n){var r;return r=t[e],t[e]=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],!1!==n.apply(this,t))return r.apply(this,t)}},camelize:function(t){return t?t.replace(/[_-]+(\w)/g,(function(t){return t[1].toUpperCase()})):""},capitalize:function(t){return t?"github"===t.toLowerCase()?"GitHub":t[0].toUpperCase()+t.slice(1):""},compactObject:function(t){var e,n,r;for(e in n={},t)null!=(r=t[e])&&(n[e]=r);return n},dasherize:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|(_)/g,(function(t,e){return e?"-"+e.toLowerCase():"-"})):""},deepClone:function(t){return a.isArray(t)?t.map((function(t){return i.deepClone(t)})):a.isObject(t)&&!a.isFunction(t)?i.mapObject(t,(function(t,e){return[t,i.deepClone(e)]})):t},deepExtend:function(t){var n,r,o,s,a,c,u;for(s=t,n=0;++n<arguments.length;)if(o=arguments[n],e(s)&&e(o))for(a=0,c=(u=Object.keys(o)).length;a<c;a++)s[r=u[a]]=i.deepExtend(s[r],o[r]);else s=i.deepClone(o);return s},deepContains:function(t,e){var n,r,i;if(null==t)return!1;for(r=0,i=t.length;r<i;r++)if(n=t[r],a.isEqual(n,e))return!0;return!1},endsWith:function(t,e){return null==e&&(e=""),!!t&&-1!==t.indexOf(e,t.length-e.length)},escapeAttribute:function(t){return t?t.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(t){return t?t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(t,e){var n,r,o,s;return r=(s=t.split(":"))[0],null==(n=s[1])?i.undasherize(r):(o=i.undasherize(r),null==e&&(e=i.undasherize(n)),o+": "+e)},humanizeKey:function(t,e){var s;return null==e&&(e=process.platform),t?(s="darwin"===e?n:r)[t]?s[t]:1===t.length&&null!=o[t]?[s.shift,o[t]]:1===t.length&&t===t.toUpperCase()&&t.toUpperCase()!==t.toLowerCase()?[s.shift,t.toUpperCase()]:1===t.length||/f[0-9]{1,2}/.test(t)?t.toUpperCase():"darwin"===e?t:i.capitalize(t):t},humanizeKeystroke:function(t,e){var n,r,o,s,c,u,l,f,p,h;if(null==e&&(e=process.platform),!t)return t;for(n=[],l=0,p=(c=t.split(" ")).length;l<p;l++){for(s=[],r=f=0,h=(u=(t=c[l]).split("-")).length;f<h;r=++f)""===(o=u[r])&&""===u[r-1]&&(o="-"),o&&s.push(i.humanizeKey(o,e));s=a.uniq(a.flatten(s)),s="darwin"===e?s.join(""):s.join("+"),n.push(s)}return n.join(" ")},isSubset:function(t,e){return a.every(t,(function(t){return a.include(e,t)}))},losslessInvert:function(t){var e,n,r;for(n in e={},t)null==e[r=t[n]]&&(e[r]=[]),e[r].push(n);return e},mapObject:function(t,e){var n,r,i,o,s,a,c;for(r={},o=0,s=(a=Object.keys(t)).length;o<s;o++)n=(c=e(n=a[o],t[n]))[0],i=c[1],r[n]=i;return r},multiplyString:function(t,e){var n,r;for(n="",r=0;r<e;)n+=t,r++;return n},pluralize:function(t,e,n){return null==t&&(t=0),null==n&&(n=e+"s"),1===t?t+" "+e:t+" "+n},remove:function(t,e){var n;return(n=t.indexOf(e))>=0&&t.splice(n,1),t},setValueForKeyPath:function(t,e,n){var r,i;for(i=s(e);i.length>1;)null==t[r=i.shift()]&&(t[r]={}),t=t[r];return null!=n?t[i.shift()]=n:delete t[i.shift()]},hasKeyPath:function(t,e){var n,r,i,o;for(i=0,o=(r=s(e)).length;i<o;i++){if(n=r[i],!t.hasOwnProperty(n))return!1;t=t[n]}return!0},spliceWithArray:function(t,e,n,r,i){var o,s,a,u;if(null==i&&(i=1e5),r.length<i)return t.splice.apply(t,[e,n].concat(c.call(r)));for(t.splice(e,n),u=[],o=s=0,a=r.length;i>0?s<=a:s>=a;o=s+=i)u.push(t.splice.apply(t,[e+o,0].concat(c.call(r.slice(o,o+i)))));return u},sum:function(t){var e,n,r;for(e=0,n=0,r=t.length;n<r;n++)e+=t[n];return e},uncamelcase:function(t){var e;return t?(e=t.replace(/([A-Z])|_+/g,(function(t,e){return null==e&&(e="")," "+e})),i.capitalize(e.trim())):""},undasherize:function(t){return t?t.split("-").map(i.capitalize).join(" "):""},underscore:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|-+/g,(function(t,e){return null==e&&(e=""),"_"+e.toLowerCase()})):""},valueForKeyPath:function(t,e){var n,r,i;for(r=0,i=(n=s(e)).length;r<i;r++)if(null==(t=t[n[r]]))return;return t},isEqual:function(e,n,r,i){return a.isArray(r)&&a.isArray(i)?t(e,n,r,i):t(e,n)},isEqualForProperties:function(){var t,e,n,r,i,o;for(t=arguments[0],e=arguments[1],i=0,o=(n=3<=arguments.length?c.call(arguments,2):[]).length;i<o;i++)if(r=n[i],!a.isEqual(t[r],e[r]))return!1;return!0}},t=function(e,n,r,i){var o,s,c,u,l,f,p,h,d,g,m,v,y,b;if(null==r&&(r=[]),null==i&&(i=[]),e===n)return a.isEqual(e,n);if(a.isFunction(e)||a.isFunction(n))return a.isEqual(e,n);for(v=r.length;v--;)if(r[v]===e)return i[v]===n;if(r.push(e),i.push(n),d=!1,a.isFunction(null!=e?e.isEqual:void 0))d=e.isEqual(n,r,i);else if(a.isFunction(null!=n?n.isEqual:void 0))d=n.isEqual(e,i,r);else if(a.isArray(e)&&a.isArray(n)&&e.length===n.length){for(d=!0,g=y=0,b=e.length;y<b;g=++y)if(c=e[g],!t(c,n[g],r,i)){d=!1;break}}else if(a.isRegExp(e)&&a.isRegExp(n))d=a.isEqual(e,n);else if(a.isElement(e)&&a.isElement(n))d=e===n;else if(a.isObject(e)&&a.isObject(n))if(o=e.constructor,f=n.constructor,s=a.isFunction(o)&&o instanceof o,p=a.isFunction(f)&&f instanceof f,o===f||s&&p){for(m in u=0,d=!0,e)if(l=e[m],a.has(e,m)&&(u++,!a.has(n,m)||!t(l,n[m],r,i))){d=!1;break}if(d){for(m in h=0,n)n[m],a.has(n,m)&&h++;d=u===h}}else d=!1;else d=a.isEqual(e,n);return r.pop(),i.pop(),d},Dr=a.extend({},a,i)}.call(Dr={})),Dr}var Mr,Rr=!1;function Br(){Mr={},function(){var t,e={};function n(){}function r(t){return t}function i(t){return!!t}function o(t){return!t}var s="object"==typeof self&&self.self===self&&self||"object"==typeof O&&O.global===O&&O||this;function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function c(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=s&&(t=s.async),e.noConflict=function(){return s.async=t,e};var u=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===u.call(t)};function f(t){return l(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function h(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t){return h(Array(t),(function(t,e){return e}))}function g(t,e,n){return p(t,(function(t,r,i){n=e(n,t,r,i)})),n}function m(t,e){p(y(t),(function(n){e(t[n],n)}))}function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function b(t){var e,n,r=-1;return f(t)?(e=t.length,function(){return++r<e?r:null}):(n=y(t),e=n.length,function(){return++r<e?n[r]:null})}function w(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function _(t){return function(e,n,r){return t(e,r)}}var x="function"==typeof setImmediate&&setImmediate,S=x?function(t){x(t)}:function(t){setTimeout(t,0)};function k(t){return function(e,r,i){i=c(i||n);var o=b(e=e||[]);if(t<=0)return i(null);var s=!1,u=0,l=!1;!function n(){if(s&&u<=0)return i(null);for(;u<t&&!l;){var c=o();if(null===c)return s=!0,void(u<=0&&i(null));u+=1,r(e[c],c,a((function(t){u-=1,t?(i(t),l=!0):n()})))}}()}}function E(t){return function(n,r,i){return t(e.eachOf,n,r,i)}}function C(t){return function(e,n,r,i){return t(k(n),e,r,i)}}function T(t){return function(n,r,i){return t(e.eachOfSeries,n,r,i)}}function P(t,e,r,i){i=c(i||n);var o=f(e=e||[])?[]:{};t(e,(function(t,e,n){r(t,(function(t,r){o[e]=r,n(t)}))}),(function(t){i(t,o)}))}function A(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(n){n&&i.push({index:e,value:t}),r()}))}),(function(){r(h(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function j(t,e,n,r){A(t,e,(function(t,e){n(t,(function(t){e(!t)}))}),r)}function I(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(t,r,i){if(!s)return i();o(t,(function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}))}arguments.length>3?t(r,i,c,a):(s=o,o=i,t(r,c,a))}}function N(t,e){return e}function D(t,e,r){r=r||n;var i=f(e)?[]:{};t(e,(function(t,e,n){t(w((function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)})))}),(function(t){r(t,i)}))}function L(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(t,e){i=i.concat(e||[]),r(t)}))}),(function(t){r(t,i)}))}function F(t,r,i){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");function o(t,r,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(t.started=!0,l(r)||(r=[r]),0===r.length&&t.idle())return e.setImmediate((function(){t.drain()}));p(r,(function(e){var r={data:e,callback:o||n};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()})),e.setImmediate(t.process)}function s(t,e){return function(){c-=1;var n=!1,r=arguments;p(e,(function(t){p(u,(function(e,r){e!==t||n||(u.splice(r,1),n=!0)})),t.callback.apply(t,r)})),t.tasks.length+c===0&&t.drain(),t.process()}}var c=0,u=[],f={tasks:[],concurrency:r,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){o(f,t,!1,e)},kill:function(){f.drain=n,f.tasks=[]},unshift:function(t,e){o(f,t,!0,e)},process:function(){for(;!f.paused&&c<f.concurrency&&f.tasks.length;){var e=f.payload?f.tasks.splice(0,f.payload):f.tasks.splice(0,f.tasks.length),n=h(e,(function(t){return t.data}));0===f.tasks.length&&f.empty(),c+=1,u.push(e[0]);var r=a(s(f,e));t(n,r)}},length:function(){return f.tasks.length},running:function(){return c},workersList:function(){return u},idle:function(){return f.tasks.length+c===0},pause:function(){f.paused=!0},resume:function(){if(!1!==f.paused){f.paused=!1;for(var t=Math.min(f.concurrency,f.tasks.length),n=1;n<=t;n++)e.setImmediate(f.process)}}};return f}function M(t){return w((function(e,n){e.apply(null,n.concat([w((function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&p(n,(function(e){console[t](e)})))}))]))}))}function R(t){return function(e,n,r){t(d(e),n,r)}}function B(t){return w((function(e,n){var r=w((function(n){var r=this,i=n.pop();return t(e,(function(t,e,i){t.apply(r,n.concat([i]))}),i)}));return n.length?r.apply(this,n):r}))}function z(t){return w((function(n){var r=n.pop();n.push((function(){var t=arguments;i?e.setImmediate((function(){r.apply(null,t)})):r.apply(null,t)}));var i=!0;t.apply(this,n),i=!1}))}"object"==typeof process&&"function"==typeof process.nextTick?e.nextTick=process.nextTick:e.nextTick=S,e.setImmediate=x?S:e.nextTick,e.forEach=e.each=function(t,n,r){return e.eachOf(t,_(n),r)},e.forEachSeries=e.eachSeries=function(t,n,r){return e.eachOfSeries(t,_(n),r)},e.forEachLimit=e.eachLimit=function(t,e,n,r){return k(e)(t,_(n),r)},e.forEachOf=e.eachOf=function(t,e,r){r=c(r||n);for(var i,o=b(t=t||[]),s=0;null!=(i=o());)s+=1,e(t[i],i,a(u));function u(t){s--,t?r(t):null===i&&s<=0&&r(null)}0===s&&r(null)},e.forEachOfSeries=e.eachOfSeries=function(t,r,i){i=c(i||n);var o=b(t=t||[]),s=o();!function n(){var c=!0;if(null===s)return i(null);r(t[s],s,a((function(t){if(t)i(t);else{if(null===(s=o()))return i(null);c?e.setImmediate(n):n()}}))),c=!1}()},e.forEachOfLimit=e.eachOfLimit=function(t,e,n,r){k(e)(t,n,r)},e.map=E(P),e.mapSeries=T(P),e.mapLimit=C(P),e.inject=e.foldl=e.reduce=function(t,n,r,i){e.eachOfSeries(t,(function(t,e,i){r(n,t,(function(t,e){n=e,i(t)}))}),(function(t){i(t,n)}))},e.foldr=e.reduceRight=function(t,n,i,o){var s=h(t,r).reverse();e.reduce(s,n,i,o)},e.transform=function(t,n,r,i){3===arguments.length&&(i=r,r=n,n=l(t)?[]:{}),e.eachOf(t,(function(t,e,i){r(n,t,e,i)}),(function(t){i(t,n)}))},e.select=e.filter=E(A),e.selectLimit=e.filterLimit=C(A),e.selectSeries=e.filterSeries=T(A),e.reject=E(j),e.rejectLimit=C(j),e.rejectSeries=T(j),e.any=e.some=I(e.eachOf,i,r),e.someLimit=I(e.eachOfLimit,i,r),e.all=e.every=I(e.eachOf,o,o),e.everyLimit=I(e.eachOfLimit,o,o),e.detect=I(e.eachOf,r,N),e.detectSeries=I(e.eachOfSeries,r,N),e.detectLimit=I(e.eachOfLimit,r,N),e.sortBy=function(t,n,r){function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}e.map(t,(function(t,e){n(t,(function(n,r){n?e(n):e(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return r(t);r(null,h(e.sort(i),(function(t){return t.value})))}))},e.auto=function(t,r,i){"function"==typeof arguments[1]&&(i=r,r=null),i=c(i||n);var o=y(t),s=o.length;if(!s)return i(null);r||(r=s);var a={},u=0,f=!1,h=[];function d(t){h.unshift(t)}function b(t){var e=v(h,t);e>=0&&h.splice(e,1)}function _(){s--,p(h.slice(0),(function(t){t()}))}d((function(){s||i(null,a)})),p(o,(function(n){if(!f){for(var o,s=l(t[n])?t[n]:[t[n]],c=w((function(t,r){if(u--,r.length<=1&&(r=r[0]),t){var o={};m(a,(function(t,e){o[e]=t})),o[n]=r,f=!0,i(t,o)}else a[n]=r,e.setImmediate(_)})),p=s.slice(0,s.length-1),h=p.length;h--;){if(!(o=t[p[h]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(l(o)&&v(o,n)>=0)throw new Error("Has cyclic dependencies")}y()?(u++,s[s.length-1](c,a)):d((function t(){y()&&(u++,b(t),s[s.length-1](c,a))}))}function y(){return u<r&&g(p,(function(t,e){return t&&a.hasOwnProperty(e)}),!0)&&!a.hasOwnProperty(n)}}))},e.retry=function(t,n,r){var i=5,o=0,s=[],a={times:i,interval:o};function c(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(t,n){function r(t,e){return function(r){t((function(t,n){r(!t||e,{err:t,result:n})}),n)}}function i(t){return function(e){setTimeout((function(){e(null)}),t)}}for(;a.times;){var o=!(a.times-=1);s.push(r(a.task,o)),!o&&a.interval>0&&s.push(i(a.interval))}e.series(s,(function(e,n){n=n[n.length-1],(t||a.callback)(n.err,n.result)}))}return u<=2&&"function"==typeof t&&(r=n,n=t),"function"!=typeof t&&c(a,t),a.callback=r,a.task=n,a.callback?l():l},e.waterfall=function(t,r){if(r=c(r||n),!l(t)){var i=new Error("First argument to waterfall must be an array of functions");return r(i)}if(!t.length)return r();!function t(e){return w((function(n,i){if(n)r.apply(null,[n].concat(i));else{var o=e.next();o?i.push(t(o)):i.push(r),z(e).apply(null,i)}}))}(e.iterator(t))()},e.parallel=function(t,n){D(e.eachOf,t,n)},e.parallelLimit=function(t,e,n){D(k(e),t,n)},e.series=function(t,n){D(e.eachOfSeries,t,n)},e.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},e.apply=w((function(t,e){return w((function(n){return t.apply(null,e.concat(n))}))})),e.concat=E(L),e.concatSeries=T(L),e.whilst=function(t,e,r){if(r=r||n,t()){var i=w((function(n,o){n?r(n):t.apply(this,o)?e(i):r.apply(null,[null].concat(o))}));e(i)}else r(null)},e.doWhilst=function(t,n,r){var i=0;return e.whilst((function(){return++i<=1||n.apply(this,arguments)}),t,r)},e.until=function(t,n,r){return e.whilst((function(){return!t.apply(this,arguments)}),n,r)},e.doUntil=function(t,n,r){return e.doWhilst(t,(function(){return!n.apply(this,arguments)}),r)},e.during=function(t,e,r){r=r||n;var i=w((function(e,n){e?r(e):(n.push(o),t.apply(this,n))})),o=function(t,n){t?r(t):n?e(i):r(null)};t(o)},e.doDuring=function(t,n,r){var i=0;e.during((function(t){i++<1?t(null,!0):n.apply(this,arguments)}),t,r)},e.queue=function(t,e){return F((function(e,n){t(e[0],n)}),e,1)},e.priorityQueue=function(t,r){function i(t,e){return t.priority-e.priority}var o=e.queue(t,r);return o.push=function(t,r,s){!function(t,r,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(t.started=!0,l(r)||(r=[r]),0===r.length)return e.setImmediate((function(){t.drain()}));p(r,(function(r){var a={data:r,priority:o,callback:"function"==typeof s?s:n};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)}))}(o,t,r,s)},delete o.unshift,o},e.cargo=function(t,e){return F(t,1,e)},e.log=M("log"),e.dir=M("dir"),e.memoize=function(t,n){var i={},o={},s=Object.prototype.hasOwnProperty;n=n||r;var a=w((function(r){var a=r.pop(),c=n.apply(null,r);s.call(i,c)?e.setImmediate((function(){a.apply(null,i[c])})):s.call(o,c)?o[c].push(a):(o[c]=[a],t.apply(null,r.concat([w((function(t){i[c]=t;var e=o[c];delete o[c];for(var n=0,r=e.length;n<r;n++)e[n].apply(null,t)}))])))}));return a.memo=i,a.unmemoized=t,a},e.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},e.times=R(e.map),e.timesSeries=R(e.mapSeries),e.timesLimit=function(t,n,r,i){return e.mapLimit(d(t),n,r,i)},e.seq=function(){var t=arguments;return w((function(r){var i=this,o=r[r.length-1];"function"==typeof o?r.pop():o=n,e.reduce(t,r,(function(t,e,n){e.apply(i,t.concat([w((function(t,e){n(t,e)}))]))}),(function(t,e){o.apply(i,[t].concat(e))}))}))},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))},e.applyEach=B(e.eachOf),e.applyEachSeries=B(e.eachOfSeries),e.forever=function(t,e){var r=a(e||n),i=z(t);!function t(e){if(e)return r(e);i(t)}()},e.ensureAsync=z,e.constant=w((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),e.wrapSync=e.asyncify=function(t){return w((function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then((function(t){o(null,t)})).catch((function(t){o(t.message?t:new Error(t))})):o(null,n)}))},Mr?Mr=e:"function"==typeof define&&define.amd?define([],(function(){return e})):s.async=e}()}var zr,qr,Hr,Ur,Wr=!1;function Vr(t,e,n,r){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var i=e.mode,o=e.fs||Hr;void 0===i&&(i=Ur&~process.umask()),r||(r=null);var s=n||function(){};t=qr.resolve(t),o.mkdir(t,i,(function(n){if(!n)return s(null,r=r||t);switch(n.code){case"ENOENT":Vr(qr.dirname(t),e,(function(n,r){n?s(n,r):Vr(t,e,s,r)}));break;default:o.stat(t,(function(t,e){t||!e.isDirectory()?s(n,r):s(null,r)}))}}))}function $r(){return Wr||(Wr=!0,zr={},qr=d,Hr=o,Ur=parseInt("0777",8),zr=Vr.mkdirp=Vr.mkdirP=Vr,Vr.sync=function t(e,n,r){n&&"object"==typeof n||(n={mode:n});var i=n.mode,o=n.fs||Hr;void 0===i&&(i=Ur&~process.umask()),r||(r=null),e=qr.resolve(e);try{o.mkdirSync(e,i),r=r||e}catch(i){switch(i.code){case"ENOENT":r=t(qr.dirname(e),n,r),t(e,n,r);break;default:var s;try{s=o.statSync(e)}catch(t){throw i}if(!s.isDirectory())throw i}}return r}),zr}var Gr,Kr,Qr,Zr,Jr,Xr,Yr,ti,ei,ni=!1;function ri(t){return"function"==typeof t?t:function(){var t;if(Jr){var e=new Error;t=function(t){t&&(e.message=t.message,n(t=e))}}else t=n;return t;function n(t){if(t){if(process.throwDeprecation)throw t;if(!process.noDeprecation){var e="fs: missing callback "+(t.stack||t.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}()}function ii(){return ni||(ni=!0,Gr={},Kr=d,Qr="win32"===process.platform,Zr=o,Jr=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG),Kr.normalize,Xr=Qr?/(.*?)(?:[\/\\]+|$)/g:/(.*?)(?:[\/]+|$)/g,Yr=Qr?/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:/^[\/]*/,ti=function(t,e){if(t=Kr.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return e[t];var n,r,i,o,s=t,a={},c={};function u(){var e=Yr.exec(t);n=e[0].length,r=e[0],i=e[0],o="",Qr&&!c[i]&&(Zr.lstatSync(i),c[i]=!0)}for(u();n<t.length;){Xr.lastIndex=n;var l=Xr.exec(t);if(o=r,r+=l[0],i=o+l[1],n=Xr.lastIndex,!(c[i]||e&&e[i]===i)){var f;if(e&&Object.prototype.hasOwnProperty.call(e,i))f=e[i];else{var p=Zr.lstatSync(i);if(!p.isSymbolicLink()){c[i]=!0,e&&(e[i]=i);continue}var h=null;if(!Qr){var d=p.dev.toString(32)+":"+p.ino.toString(32);a.hasOwnProperty(d)&&(h=a[d])}null===h&&(Zr.statSync(i),h=Zr.readlinkSync(i)),f=Kr.resolve(o,h),e&&(e[i]=f),Qr||(a[d]=h)}t=Kr.resolve(f,t.slice(n)),u()}}return e&&(e[s]=t),t},Gr.realpathSync=ti,ei=function(t,e,n){if("function"!=typeof n&&(n=ri(e),e=null),t=Kr.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return process.nextTick(n.bind(null,null,e[t]));var r,i,o,s,a=t,c={},u={};function l(){var e=Yr.exec(t);r=e[0].length,i=e[0],o=e[0],s="",Qr&&!u[o]?Zr.lstat(o,(function(t){if(t)return n(t);u[o]=!0,f()})):process.nextTick(f)}function f(){if(r>=t.length)return e&&(e[a]=t),n(null,t);Xr.lastIndex=r;var c=Xr.exec(t);return s=i,i+=c[0],o=s+c[1],r=Xr.lastIndex,u[o]||e&&e[o]===o?process.nextTick(f):e&&Object.prototype.hasOwnProperty.call(e,o)?d(e[o]):Zr.lstat(o,p)}function p(t,r){if(t)return n(t);if(!r.isSymbolicLink())return u[o]=!0,e&&(e[o]=o),process.nextTick(f);if(!Qr){var i=r.dev.toString(32)+":"+r.ino.toString(32);if(c.hasOwnProperty(i))return h(null,c[i],o)}Zr.stat(o,(function(t){if(t)return n(t);Zr.readlink(o,(function(t,e){Qr||(c[i]=e),h(t,e)}))}))}function h(t,r,i){if(t)return n(t);var o=Kr.resolve(s,r);e&&(e[i]=o),d(o)}function d(e){t=Kr.resolve(e,t.slice(r)),l()}l()},Gr.realpath=ei),Gr}var oi,si,ai,ci,ui,li,fi,pi=!1;function hi(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function di(t,e,n){if(li)return ai(t,e,n);"function"==typeof e&&(n=e,e=null),ai(t,e,(function(r,i){hi(r)?fi.realpath(t,e,n):n(r,i)}))}function gi(t,e){if(li)return ci(t,e);try{return ci(t,e)}catch(n){if(hi(n))return fi.realpathSync(t,e);throw n}}function mi(){si.realpath=di,si.realpathSync=gi}function vi(){si.realpath=ai,si.realpathSync=ci}function yi(){return pi||(pi=!0,oi={},oi=di,di.realpath=di,di.sync=gi,di.realpathSync=gi,di.monkeypatch=mi,di.unmonkeypatch=vi,ai=(si=o).realpath,ci=si.realpathSync,ui=process.version,li=/^v[0-5]\./.test(ui),fi=ii()),oi}var bi,wi,_i=!1;function xi(){return _i||(_i=!0,bi={},bi=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);wi(i)?n.push.apply(n,i):n.push(i)}return n},wi=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),bi}var Si,ki=!1;function Ei(t,e,n){t instanceof RegExp&&(t=Ci(t,n)),e instanceof RegExp&&(e=Ci(e,n));var r=Oi(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Ci(t,e){var n=e.match(t);return n?n[0]:null}function Oi(t,e,n){var r,i,o,s,a,c=n.indexOf(t),u=n.indexOf(e,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(t,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}function Ti(){return ki||(ki=!0,Si={},Si=Ei,Ei.range=Oi),Si}var Pi,Ai,ji,Ii,Ni,Di,Li,Fi,Mi=!1;function Ri(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Bi(t){return t.split(Ii).join("\\").split(Ni).join("{").split(Di).join("}").split(Li).join(",").split(Fi).join(".")}function zi(t){if(!t)return[""];var e=[],n=ji("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=zi(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function qi(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),$i(function(t){return t.split("\\\\").join(Ii).split("\\{").join(Ni).split("\\}").join(Di).split("\\,").join(Li).split("\\.").join(Fi)}(t),!0).map(Bi)):[]}function Hi(t){return"{"+t+"}"}function Ui(t){return/^-?0\d/.test(t)}function Wi(t,e){return t<=e}function Vi(t,e){return t>=e}function $i(t,e){var n=[],r=ji("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=o||s,c=r.body.indexOf(",")>=0;if(!a&&!c)return r.post.match(/,.*\}/)?$i(t=r.pre+"{"+r.body+Di+r.post):[t];if(a)i=r.body.split(/\.\./);else if(1===(i=zi(r.body)).length&&1===(i=$i(i[0],!1).map(Hi)).length)return(f=r.post.length?$i(r.post,!1):[""]).map((function(t){return r.pre+i[0]+t}));var u,l=r.pre,f=r.post.length?$i(r.post,!1):[""];if(a){var p=Ri(i[0]),h=Ri(i[1]),d=Math.max(i[0].length,i[1].length),g=3==i.length?Math.abs(Ri(i[2])):1,m=Wi;h<p&&(g*=-1,m=Vi);var v=i.some(Ui);u=[];for(var y=p;m(y,h);y+=g){var b;if(s)"\\"===(b=String.fromCharCode(y))&&(b="");else if(b=String(y),v){var w=d-b.length;if(w>0){var _=new Array(w+1).join("0");b=y<0?"-"+_+b.slice(1):_+b}}u.push(b)}}else u=Ai(i,(function(t){return $i(t,!1)}));for(var x=0;x<u.length;x++)for(var S=0;S<f.length;S++){var k=l+u[x]+f[S];(!e||a||k)&&n.push(k)}return n}function Gi(){return Mi||(Mi=!0,Pi={},Ai=xi(),ji=Ti(),Pi=qi,Ii="\0SLASH"+Math.random()+"\0",Ni="\0OPEN"+Math.random()+"\0",Di="\0CLOSE"+Math.random()+"\0",Li="\0COMMA"+Math.random()+"\0",Fi="\0PERIOD"+Math.random()+"\0"),Pi}var Ki,Qi,Zi,Ji,Xi,Yi,to,eo,no,ro,io,oo,so=!1;function ao(t,e){return e=e||{},function(n,r,i){return uo(n,t,e)}}function co(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function uo(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new lo(e,n).match(t))}function lo(t,e){if(!(this instanceof lo))return new lo(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==Qi.sep&&(t=t.split(Qi.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function fo(){if(!this._made){var t=this.pattern,e=this.options;if(e.nocomment||"#"!==t.charAt(0))if(t){this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map((function(t){return t.split(io)})),this.debug(this.pattern,n),n=n.map((function(t,e,n){return t.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0}}function po(){var t=this.pattern,e=!1,n=0;if(!this.options.nonegate){for(var r=0,i=t.length;r<i&&"!"===t.charAt(r);r++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}function ho(t,e){if(e||(e=this instanceof lo?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:Ji(t)}function go(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===t)return Zi;if(""===t)return"";var r,i="",o=!!n.nocase,s=!1,a=[],c=[],u=!1,l=-1,f=-1,p="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function d(){if(r){switch(r){case"*":i+=to,o=!0;break;case"?":i+=Yi,o=!0;break;default:i+="\\"+r}h.debug("clearStateChar %j %j",r,i),r=!1}}for(var g,m=0,v=t.length;m<v&&(g=t.charAt(m));m++)if(this.debug("%s\t%s %s %j",t,m,i,g),s&&ro[g])i+="\\"+g,s=!1;else switch(g){case"/":return!1;case"\\":d(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,m,i,g),u){this.debug("  in class"),"!"===g&&m===f+1&&(g="^"),i+=g;continue}h.debug("call clearStateChar %j",r),d(),r=g,n.noext&&d();continue;case"(":if(u){i+="(";continue}if(!r){i+="\\(";continue}a.push({type:r,start:m-1,reStart:i.length,open:Xi[r].open,close:Xi[r].close}),i+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,i),r=!1;continue;case")":if(u||!a.length){i+="\\)";continue}d(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}d(),i+="|";continue;case"[":if(d(),u){i+="\\"+g;continue}u=!0,f=m,l=i.length,i+=g;continue;case"]":if(m===f+1||!u){i+="\\"+g,s=!1;continue}if(u){var b=t.substring(f+1,m);try{RegExp("["+b+"]")}catch(t){var w=this.parse(b,oo);i=i.substr(0,l)+"\\["+w[0]+"\\]",o=o||w[1],u=!1;continue}}o=!0,u=!1,i+=g;continue;default:d(),s?s=!1:!ro[g]||"^"===g&&u||(i+="\\"),i+=g}for(u&&(b=t.substr(f+1),w=this.parse(b,oo),i=i.substr(0,l)+"\\["+w[0],o=o||w[1]),y=a.pop();y;y=a.pop()){var _=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),_=_.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,n){return n||(n="\\"),e+e+n+"|"})),this.debug("tail=%j\n   %s",_,_,y,i);var x="*"===y.type?to:"?"===y.type?Yi:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+x+"\\("+_}d(),s&&(i+="\\\\");var S=!1;switch(i.charAt(0)){case".":case"[":case"(":S=!0}for(var k=c.length-1;k>-1;k--){var E=c[k],C=i.slice(0,E.reStart),O=i.slice(E.reStart,E.reEnd-8),T=i.slice(E.reEnd-8,E.reEnd),P=i.slice(E.reEnd);T+=P;var A=C.split("(").length-1,j=P;for(m=0;m<A;m++)j=j.replace(/\)[+*?]?/,"");var I="";""===(P=j)&&e!==oo&&(I="$"),i=C+O+P+I+T}if(""!==i&&o&&(i="(?=.)"+i),S&&(i=p+i),e===oo)return[i,o];if(!o)return t.replace(/\\(.)/g,"$1");var N=n.nocase?"i":"";try{var D=new RegExp("^"+i+"$",N)}catch(t){return new RegExp("$.")}return D._glob=t,D._src=i,D}function mo(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?to:e.dot?eo:no,r=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===Zi?n:"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(t){this.regexp=!1}return this.regexp}function vo(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"/"!==Qi.sep&&(t=t.split(Qi.sep).join("/")),t=t.split(io),this.debug(this.pattern,"split",t);var r,i,o=this.set;for(this.debug(this.pattern,"set",o),i=t.length-1;i>=0&&!(r=t[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=t;if(n.matchBase&&1===s.length&&(a=[r]),this.matchOne(a,s,e))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}function yo(){Ki={},Ki=uo,uo.Minimatch=lo,Qi={sep:"/"};try{Qi=function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}("path")}catch(t){}Zi=uo.GLOBSTAR=lo.GLOBSTAR={},Ji=Gi(),Xi={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},to=(Yi="[^/]")+"*?",eo="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",no="(?:(?!(?:\\/|^)\\.).)*?",ro="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{}),io=/\/+/,uo.filter=ao,uo.defaults=function(t){if(!t||!Object.keys(t).length)return uo;var e=uo,n=function(n,r,i){return e.minimatch(n,r,co(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,co(t,r))},n},lo.defaults=function(t){return t&&Object.keys(t).length?uo.defaults(t).Minimatch:lo},lo.prototype.debug=function(){},lo.prototype.make=fo,lo.prototype.parseNegate=po,uo.braceExpand=function(t,e){return ho(t,e)},lo.prototype.braceExpand=ho,lo.prototype.parse=go,oo={},uo.makeRe=function(t,e){return new lo(t,e||{}).makeRe()},lo.prototype.makeRe=mo,uo.match=function(t,e,n){var r=new lo(e,n=n||{});return t=t.filter((function(t){return r.match(t)})),r.options.nonull&&!t.length&&t.push(e),t},lo.prototype.match=vo,lo.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=e[o],l=t[i];if(this.debug(e,u,l),!1===u)return!1;if(u===Zi){this.debug("GLOBSTAR",[e,u,l]);var f=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}for(;f<s;){var h=t[f];if(this.debug("\nglobstar while",t,f,e,p,h),this.matchOne(t.slice(f),e.slice(p),n))return this.debug("globstar found match!",f,s,h),!0;if("."===h||".."===h||!r.dot&&"."===h.charAt(0)){this.debug("dot detected!",t,f,e,p);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!n||(this.debug("\n>>> no match, partial?",t,f,e,p),f!==s))}if("string"==typeof u?(c=r.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,c)):(c=l.match(u),this.debug("pattern match",u,l,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return n;if(o===a)return i===s-1&&""===t[i];throw new Error("wtf?")}}function bo(){return so||(so=!0,yo()),Ki}var wo,_o=!1;function xo(){return _o||(_o=!0,wo={},wo="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}),wo}var So,ko,Eo,Co=!1;function Oo(t){return"/"===t.charAt(0)}function To(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(t),n=e[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(e[2]||r)}function Po(){return Co||(Co=!0,So={},So="win32"===process.platform?To:Oo,ko=Oo,So.posix=ko,Eo=To,So.win32=Eo),So}var Ao,jo,Io,No,Do,Lo,Fo,Mo,Ro,Bo,zo,qo,Ho,Uo=!1;function Wo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vo(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function $o(t,e){return t.localeCompare(e)}function Go(t){var e=null;if("/**"===t.slice(-3)){var n=t.replace(/(\/\*\*)+$/,"");e=new Ho(n,{dot:!0})}return{matcher:new Ho(t,{dot:!0}),gmatcher:e}}function Ko(t,e,n){if(n||(n={}),n.matchBase&&-1===e.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!n.silent,t.pattern=e,t.strict=!1!==n.strict,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),function(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Go))}(t,n),t.changedCwd=!1;var r=process.cwd();Wo(n,"cwd")?(t.cwd=Bo.resolve(n.cwd),t.changedCwd=t.cwd!==r):t.cwd=r,t.root=n.root||Bo.resolve(t.cwd,"/"),t.root=Bo.resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=qo(t.cwd)?t.cwd:Jo(t,t.cwd),"win32"===process.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,t.minimatch=new Ho(e,n),t.options=t.minimatch.options}function Qo(t){for(var e=t.nounique,n=e?[]:Object.create(null),r=0,i=t.matches.length;r<i;r++){var o=t.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);e?n.push.apply(n,s):s.forEach((function(t){n[t]=!0}))}else if(t.nonull){var a=t.minimatch.globSet[r];e?n.push(a):n[a]=!0}}if(e||(n=Object.keys(n)),t.nosort||(n=n.sort(t.nocase?Vo:$o)),t.mark){for(r=0;r<n.length;r++)n[r]=t._mark(n[r]);t.nodir&&(n=n.filter((function(e){var n=!/\/$/.test(e),r=t.cache[e]||t.cache[Jo(t,e)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n})))}t.ignore.length&&(n=n.filter((function(e){return!Xo(t,e)}))),t.found=n}function Zo(t,e){var n=Jo(t,e),r=t.cache[n],i=e;if(r){var o="DIR"===r||Array.isArray(r),s="/"===e.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=Jo(t,i);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return i}function Jo(t,e){var n=e;return n="/"===e.charAt(0)?Bo.join(t.root,e):qo(e)||""===e?e:t.changedCwd?Bo.resolve(t.cwd,e):Bo.resolve(e),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function Xo(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return t.matcher.match(e)||!(!t.gmatcher||!t.gmatcher.match(e))}))}function Yo(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return!(!t.gmatcher||!t.gmatcher.match(e))}))}function ts(){return Uo||(Uo=!0,(Ao={}).alphasort=$o,jo=Vo,Ao.alphasorti=jo,Io=Ko,Ao.setopts=Io,No=Wo,Ao.ownProp=No,Do=Jo,Ao.makeAbs=Do,Lo=Qo,Ao.finish=Lo,Fo=Zo,Ao.mark=Fo,Mo=Xo,Ao.isIgnored=Mo,Ro=Yo,Ao.childrenIgnored=Ro,Bo=d,zo=bo(),qo=Po(),Ho=zo.Minimatch),Ao}var es,ns,rs,is,os,ss,as,cs,us,ls,fs,ps,hs=!1;function ds(t,e){if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new gs(t,e).found}function gs(t,e){if(!t)throw new Error("must provide pattern");if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof gs))return new gs(t,e);if(us(this,t,e),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}function ms(){return hs||(hs=!0,es={},es=ds,ds.GlobSync=gs,ns=o,rs=yi(),is=bo(),is.Minimatch,ia().Glob,c,os=d,ss=r,as=Po(),cs=ts(),cs.alphasort,cs.alphasorti,us=cs.setopts,ls=cs.ownProp,fs=cs.childrenIgnored,ps=cs.isIgnored,gs.prototype._finish=function(){if(ss(this instanceof gs),this.realpath){var t=this;this.matches.forEach((function(e,n){var r=t.matches[n]=Object.create(null);for(var i in e)try{i=t._makeAbs(i),r[rs.realpathSync(i,t.realpathCache)]=!0}catch(e){if("stat"!==e.syscall)throw e;r[t._makeAbs(i)]=!0}}))}cs.finish(this)},gs.prototype._process=function(t,e,n){ss(this instanceof gs);for(var r,i=0;"string"==typeof t[i];)i++;switch(i){case t.length:return void this._processSimple(t.join("/"),e);case 0:r=null;break;default:r=t.slice(0,i).join("/")}var o,s=t.slice(i);null===r?o=".":as(r)||as(t.join("/"))?(r&&as(r)||(r="/"+r),o=r):o=r;var a=this._makeAbs(o);fs(this,o)||(s[0]===is.GLOBSTAR?this._processGlobStar(r,o,a,s,e,n):this._processReaddir(r,o,a,s,e,n))},gs.prototype._processReaddir=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){for(var a=r[0],c=!!this.minimatch.negate,u=a._glob,l=this.dot||"."===u.charAt(0),f=[],p=0;p<s.length;p++)("."!==(g=s[p]).charAt(0)||l)&&(c&&!t?!g.match(a):g.match(a))&&f.push(g);var h=f.length;if(0!==h)if(1!==r.length||this.mark||this.stat)for(r.shift(),p=0;p<h;p++){var d;g=f[p],d=t?[t,g]:[g],this._process(d.concat(r),i,o)}else for(this.matches[i]||(this.matches[i]=Object.create(null)),p=0;p<h;p++){var g=f[p];t&&(g="/"!==t.slice(-1)?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=os.join(this.root,g)),this._emitMatch(i,g)}}},gs.prototype._emitMatch=function(t,e){if(!ps(this,e)){var n=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}},gs.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,n;try{n=ns.lstatSync(t)}catch(t){if("ENOENT"===t.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[t]=r,r||!n||n.isDirectory()?e=this._readdir(t,!1):this.cache[t]="FILE",e},gs.prototype._readdir=function(t,e){if(e&&!ls(this.symlinks,t))return this._readdirInGlobStar(t);if(ls(this.cache,t)){var n=this.cache[t];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,ns.readdirSync(t))}catch(e){return this._readdirError(t,e),null}},gs.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var r=e[n];r="/"===t?t+r:t+"/"+r,this.cache[r]=!0}return this.cache[t]=e,e},gs.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(e.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=e.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e)}},gs.prototype._processGlobStar=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=t?[t]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var f=0;f<l;f++)if("."!==s[f].charAt(0)||this.dot){var p=c.concat(s[f],a);this._process(p,i,!0);var h=c.concat(s[f],r);this._process(h,i,!0)}}},gs.prototype._processSimple=function(t,e){var n=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),n){if(t&&as(t)&&!this.nomount){var r=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=os.join(this.root,t):(t=os.resolve(this.root,t),r&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}},gs.prototype._stat=function(t){var e=this._makeAbs(t),n="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&ls(this.cache,e)){var r=this.cache[e];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var i=this.statCache[e];if(!i){var o;try{o=ns.lstatSync(e)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=ns.statSync(e)}catch(t){i=o}else i=o}return this.statCache[e]=i,r=!0,i&&(r=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||r,(!n||"FILE"!==r)&&r},gs.prototype._mark=function(t){return cs.mark(this,t)},gs.prototype._makeAbs=function(t){return cs.makeAbs(this,t)}),es}var vs,ys=!1;function bs(t,e){if(t&&e)return bs(t)(e);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}function ws(){return ys||(ys=!0,vs={},vs=bs),vs}var _s,xs,Ss,ks=!1;function Es(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Cs(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}function Os(){return ks||(ks=!0,_s={},xs=ws(),_s=xs(Es),Ss=xs(Cs),_s.strict=Ss,Es.proto=Es((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Es(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Cs(this)},configurable:!0})}))),_s}var Ts,Ps,As,js,Is=!1;function Ns(t,e){return As[t]?(As[t].push(e),null):(As[t]=[e],function(t){return js((function e(){var n=As[t],r=n.length,i=Ds(arguments);try{for(var o=0;o<r;o++)n[o].apply(null,i)}finally{n.length>r?(n.splice(0,r),process.nextTick((function(){e.apply(null,i)}))):delete As[t]}}))}(t))}function Ds(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r]=t[r];return n}function Ls(){return Is||(Is=!0,Ts={},Ps=ws(),As=Object.create(null),js=Os(),Ts=Ps(Ns)),Ts}var Fs,Ms,Rs,Bs,zs,qs,Hs,Us,Ws,Vs,$s,Gs,Ks,Qs,Zs,Js,Xs,Ys,ta=!1;function ea(t,e,n){if("function"==typeof e&&(n=e,e={}),e||(e={}),e.sync){if(n)throw new TypeError("callback provided to sync glob");return Vs(t,e)}return new na(t,e,n)}function na(t,e,n){if("function"==typeof e&&(n=e,e=null),e&&e.sync){if(n)throw new TypeError("callback provided to sync glob");return new Ys(t,e)}if(!(this instanceof na))return new na(t,e,n);Gs(this,t,e),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=Xs(n),this.on("error",n),this.on("end",(function(t){n(null,t)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return s();for(var o=0;o<r;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}function ra(){Fs={},Fs=ea,Ms=o,Rs=yi(),Bs=bo(),Bs.Minimatch,zs=xo(),qs=n.EventEmitter,Hs=d,Us=r,Ws=Po(),Vs=ms(),$s=ts(),$s.alphasort,$s.alphasorti,Gs=$s.setopts,Ks=$s.ownProp,Qs=Ls(),c,Zs=$s.childrenIgnored,Js=$s.isIgnored,Xs=Os(),ea.sync=Vs,Ys=ea.GlobSync=Vs.GlobSync,ea.glob=ea,ea.hasMagic=function(t,e){var n=function(t,e){if(null===e||"object"!=typeof e)return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}({},e);n.noprocess=!0;var r=new na(t,n).minimatch.set;if(!t)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},ea.Glob=na,zs(na,qs),na.prototype._finish=function(){if(Us(this instanceof na),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();$s.finish(this),this.emit("end",this.found)}},na.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var e=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--t&&e._finish()}},na.prototype._realpathSet=function(t,e){var n=this.matches[t];if(!n)return e();var r=Object.keys(n),i=this,o=r.length;if(0===o)return e();var s=this.matches[t]=Object.create(null);r.forEach((function(n,r){n=i._makeAbs(n),Rs.realpath(n,i.realpathCache,(function(r,a){r?"stat"===r.syscall?s[n]=!0:i.emit("error",r):s[a]=!0,0==--o&&(i.matches[t]=s,e())}))}))},na.prototype._mark=function(t){return $s.mark(this,t)},na.prototype._makeAbs=function(t){return $s.makeAbs(this,t)},na.prototype.abort=function(){this.aborted=!0,this.emit("abort")},na.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},na.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var n=t[e];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(e=0;e<r.length;e++){var i=r[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},na.prototype._process=function(t,e,n,r){if(Us(this instanceof na),Us("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,e,n,r]);else{for(var i,o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return void this._processSimple(t.join("/"),e,r);case 0:i=null;break;default:i=t.slice(0,o).join("/")}var s,a=t.slice(o);null===i?s=".":Ws(i)||Ws(t.join("/"))?(i&&Ws(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(Zs(this,s))return r();a[0]===Bs.GLOBSTAR?this._processGlobStar(i,s,c,a,e,n,r):this._processReaddir(i,s,c,a,e,n,r)}},na.prototype._processReaddir=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){return a._processReaddir2(t,e,n,r,i,o,u,s)}))},na.prototype._processReaddir2=function(t,e,n,r,i,o,s,a){if(!s)return a();for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,f=this.dot||"."===l.charAt(0),p=[],h=0;h<s.length;h++){if("."!==(g=s[h]).charAt(0)||f)(u&&!t?!g.match(c):g.match(c))&&p.push(g)}var d=p.length;if(0===d)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(h=0;h<d;h++){var g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=Hs.join(this.root,g)),this._emitMatch(i,g)}return a()}r.shift();for(h=0;h<d;h++){g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),this._process([g].concat(r),i,o,a)}a()},na.prototype._emitMatch=function(t,e){if(!this.aborted&&!Js(this,e))if(this.paused)this._emitQueue.push([t,e]);else{var n=Ws(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0;var i=this.statCache[n];i&&this.emit("stat",e,i),this.emit("match",e)}}},na.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var n=this,r=Qs("lstat\0"+t,(function(r,i){if(r&&"ENOENT"===r.code)return e();var o=i&&i.isSymbolicLink();n.symlinks[t]=o,o||!i||i.isDirectory()?n._readdir(t,!1,e):(n.cache[t]="FILE",e())}));r&&Ms.lstat(t,r)}},na.prototype._readdir=function(t,e,n){if(!this.aborted&&(n=Qs("readdir\0"+t+"\0"+e,n))){if(e&&!Ks(this.symlinks,t))return this._readdirInGlobStar(t,n);if(Ks(this.cache,t)){var r=this.cache[t];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}Ms.readdir(t,function(t,e,n){return function(r,i){r?t._readdirError(e,r,n):t._readdirEntries(e,i,n)}}(this,t,n))}},na.prototype._readdirEntries=function(t,e,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var i=e[r];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,n(null,e)}},na.prototype._readdirError=function(t,e,n){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e)}return n()}},na.prototype._processGlobStar=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){a._processGlobStar2(t,e,n,r,i,o,u,s)}))},na.prototype._processGlobStar2=function(t,e,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=t?[t]:[],l=u.concat(c);this._process(l,i,!1,a);var f=this.symlinks[n],p=s.length;if(f&&o)return a();for(var h=0;h<p;h++){if("."!==s[h].charAt(0)||this.dot){var d=u.concat(s[h],c);this._process(d,i,!0,a);var g=u.concat(s[h],r);this._process(g,i,!0,a)}}a()},na.prototype._processSimple=function(t,e,n){var r=this;this._stat(t,(function(i,o){r._processSimple2(t,e,i,o,n)}))},na.prototype._processSimple2=function(t,e,n,r,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!r)return i();if(t&&Ws(t)&&!this.nomount){var o=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=Hs.join(this.root,t):(t=Hs.resolve(this.root,t),o&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()},na.prototype._stat=function(t,e){var n=this._makeAbs(t),r="/"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&Ks(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return e(null,i);if(r&&"FILE"===i)return e()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return e(null,o);var s=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===s?e():e(null,s,o)}var a=this,c=Qs("stat\0"+n,(function(r,i){if(i&&i.isSymbolicLink())return Ms.stat(n,(function(r,o){r?a._stat2(t,n,null,i,e):a._stat2(t,n,r,o,e)}));a._stat2(t,n,r,i,e)}));c&&Ms.lstat(n,c)},na.prototype._stat2=function(t,e,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[e]=!1,i();var o="/"===t.slice(-1);if(this.statCache[e]=r,"/"===e.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&"FILE"===s?i():i(null,s,r)}}function ia(){return ta||(ta=!0,ra()),Fs}var oa,sa,aa,ca,ua,la,fa,pa,ha,da=!1;function ga(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(e){t[e]=t[e]||ca[e],t[e+="Sync"]=t[e]||ca[e]})),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,!1===t.glob&&(t.disableGlob=!0),t.disableGlob=t.disableGlob||!1,t.glob=t.glob||fa}function ma(t,e,n){"function"==typeof e&&(n=e,e={}),sa(t,"rimraf: missing path"),sa.equal(typeof t,"string","rimraf: path should be a string"),sa.equal(typeof n,"function","rimraf: callback function required"),sa(e,"rimraf: invalid options argument provided"),sa.equal(typeof e,"object","rimraf: options should be object"),ga(e);var r=0,i=null,o=0;if(e.disableGlob||!ua.hasMagic(t))return s(null,[t]);function s(t,s){return t?n(t):0===(o=s.length)?n():void s.forEach((function(t){va(t,e,(function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&r<e.maxBusyTries)return r++,setTimeout((function(){va(t,e,s)}),100*r);if("EMFILE"===a.code&&pa<e.emfileWait)return setTimeout((function(){va(t,e,s)}),pa++);"ENOENT"===a.code&&(a=null)}pa=0,function(t){i=i||t,0==--o&&n(i)}(a)}))}))}e.lstat(t,(function(n,r){if(!n)return s(null,[t]);ua(t,e.glob,s)}))}function va(t,e,n){sa(t),sa(e),sa("function"==typeof n),e.lstat(t,(function(r,i){return r&&"ENOENT"===r.code?n(null):(r&&"EPERM"===r.code&&ha&&ya(t,e,r,n),i&&i.isDirectory()?wa(t,e,r,n):void e.unlink(t,(function(r){if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return ha?ya(t,e,r,n):wa(t,e,r,n);if("EISDIR"===r.code)return wa(t,e,r,n)}return n(r)})))}))}function ya(t,e,n,r){sa(t),sa(e),sa("function"==typeof r),n&&sa(n instanceof Error),e.chmod(t,la,(function(i){i?r("ENOENT"===i.code?null:n):e.stat(t,(function(i,o){i?r("ENOENT"===i.code?null:n):o.isDirectory()?wa(t,e,n,r):e.unlink(t,r)}))}))}function ba(t,e,n){sa(t),sa(e),n&&sa(n instanceof Error);try{e.chmodSync(t,la)}catch(t){if("ENOENT"===t.code)return;throw n}try{var r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?xa(t,e,n):e.unlinkSync(t)}function wa(t,e,n,r){sa(t),sa(e),n&&sa(n instanceof Error),sa("function"==typeof r),e.rmdir(t,(function(i){!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):function(t,e,n){sa(t),sa(e),sa("function"==typeof n),e.readdir(t,(function(r,i){if(r)return n(r);var o,s=i.length;if(0===s)return e.rmdir(t,n);i.forEach((function(r){ma(aa.join(t,r),e,(function(r){if(!o)return r?n(o=r):void(0==--s&&e.rmdir(t,n))}))}))}))}(t,e,r)}))}function _a(t,e){var n;if(ga(e=e||{}),sa(t,"rimraf: missing path"),sa.equal(typeof t,"string","rimraf: path should be a string"),sa(e,"rimraf: missing options"),sa.equal(typeof e,"object","rimraf: options should be object"),e.disableGlob||!ua.hasMagic(t))n=[t];else try{e.lstatSync(t),n=[t]}catch(r){n=ua.sync(t,e.glob)}if(n.length)for(var r=0;r<n.length;r++){t=n[r];try{var i=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&ha&&ba(t,e,n)}try{i&&i.isDirectory()?xa(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return ha?ba(t,e,n):xa(t,e,n);if("EISDIR"!==n.code)throw n;xa(t,e,n)}}}function xa(t,e,n){sa(t),sa(e),n&&sa(n instanceof Error);try{e.rmdirSync(t)}catch(r){if("ENOENT"===r.code)return;if("ENOTDIR"===r.code)throw n;"ENOTEMPTY"!==r.code&&"EEXIST"!==r.code&&"EPERM"!==r.code||function(t,e){sa(t),sa(e),e.readdirSync(t).forEach((function(n){_a(aa.join(t,n),e)}));var n=ha?100:1,r=0;for(;;){var i=!0;try{var o=e.rmdirSync(t,e);return i=!1,o}finally{if(++r<n&&i)continue}}}(t,e)}}function Sa(){return da||(da=!0,oa={},oa=ma,ma.sync=_a,sa=r,aa=d,ca=o,ua=ia(),la=parseInt("666",8),fa={nosort:!0,silent:!0},pa=0,ha="win32"===process.platform),oa}(function(){var n,r,i,s,a,c,u,l,f,p,h,g,m,v,y,b,w,_,x,S=[].slice;l=o,a=e,b=d,x=Fr(),Rr||(Rr=!0,Br()),c=Mr,y=$r(),w=Sa(),f={__esModule:!1,getHomeDirectory:function(){return"win32"!==process.platform||process.env.HOME?process.env.HOME:process.env.USERPROFILE},absolute:function(t){if(null==t)return null;t=f.resolveHome(t);try{return l.realpathSync(t)}catch(e){return e,t}},normalize:function(t){return null==t?null:f.resolveHome(b.normalize(t.toString()))},resolveHome:function(t){return"~"===t?f.getHomeDirectory():0===t.indexOf("~"+b.sep)?""+f.getHomeDirectory()+t.substring(1):t},tildify:function(t){var e,n;return"win32"===process.platform?t:(n=f.normalize(t),null==(e=f.getHomeDirectory())?t:n===e?"~":n.startsWith(b.join(e,b.sep))?b.join("~",b.sep,n.substring(e.length+1)):t)},getAppDataDirectory:function(){switch(process.platform){case"darwin":return f.absolute(b.join("~","Library","Application Support"));case"linux":return"/var/lib";case"win32":return process.env.APPDATA;default:return null}},isAbsolute:function(t){return null==t&&(t=""),"win32"!==process.platform?"/"===t[0]:":"===t[1]||"\\"===t[0]&&"\\"===t[1]},existsSync:function(t){return m(t)&&!1!==_(t)},isDirectorySync:function(t){var e;return!!m(t)&&(!!(e=_(t))&&e.isDirectory())},isDirectory:function(t,e){return m(t)?l.stat(t,(function(t,n){return e(null==t&&n.isDirectory())})):e(!1)},isFileSync:function(t){var e;return!!m(t)&&(!!(e=_(t))&&e.isFile())},isSymbolicLinkSync:function(t){var e;return!!m(t)&&(!!(e=v(t))&&e.isSymbolicLink())},isSymbolicLink:function(t,e){return m(t)?l.lstat(t,(function(t,n){return"function"==typeof e?e(null!=n&&n.isSymbolicLink()):void 0})):process.nextTick((function(){return"function"==typeof e?e(!1):void 0}))},isExecutableSync:function(t){var e;return!!m(t)&&(!!(e=_(t))&&0!=(1&e.mode))},getSizeSync:function(t){var e;return m(t)&&null!=(e=_(t).size)?e:-1},listSync:function(t,e){var n;return f.isDirectorySync(t)?(n=l.readdirSync(t),e&&(n=f.filterExtensions(n,e)),n=(n=n.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(e){return b.join(t,e)}))):[]},list:function(){var t,e,n,r;return r=arguments[0],(n=2<=arguments.length?S.call(arguments,1):[]).length>1&&(e=n.shift()),t=n.shift(),l.readdir(r,(function(n,i){return null!=n?t(n):(e&&(i=f.filterExtensions(i,e)),i=(i=i.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(t){return b.join(r,t)})),t(null,i))}))},filterExtensions:function(t,e){return e=e.map((function(t){return""===t?t:"."+t.replace(/^\./,"")})),t.filter((function(t){return x.include(e,b.extname(t))}))},listTreeSync:function(t){var e,n;return n=[],e=function(t){return n.push(t),!0},f.traverseTreeSync(t,e,e),n},move:function(t,e,n){return h(t,e,(function(r,i){var o,s;if(!r)return i?(s=b.dirname(e),l.exists(s,(function(r){if(!r)return f.makeTree(s,(function(r){if(!r)return l.rename(t,e,n);n(r)}));l.rename(t,e,n)}))):((o=new Error("'"+e+"' already exists.")).code="EEXIST",void n(o));n(r)}))},moveSync:function(t,e){var n,r;if(!g(t,e))throw(n=new Error("'"+e+"' already exists.")).code="EEXIST",n;return r=b.dirname(e),l.existsSync(r)||f.makeTreeSync(r),l.renameSync(t,e)},removeSync:function(t){return w.sync(t)},remove:function(t,e){return w(t,e)},writeFileSync:function(t,e,n){return y.sync(b.dirname(t)),l.writeFileSync(t,e,n)},writeFile:function(t,e,n,r){return r=x.last(arguments),y(b.dirname(t),(function(i){return null!=i?"function"==typeof r?r(i):void 0:l.writeFile(t,e,n,r)}))},copy:function(t,e,n){return y(b.dirname(e),(function(r){var i,o;if(null==r)return(o=l.createReadStream(t)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),(i=l.createWriteStream(e)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),i.on("close",(function(){return"function"==typeof n&&n(),n=null})),o.pipe(i);"function"==typeof n&&n(r)}))},copySync:function(t,e){var n,r,i,o,s,a,c;for(o=l.readdirSync(t),y.sync(e),c=[],s=0,a=o.length;s<a;s++)r=o[s],i=b.join(t,r),n=b.join(e,r),f.isDirectorySync(i)?c.push(f.copySync(i,n)):c.push(f.copyFileSync(i,n));return c},copyFileSync:function(t,e,n){var r,i,o,s,a,c;null==n&&(n=16384),y.sync(b.dirname(e)),s=null,a=null;try{for(s=l.openSync(t,"r"),a=l.openSync(e,"w"),i=1,o=0,c=[];i>0;)r=new Buffer(n),i=l.readSync(s,r,0,r.length,o),l.writeSync(a,r,0,i,o),c.push(o+=i);return c}finally{null!=s&&l.closeSync(s),null!=a&&l.closeSync(a)}},makeTreeSync:function(t){if(!f.isDirectorySync(t))return y.sync(t)},makeTree:function(t,e){return f.isDirectory(t,(function(n){return n?"function"==typeof e?e():void 0:y(t,(function(t){return"function"==typeof e?e(t):void 0}))}))},traverseTreeSync:function(t,e,n){var r;if(null==n&&(n=e),f.isDirectorySync(t))return(r=function(t,e,n){var i,o,s,a,c,u,f;for(c=0,u=(f=l.readdirSync(t)).length;c<u;c++)o=f[c],i=b.join(t,o),(a=l.lstatSync(i)).isSymbolicLink()&&(s=_(i))&&(a=s),a.isDirectory()?n(i)&&r(i,e,n):a.isFile()&&e(i)})(t,e,n)},traverseTree:function(t,e,n,r){return l.readdir(t,(function(i,o){var s,a,u,f,p;if(i)return"function"==typeof r?r():void 0;for((a=c.queue((function(t,r){return l.stat(t,(function(i,o){return i?r(i):o.isFile()?(e(t),r()):o.isDirectory()&&n(t)?l.readdir(t,(function(e,n){var i,o,s;if(e)return r(e);for(o=0,s=n.length;o<s;o++)i=n[o],a.unshift(b.join(t,i));return r()})):r()}))}))).concurrency=1,a.drain=r,p=[],u=0,f=o.length;u<f;u++)s=o[u],p.push(a.push(b.join(t,s)));return p}))},md5ForPath:function(e){var n;return n=l.readFileSync(e),t.createHash("md5").update(n).digest("hex")},resolve:function(){var t,e,n,r,i,o,s,a,c,u;if(t=1<=arguments.length?S.call(arguments,0):[],x.isArray(x.last(t))&&(n=t.pop()),o=null!=(u=t.pop())?u.toString():void 0,i=t,o){if(f.isAbsolute(o)){if(n&&(s=f.resolveExtension(o,n)))return s;if(f.existsSync(o))return o}for(a=0,c=i.length;a<c;a++)if(r=i[a],e=b.join(r,o),n){if(s=f.resolveExtension(e,n))return s}else if(f.existsSync(e))return f.absolute(e)}},resolveOnLoadPath:function(){var t,e,n;return t=1<=arguments.length?S.call(arguments,0):[],n=null,n=null!=module.paths?module.paths:process.resourcesPath?[b.join(process.resourcesPath,"app","node_modules")]:[],e=a.globalPaths.concat(n),f.resolve.apply(f,S.call(e).concat(S.call(t)))},resolveExtension:function(t,e){var n,r,i,o;for(i=0,o=e.length;i<o;i++)if(""===(n=e[i])){if(f.existsSync(t))return f.absolute(t)}else if(r=t+"."+n.replace(/^\./,""),f.existsSync(r))return f.absolute(r)},isCompressedExtension:function(t){return null!=t&&r.hasOwnProperty(t.toLowerCase())},isImageExtension:function(t){return null!=t&&i.hasOwnProperty(t.toLowerCase())},isPdfExtension:function(t){return".pdf"===(null!=t?t.toLowerCase():void 0)},isBinaryExtension:function(t){return null!=t&&n.hasOwnProperty(t.toLowerCase())},isReadmePath:function(t){var e;return e=b.extname(t),"readme"===b.basename(t,e).toLowerCase()&&(""===e||f.isMarkdownExtension(e))},isMarkdownExtension:function(t){return null!=t&&s.hasOwnProperty(t.toLowerCase())},isCaseInsensitive:function(){var t,e;return null==f.caseInsensitiveFs&&(t=_(process.execPath.toLowerCase()),e=_(process.execPath.toUpperCase()),f.caseInsensitiveFs=!(!t||!e)&&(t.dev===e.dev&&t.ino===e.ino)),f.caseInsensitiveFs},isCaseSensitive:function(){return!f.isCaseInsensitive()},statSyncNoException:function(){var t;return t=1<=arguments.length?S.call(arguments,0):[],_.apply(null,t)},lstatSyncNoException:function(){var t;return t=1<=arguments.length?S.call(arguments,0):[],v.apply(null,t)}},p=null,u=function(){return null===p&&(p=process.versions.electron&&parseInt(process.versions.electron.split(".")[0])<=2),p},_=function(){var t;if(t=1<=arguments.length?S.call(arguments,0):[],l.statSyncNoException&&u())return l.statSyncNoException.apply(l,t);try{return l.statSync.apply(l,t)}catch(t){return t,!1}},v=function(){var t;if(t=1<=arguments.length?S.call(arguments,0):[],l.lstatSyncNoException&&u())return l.lstatSyncNoException.apply(l,t);try{return l.lstatSync.apply(l,t)}catch(t){return t,!1}},n={".ds_store":!0,".a":!0,".exe":!0,".o":!0,".pyc":!0,".pyo":!0,".so":!0,".woff":!0},r={".bz2":!0,".egg":!0,".epub":!0,".gem":!0,".gz":!0,".jar":!0,".lz":!0,".lzma":!0,".lzo":!0,".rar":!0,".tar":!0,".tgz":!0,".war":!0,".whl":!0,".xpi":!0,".xz":!0,".z":!0,".zip":!0},i={".gif":!0,".ico":!0,".jpeg":!0,".jpg":!0,".png":!0,".tif":!0,".tiff":!0,".webp":!0},s={".markdown":!0,".md":!0,".mdown":!0,".mkd":!0,".mkdown":!0,".rmd":!0,".ron":!0},m=function(t){return null!=t&&"string"==typeof t&&t.length>0},h=function(t,e,n){return l.stat(t,(function(r,i){if(!r)return l.stat(e,(function(r,o){if(!r||"ENOENT"!==r.code)return n(void 0,t.toLowerCase()===e.toLowerCase()&&i.dev===o.dev&&i.ino===o.ino);n(void 0,!0)}));n(r)}))},g=function(t,e){var n,r;return r=_(t),n=_(e),!r||!n||t.toLowerCase()===e.toLowerCase()&&r.dev===n.dev&&r.ino===n.ino},jr=new Proxy({},{get:function(t,e){var n;return null!=(n=f[e])?n:l[e]},set:function(t,e,n){return f[e]=n}})}).call(jr);class ka{constructor(t){this.props=t,this.model=atom.workspace.buildTextEditor({mini:!0,softWrapped:!0,lineNumberGutterVisible:!1}),this.element=atom.views.getView(this.model),this.model.setText(t.initialText),t.selectAll?this.model.selectAll():this.model.getLastCursor().moveToEndOfScreenLine(),this.setReadOnly(),this.setGrammar(),this.model.scrollToBufferPosition([0,0])}async update(t){this.element=atom.views.getView(this.model),this.props=Object.assign(Object.assign({},this.props),t),this.setReadOnly(),this.setGrammar()}focus(){this.element.focus()}getModel(){return this.model}setReadOnly(){this.model.setReadOnly(!!this.props.readOnly)}setGrammar(){void 0!==this.props.grammar?atom.textEditors.setGrammarOverride(this.model,this.props.grammar):atom.textEditors.clearGrammarOverride(this.model)}}class Ea{constructor(t){this.props=t,P.initialize(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),await P.update(this)}render(){return P.dom("div",{className:"atomts-rename-view",ref:"main"},P.dom("div",{className:"block"},P.dom("div",null,P.dom("span",{ref:"title"},this.props.title),P.dom("span",{className:"subtle-info-message"},P.dom("span",null,"Close this panel with "),P.dom("span",{className:"highlight"},"esc"),P.dom("span",null," key. And commit with the "),P.dom("span",{className:"highlight"},"enter"),P.dom("span",null," key."))),P.dom("div",{className:"find-container block"},P.dom("div",{className:"editor-container"},P.dom(ka,{ref:"editor",initialText:this.props.initialText,selectAll:this.props.selectAll}))),this.renderValidationMessage()))}async destroy(){await P.destroy(this)}focus(){return this.refs.editor.focus()}getText(){return this.refs.editor.getModel().getText()}renderValidationMessage(){return void 0!==this.props.validationMessage?P.dom("div",{className:"highlight-error"},this.props.validationMessage):null}}async function Ca(t){const e=new Ea({title:t.title,initialText:t.text,selectAll:t.autoSelect}),n=atom.workspace.addModalPanel({item:e,priority:1e3}),r=document.activeElement;e.focus();const i=new y;try{return await new Promise((n=>{i.add(atom.commands.add(e.refs.main,{"core:cancel":()=>{n(void 0)},"core:confirm":()=>{const r=e.getText(),i=t.onValidate(r);i?pt(e.update({validationMessage:i})):n(r)}}))}))}finally{n.destroy(),i.dispose(),r&&r.focus()}}function Oa(t){const e=new y;for(const n of hr)if("atom-text-editor"===n.selector){const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,Object.assign(Object.assign({},r),{async didDispatch(t){try{const e=t.currentTarget.getModel();Ot(e)?await r.didDispatch(e,(()=>t.abortKeyBinding())):(t.abortKeyBinding(),Tt(e)&&atom.notifications.addWarning("Atom-TypeScript cancelled last command: Current editor has no file path",{description:`Atom-TypeScript needs to determine the file path of the current editor to execute \`${n.command}\`, which it failed to do. You probably just need to save the current file somewhere.`,dismissable:!0}))}catch(t){Ta(t)}}})))}else{const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,Object.assign(Object.assign({},r),{async didDispatch(){try{await r.didDispatch()}catch(t){Ta(t)}}})))}return e}function Ta(t){atom.notifications.addFatalError("Something went wrong, see details below.",{detail:t.message,dismissable:!0,stack:t.stack})}dr("atom-text-editor","typescript:rename-file",(t=>({description:"Rename current file",async didDispatch(e){const n=e.getPath();if(!n)return;const r=await Ca({autoSelect:!0,title:"Rename File",text:n,onValidate:t=>t.trim()?"":"If you want to abort : Press esc to exit"});if(!r)return;const i=await t.getClient(n),o=await i.execute("getEditsForFileRename",{oldFilePath:n,newFilePath:r});await t.applyEdits(o.body),await new Promise(((t,i)=>{jr.move(n,r,(n=>{n?i(n):(e.getBuffer().setPath(r),t())}))}))}}))),dr("atom-text-editor","typescript:rename-refactor",(t=>({description:"Rename symbol under text cursor everywhere it is used",async didDispatch(e){const n=Pt(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("rename",n),{info:o,locs:s}=i.body;if(!o.canRename)return void atom.notifications.addInfo("AtomTS: Rename not available at cursor location");const a=await Ca({autoSelect:!0,title:"Rename Variable",text:o.displayName,onValidate:t=>t.replace(/\s/g,"")!==t.trim()?"The new variable must not contain a space":t.trim()?"":"If you want to abort : Press esc to exit"});void 0!==a&&await t.applyEdits(s.map((t=>({fileName:t.file,textChanges:t.locs.map((t=>Object.assign(Object.assign({},t),{newText:a})))}))))}}))),dr("atom-workspace","typescript:restart-all-servers",(t=>({description:"Kill all tsserver instances. They will be auto-restarted",async didDispatch(){t.killAllServers()}}))),dr("atom-workspace","typescript:return-from-declaration",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",async didDispatch(){await t.histGoBack()}}))),dr("atom-workspace","typescript:show-editor-position-history",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",async didDispatch(){await t.histShowHistory()}}))),dr("atom-text-editor","typescript:toggle-semantic-view",(t=>({description:"Toggle semantic view outline",didDispatch(){t.toggleSemanticViewController()}}))),dr("atom-text-editor","typescript:show-tooltip",(t=>({description:"Show type tooltip at current text cursor position",didDispatch:async e=>t.showTooltipAt(e)}))),dr("atom-text-editor","typescript:show-signature-help",(t=>({description:"Show signature help tooltip at current text cursor position",didDispatch:async e=>t.showSigHelpAt(e)}))),dr("atom-text-editor","typescript:hide-signature-help",(t=>({description:"Hide the currently visible signature help",async didDispatch(e,n){t.hideSigHelpAt(e)||n()}}))),dr("atom-text-editor","typescript:signature-help-next",(t=>({description:"Show next signature help if available",async didDispatch(e,n){t.rotateSigHelp(e,1)||n()}}))),dr("atom-text-editor","typescript:signature-help-prev",(t=>({description:"Show previous signature help if available",async didDispatch(e,n){t.rotateSigHelp(e,-1)||n()}}))),dr("atom-text-editor","typescript:toggle-file-symbols",(t=>({description:"Toggle view for finding file symbols",async didDispatch(e){t.toggleFileSymbolsView(e)}}))),dr("atom-text-editor","typescript:toggle-project-symbols",(t=>({description:"Toggle view for finding file symbols",async didDispatch(e){t.toggleProjectSymbolsView(e)}})));class Pa{constructor(t,e){this.children=e,this.props=Object.assign(Object.assign({},t),{delay:{show:0,hide:0}}),P.initialize(this),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}async update(t,e){this.props=Object.assign(Object.assign({},this.props),t),this.children=e,await P.update(this),this.tooltipDisposable.dispose(),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}render(){return P.dom("div",{className:"inline-block"},this.children?this.children:null)}async destroy(){await P.destroy(this),this.tooltipDisposable.dispose()}}class Aa{constructor(t){this.hiddenBuildStatus=!1,this.disposables=new y,this.buildStatusClicked=()=>{this.props.buildStatus.success||atom.notifications.addError("Build failed",{detail:this.props.buildStatus.message,dismissable:!0})},this.props=Object.assign({},t),this.setHideBuildStatus(atom.config.get("atom-typescript").buildStatusTimeout),this.resetBuildStatusTimeout(),P.initialize(this),this.disposables.add(atom.config.onDidChange("atom-typescript.buildStatusTimeout",(({newValue:t})=>{this.setHideBuildStatus(t),pt(this.update({}))})))}async update(t){const e=void 0!==t.buildStatus&&t.buildStatus.success!==this.props.buildStatus.success;this.props=Object.assign(Object.assign({},this.props),t),e&&this.resetBuildStatusTimeout(),await P.update(this)}render(){if(this.hiddenBuildStatus)return P.dom("span",null);let t,e;return this.props.buildStatus.success?(t="highlight-success",e="Emit Success"):(t="highlight-error",e="Emit Failed"),P.dom(Pa,{title:this.props.buildStatus.success?"Build was successful":"Build failed; click to show error message"},P.dom("span",{className:t,on:{click:this.buildStatusClicked}},e))}async destroy(){await P.destroy(this)}resetBuildStatusTimeout(){this.hiddenBuildStatus=!1,this.props.buildStatus.success&&this.hideBuildStatus()}setHideBuildStatus(t){this.hideBuildStatus=t>0?dt.debounce((()=>{this.hiddenBuildStatus=!0,pt(P.update(this))}),1e3*t):0===t?()=>{this.hiddenBuildStatus=!0}:()=>{}}}class ja{constructor(t){this.props=Object.assign({},t),P.initialize(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),await P.update(this)}render(){return P.dom(Pa,{title:()=>this.props.tsConfigPath.startsWith("/dev/null")?"No tsconfig.json":"Click to open "+atom.project.relativize(this.props.tsConfigPath)},P.dom("a",{className:"inline-block",href:"",on:{click:t=>{t.preventDefault(),this.openConfigPath()}}},this.props.tsConfigPath.startsWith("/dev/null")?"No project":g((t=this.props.tsConfigPath,"~"+atom.project.relativize(t)))));var t}async destroy(){await P.destroy(this)}openConfigPath(){this.props.tsConfigPath.startsWith("/dev/null")?atom.notifications.addInfo("No tsconfig for current file"):pt(atom.workspace.open(this.props.tsConfigPath))}}class Ia{constructor(t={}){this.props=Object.assign({visible:!0,pending:[],progress:{max:0,value:0}},t),P.initialize(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),await P.update(this)}render(){return P.dom("ts-status-panel",{className:this.props.visible?"":"hide"},this.renderVersion(),this.renderPending(),this.renderConfigPath(),this.renderStatus(),this.renderProgress())}async destroy(){await P.destroy(this)}dispose(){pt(this.destroy())}async show(){await this.update({visible:!0})}async hide(){await this.update({visible:!1})}renderVersion(){return void 0!==this.props.clientVersion?P.dom(Pa,{title:"Active TypeScript version"},this.props.clientVersion):null}renderPending(){return this.props.pending.length>0?P.dom(Pa,{title:`Pending Requests: <ul>${this.props.pending.map((({title:t})=>`<li>${t}</li>`)).join("")}</ul>`,html:!0},P.dom("span",{ref:"pendingCounter"},this.props.pending.length.toString()),P.dom("span",{ref:"pendingSpinner",className:"loading loading-spinner-tiny inline-block",style:{marginLeft:"5px",opacity:"0.5",verticalAlign:"sub"}})):null}renderConfigPath(){return void 0!==this.props.tsConfigPath?P.dom(ja,{tsConfigPath:this.props.tsConfigPath}):null}renderStatus(){return this.props.buildStatus?P.dom(Aa,{buildStatus:this.props.buildStatus}):null}renderProgress(){return this.props.progress.value<this.props.progress.max?P.dom("progress",{style:{verticalAlign:"baseline"},className:"inline-block",max:this.props.progress.max,value:this.props.progress.value}):null}}class Na{constructor(t=[]){this.prevCursorPositions=t}async goBack(){return this.goHistory(1)}async goHistory(t){let e;for(;t-- >0;)e=this.prevCursorPositions.pop();if(e)return this.open({file:e.file,start:{line:e.line,offset:e.offset}});atom.notifications.addInfo("AtomTS: Previous position not found.")}async goForward(t,e){const n=Pt(t);if(n){this.prevCursorPositions.push(n);const t=100;this.prevCursorPositions.length>t&&this.prevCursorPositions.splice(0,this.prevCursorPositions.length-t)}return this.open(e)}async showHistory(){const t=await pr({items:this.getHistory().slice().reverse().map(((t,e)=>Object.assign(Object.assign({},t),{idx:e}))),itemTemplate:(t,e)=>P.dom("li",{className:"two-lines"},P.dom("div",{className:"primary-line"},P.dom(_n,{label:t.file,query:e.getFilterQuery()})),P.dom("div",{className:"secondary-line"},"Line: ",t.line,", column: ",t.offset)),itemFilterKey:"file"});t&&await this.goHistory(t.idx+1)}getHistory(){return this.prevCursorPositions}dispose(){}serialize(){return this.prevCursorPositions}async open(t){const e=await atom.workspace.open(t.file,{initialLine:t.start.line-1,initialColumn:t.start.offset-1,searchAllPanes:!0});return atom.workspace.isTextEditor(e)&&e.scrollToCursorPosition({center:!0}),e}}class Da{constructor(t,e){this.getClient=t,this.editor=e,this.disposables=new y,this.occurrenceMarkers=[],this.disposed=!1;const n=dt.debounce((()=>{pt(this.update())}),100);this.disposables.add(e.onDidChangeCursorPosition(n),e.onDidChangePath(n),e.onDidChangeGrammar(n))}dispose(){this.disposed||(this.disposed=!0,this.disposables.dispose(),this.clearMarkers())}clearMarkers(){for(const t of this.occurrenceMarkers)t.destroy();this.occurrenceMarkers=[]}async update(){if(this.disposed)return;if(!Ot(this.editor))return void this.clearMarkers();const t=this.editor.getPath();if(void 0===t)return;const e=await this.getClient(t);if(this.disposed)return;const n=this.editor.getLastCursor().getBufferPosition();try{const r=await e.execute("documentHighlights",{file:t,line:n.row+1,offset:n.column+1,filesToSearch:[t]});if(this.disposed)return;const i=Array.from(this.getNewOccurrenceMarkers(r.body));for(const t of this.occurrenceMarkers)i.includes(t)||t.destroy();this.occurrenceMarkers=i}catch(t){window.atom_typescript_debug&&console.error(t)}}*getNewOccurrenceMarkers(t){for(const e of t)if(e.file===this.editor.getPath())for(const t of e.highlightSpans){const e=vt(t),n=this.occurrenceMarkers.find((t=>t.getBufferRange().isEqual(e)));if(n)yield n;else{const t=this.editor.markBufferRange(e);this.editor.decorateMarker(t,{type:"highlight",class:"atom-typescript-occurrence"}),yield t}}}}class La{constructor(t){this.disposables=new y,this.disposables.add(atom.workspace.observeTextEditors((e=>{const n=new Da(t,e);this.disposables.add(n,e.onDidDestroy((()=>{this.disposables.remove(n),n.dispose()})))})))}dispose(){this.disposables.dispose()}}function Fa(t,e,n,r){let i,o=n.right,s=!1,a="";t.style.left="",t.style.top="",t.style.right="",t.style.bottom="";const c=e.clientWidth,u=getComputedStyle(t),l=parseInt(u.width,10),f=parseInt(u.height,10);if(o+l>=c&&(o=c-l-10),o<0&&(a="pre-wrap",o=10,s=10),"bottom"===r){const t=e.clientHeight;i=n.bottom,i+f>=t&&(i=n.top-f)}else"top"===r&&(i=n.top-f,i<0&&(i=n.bottom));t.style.left=o+"px",t.style.top=i+"px",!1!==s&&(t.style.right=s+"px"),a&&(t.style.whiteSpace=a)}class Ma{constructor(t){this.parent=t,this.props={left:0,right:0,top:0,bottom:0},P.initialize(this)}async destroy(){return P.destroy(this)}async update(t){var e,n,r;void 0!==(null===(e=t.sigHelp)||void 0===e?void 0:e.selectedItemIndex)&&(null===(n=t.sigHelp)||void 0===n?void 0:n.selectedItemIndex)!==(null===(r=this.props.sigHelp)||void 0===r?void 0:r.selectedItemIndex)&&(this.props.visibleItem=void 0),this.props=Object.assign(Object.assign({},this.props),t),void 0===this.props.sigHelp?this.props.visibleItem=void 0:void 0!==this.props.visibleItem&&(this.props.visibleItem=this.props.visibleItem%this.props.sigHelp.items.length,this.props.visibleItem<0&&(this.props.visibleItem+=this.props.sigHelp.items.length)),await P.update(this)}writeAfterUpdate(){Fa(this.element,this.parent,this.props,atom.config.get("atom-typescript").sigHelpPosition)}render(){return P.dom("div",{className:"atom-typescript-tooltip tooltip",key:this.sigHelpHash()},P.dom("div",{className:"tooltip-inner"},this.tooltipContents()))}sigHelpHash(){if(!this.props.sigHelp)return;const{start:t,end:e}=this.props.sigHelp.applicableSpan;return`${t.line}:${t.offset}-${e.line}:${e.offset}`}tooltipContents(){if(!this.props.sigHelp)return"…";const{sigHelp:t}=this.props,e=void 0!==this.props.visibleItem?this.props.visibleItem:t.selectedItemIndex,n=t.items.length,r=["atom-typescript-tooltip-signature-help"];function i(n){const i=[];return n===t.selectedItemIndex&&i.push("atom-typescript-tooltip-signature-help-selected"),n===e&&i.push("atom-typescript-tooltip-signature-help-visible"),[...r,...i].join(" ")}return n>1&&r.push("atom-typescript-tooltip-signature-help-changable"),t.items.map(((e,n)=>P.dom("div",{className:i(n)},P.dom("div",null,St(e.prefixDisplayParts),this.renderSigHelpParams(e.parameters,t.argumentIndex),St(e.suffixDisplayParts),P.dom("div",{className:"atom-typescript-tooltip-signature-help-documentation"},St(e.documentation))))))}renderSigHelpParams(t,e){return t.map(((t,n)=>P.dom("span",{className:"atom-typescript-tooltip-signature-help-parameter"},n>0?", ":null,P.dom("span",{className:n===e?"atom-typescript-tooltip-signature-help-selected":void 0},St(t.displayParts)))))}}class Ra{constructor(t,e,n){this.deps=t,this.editor=e,this.cancelled=!1,this.disposables=new v.CompositeDisposable;const r=atom.views.getView(this.editor);this.view=new Ma(r),r.appendChild(this.view.element);const i=dt.debounce(this.updateTooltip.bind(this),100,{leading:!0});this.disposables.add(this.editor.onDidChangeCursorPosition((t=>{n=t.newBufferPosition,pt(i(n))})),r.onDidChangeScrollTop((()=>{setImmediate((()=>this.updateTooltipPosition(n)))})),r.onDidChangeScrollLeft((()=>{setImmediate((()=>this.updateTooltipPosition(n)))}))),pt(this.updateTooltip(n))}isDisposed(){return this.cancelled}dispose(){this.cancelled||(this.cancelled=!0,this.disposables.dispose(),pt(this.view.destroy()))}async rotateSigHelp(t){const{visibleItem:e,sigHelp:n}=this.view.props,r=void 0!==e?e:void 0!==(null==n?void 0:n.selectedItemIndex)?null==n?void 0:n.selectedItemIndex:0;await this.view.update({visibleItem:r+t})}async updateTooltip(t){if(this.cancelled)return;let e;try{e=this.computeTooltipPosition(t)}catch(t){return void console.warn(t)}const n=await this.getMessage(t);this.cancelled||(n?await this.view.update(Object.assign(Object.assign({},e),{sigHelp:n})):this.dispose())}updateTooltipPosition(t){if(this.cancelled)return;const e=this.computeTooltipPosition(t);pt(this.view.update(Object.assign({},e)))}computeTooltipPosition(t){const e=atom.views.getView(this.editor),n=e.pixelPositionForBufferPosition(t),r=e.querySelector(".lines").getBoundingClientRect(),i=this.editor.getLineHeightInPixels(),o=e.getBoundingClientRect(),s=n.top+r.top-o.top+i/2,a=n.left+r.left-o.left,c=.7*i;return{left:a,right:a,top:s-c,bottom:s+c}}async getMessage(t){if(!Ot(this.editor))return;const e=this.editor.getPath();if(void 0===e)return;const n=await this.deps.getClient(e);try{return(await n.execute("signatureHelp",{file:e,line:t.row+1,offset:t.column+1})).body}catch(t){return}}}class Ba{constructor(t){this.deps=t,this.subscriptions=new v.CompositeDisposable,this.editorMap=new WeakMap,this.stoppedChanging=t=>e=>{if(!atom.config.get("atom-typescript.sigHelpDisplayOnChange"))return;if(void 0===t.getPath())return;const n=t.getLastCursor().getBufferPosition(),[r]=e.changes.filter((t=>t.newRange.containsPoint(n)));r&&null!==r.newText.match(/[<(,]/)&&pt(this.showTooltip(t,n))},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=new v.CompositeDisposable;e.add(t.onDidDestroy((()=>{e.dispose(),this.subscriptions.remove(e);const n=this.editorMap.get(t);n&&n.dispose()})),t.onDidStopChanging(this.stoppedChanging(t))),this.subscriptions.add(e)})))}dispose(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=this.editorMap.get(t);e&&e.dispose()}}async showTooltipAt(t){const e=t.getLastCursor().getBufferPosition();return this.showTooltip(t,e)}rotateSigHelp(t,e){const n=this.editorMap.get(t);return!(!n||n.isDisposed())&&(pt(n.rotateSigHelp(e)),!0)}hideTooltipAt(t){const e=this.editorMap.get(t);return!(!e||e.isDisposed())&&(e.dispose(),!0)}async showTooltip(t,e){const n=this.editorMap.get(t);n&&!n.isDisposed()||this.editorMap.set(t,new Ra(this.deps,t,e))}}function za(t,e,n,r){const i=e=>{const i=e.target.closest(n);i&&t.contains(i)&&r(e)};return t.addEventListener(e,i),new _((()=>{t.removeEventListener(e,i)}))}class qa{constructor(){this.tooltip=null,this.props={left:0,right:0,top:0,bottom:0},P.initialize(this)}async destroy(){return P.destroy(this)}async update(t){this.props=Object.assign(Object.assign({},this.props),t),this.tooltip=await Xe(this.props.info,P,(t=>P.dom("div",{className:"atom-typescript-tooltip-tooltip-code"},t))),await P.update(this)}writeAfterUpdate(){Fa(this.element,document.body,this.props,atom.config.get("atom-typescript").tooltipPosition)}render(){return P.dom("div",{className:"atom-typescript-tooltip tooltip"},P.dom("div",{className:"tooltip-inner"},this.tooltip))}}class Ha{constructor(t,e,n,r){this.getClient=t,this.cancelled=!1,pt(this.initialize(e,n,r))}dispose(){this.cancelled=!0,this.view&&(pt(this.view.destroy()),this.view=void 0)}async initialize(t,e,n){const r=atom.views.getView(t);let i,o;try{i=r.pixelPositionForBufferPosition(n),o=r.pixelPositionForBufferPosition(n.traverse([0,1]))}catch(e){return void console.warn(e)}if(i.left>=o.left)return;const s=.7*t.getLineHeightInPixels(),a={left:e.clientX,right:e.clientX,top:e.clientY-s,bottom:e.clientY+s},c=await this.getMessage(t,n);this.cancelled||void 0!==c&&await this.showTooltip(a,c)}async getMessage(t,e){let n;const r=await this.getClient(t);if(!r)return;const i=t.getPath();try{if(void 0===i)return;n=await r.execute("quickinfo",{file:i,line:e.row+1,offset:e.column+1})}catch(t){return}return n.body}async showTooltip(t,e){this.view=new qa,document.body.appendChild(this.view.element),await this.view.update(Object.assign(Object.assign({},t),{info:e}))}}class Ua{constructor(t){this.getClientInternal=t,this.subscriptions=new v.CompositeDisposable,this.editorMap=new WeakMap,this.getClient=async t=>{const e=t.getPath();if(void 0!==e&&Ot(t)&&s.existsSync(e))return this.getClientInternal(e)},this.clearExprTypeTimeout=()=>{void 0!==this.exprTypeTimeout&&(clearTimeout(this.exprTypeTimeout),this.exprTypeTimeout=void 0),this.hideExpressionType()},this.trackMouseMovement=t=>{let e;return n=>{const r=function(t,e){const n=atom.views.getView(t).getComponent().screenPositionForMouseEvent(e);if(!isNaN(n.row)&&!isNaN(n.column))return t.bufferPositionForScreenPosition(n)}(t,n);r&&(e&&e.isEqual(r)&&this.pendingTooltip||(e=r,this.clearExprTypeTimeout(),this.exprTypeTimeout=window.setTimeout((()=>this.showExpressionType(t,n,r)),atom.config.get("atom-typescript").tooltipDelay)))}},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=atom.views.getView(t),n=e.querySelector(".lines");this.editorMap.set(t,{rawView:e,lines:n});const r=new v.CompositeDisposable;r.add(za(e,"mousemove",".scroll-view",this.trackMouseMovement(t)),za(e,"mouseout",".scroll-view",this.clearExprTypeTimeout),za(e,"keydown",".scroll-view",this.clearExprTypeTimeout),e.onDidChangeScrollTop(this.clearExprTypeTimeout),e.onDidChangeScrollLeft(this.clearExprTypeTimeout),t.onDidDestroy((()=>{r.dispose(),this.subscriptions.remove(r),this.clearExprTypeTimeout()}))),this.subscriptions.add(r)})))}dispose(){this.subscriptions.dispose(),this.clearExprTypeTimeout()}showExpressionAt(t){const e=t.getLastCursor().getBufferPosition(),n=atom.views.getView(t);let r;try{r=n.pixelPositionForBufferPosition(e)}catch(t){return void console.warn(t)}this.showExpressionType(t,this.mousePositionForPixelPosition(t,r),e)}mousePositionForPixelPosition(t,e){const n=atom.views.getView(t).querySelector(".lines").getBoundingClientRect();return{clientY:e.top+n.top+t.getLineHeightInPixels()/2,clientX:e.left+n.left}}showExpressionType(t,e,n){this.pendingTooltip&&this.pendingTooltip.dispose(),this.pendingTooltip=new Ha(this.getClient,t,e,n)}hideExpressionType(){this.pendingTooltip&&(this.pendingTooltip.dispose(),this.pendingTooltip=void 0)}}class Wa{constructor(t){this.getClient=t,this.subscriptions=new y;const e=atom.workspace.paneForURI("atom-typescript://semantic-view");e&&(this.view=e.itemForURI("atom-typescript://semantic-view")),this.view&&pt(this.view.setGetClient(this.getClient)),this.subscriptions.add(new _((()=>{this.view&&(atom.workspace.hide(this.view),pt(this.view.destroy()))})),atom.config.observe("atom-typescript.showSemanticView",(t=>{t?pt(this.show()):this.hide()})))}dispose(){this.subscriptions.dispose()}async toggle(){this.view?await atom.workspace.toggle(this.view):await this.show()}async show(){this.view||(this.view=Rt.create({navTree:null}),await this.view.setGetClient(this.getClient)),await atom.workspace.open(this.view,{searchAllPanes:!0})}hide(){return!!this.view&&atom.workspace.hide(this.view)}}class Va{constructor(t){this.position=t.position,this.name=t.name,this.type=t.type,this.parent=t.parent,this.file=t.file}static fromNavTree(t,e){const n=t.spans[0].start;return new Va({name:t.text,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null})}static fromNavto(t,e){const n=t.start;return new Va({name:t.name,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null,file:t.file})}}async function $a(t,e){const n=await async function(t,e){try{const n=await e.getClient(t);return(await n.execute("navtree",{file:t})).body}catch(e){console.error(t,e)}}(t,e);return n&&n.childItems?Array.from(Ka(n.childItems)):[]}async function Ga(t,e,n){const r=await async function(t,e,n){try{const r=await n.getClient(t);return(await r.execute("navto",{file:t,currentFileOnly:!1,searchValue:e,maxResultCount:1e3})).body}catch(e){console.error(t,e)}}(t,e,n);return r?Array.from(function*(t,e){for(const n of t)yield Va.fromNavto(n,e)}(r)):[]}function*Ka(t,e){t.sort(((t,e)=>t.spans[0].start.line-e.spans[0].start.line));for(const n of t){const t=Va.fromNavTree(n,e);yield t,n.childItems&&(yield*Ka(n.childItems,t))}}async function Qa(t,e,n){if(void 0!==t.file)return n(e,{file:t.file,start:{line:t.position.row+1,offset:t.position.column+1}})}async function Za(t,e){const n=t.getPath();if(void 0!==n){let r;atom.config.get("symbols-view.quickJumpToFileSymbol")&&(r=function(t){const e=atom.views.getView(t).getScrollTop();return{bufferRanges:t.getSelectedBufferRanges(),scrollTop:e}}(t));const i=await pr({items:$a(n,e),itemTemplate:({name:t,position:e},n)=>P.dom("li",{className:"two-lines"},P.dom("div",{className:"primary-line"},P.dom(_n,{label:t,query:n.getFilterQuery()})),P.dom("div",{className:"secondary-line"},"Line "+(e.row+1))),didChangeSelection(e){atom.config.get("symbols-view.quickJumpToFileSymbol")&&e&&t.setCursorBufferPosition(e.position)},itemFilterKey:"name"});i?await Qa(i,t,e.histGoForward):r&&function(t,{bufferRanges:e,scrollTop:n}){const r=atom.views.getView(t);t.setSelectedBufferRanges(e),r.setScrollTop(n)}(t,r)}}class Ja{constructor(t){this.deps=t}toggleFileView(t){pt(Za(t,this.deps))}toggleProjectView(t){pt(async function(t,e){const n=t.getPath();if(void 0!==n){const r=await pr({items:t=>Ga(n,t,e),itemTemplate({name:t,position:e,file:n},r){const i=atom.project.relativize(n);return P.dom("li",{className:"two-lines"},P.dom("div",{className:"primary-line"},P.dom(_n,{label:t,query:r.getFilterQuery()})),P.dom("div",{className:"secondary-line"},`File ${i} line ${e.row+1}`))},itemFilterKey:"name"});r&&await Qa(r,t,e.histGoForward)}}(t,this.deps))}dispose(){}}class Xa{constructor(){this.errors=new Map,this.fileGrammars=new Map,this.pushErrors=dt.debounce(this.pushErrors.bind(this),100)}*getErrorsInRange(t,e){for(const n of this.errors.values()){const r=n.get(d.normalize(t));r&&(yield*r.filter((t=>vt(t).intersectsWith(e))))}}*getErrorsAt(t,e){for(const n of this.errors.values()){const r=n.get(d.normalize(t));r&&(yield*r.filter((t=>vt(t).containsPoint(e))))}}setErrors(t,e,n){let r=this.errors.get(t);r||(r=new Map,this.errors.set(t,r)),r.set(d.normalize(e),n),this.pushErrors()}clearFileErrors(t){for(const e of this.errors.values())e.delete(t);this.pushErrors()}clear(){this.linter&&this.linter.clearMessages()}setLinter(t){this.linter=t,this.pushErrors()}dispose(){this.clear(),this.linter&&this.linter.dispose(),this.linter=void 0}pushErrors(){this.linter&&this.linter.setAllMessages(this.getLinterErrors())}getLinterErrors(){if(atom.config.get("atom-typescript.suppressAllDiagnostics"))return[];const t=[];for(const e of this.errors.values())for(const[n,r]of e){const e=atom.workspace.getTextEditors().find((t=>t.getPath()===n)),i=e?e.getGrammar().scopeName:this.selectGrammar(n);if(!Ya("suppressAllDiagnostics",i))for(const e of r){if(Ya("ignoredDiagnosticCodes",i).includes(""+e.code))continue;if(Ya("ignoreUnusedSuggestionDiagnostics",i)&&e.reportsUnnecessary)continue;if("suggestion"===e.category&&Ya("ignoredSuggestionDiagnostics",i).includes(""+e.code))continue;if(Ya("ignoreNonSuggestionSuggestionDiagnostics",i)&&"suggestion"===e.category&&!kt(e.code,gt.Suggestion))continue;let{start:r,end:o}=e;r&&o||(r=o={line:1,offset:1}),t.push({severity:this.getSeverity(Ya("unusedAsInfo",i),e),excerpt:e.text,location:{file:n,position:yt(r,o)}})}}return t}selectGrammar(t){const e=this.fileGrammars.get(t);if(void 0!==e)return e;const n=atom.grammars.selectGrammar(t,"").scopeName;return this.fileGrammars.set(t,n),n}getSeverity(t,e){if(t&&6133===e.code)return"info";switch(e.category){case"error":return"error";case"warning":return"warning";default:return"info"}}}function Ya(t,e){return atom.config.get("atom-typescript."+t,{scope:[e]})}class tc{constructor(t,e){this.buffer=t,this.deps=e,this.events=new v.Emitter,this.compileOnSave=!1,this.subscriptions=new v.CompositeDisposable,this.on=this.events.on.bind(this.events),this.dispose=()=>{this.subscriptions.dispose(),pt(this.close())},this.init=async()=>{this.state&&(await this.state.client.execute("open",{file:this.state.filePath,fileContent:this.buffer.getText()}),pt(this.getErr({allFiles:!1})))},this.close=async()=>{if(await this.openPromise,this.state){const t=this.state.client,e=this.state.filePath;this.deps.clearFileErrors(e),this.state.subscriptions.dispose(),this.state=void 0,await t.execute("close",{file:e})}},this.onDidChangePath=t=>{pt(this.close().then((()=>{this.openPromise=this.open(t)})))},this.onDidSave=async()=>{await Promise.all([this.getErr({allFiles:!0}),this.doCompileOnSave()])},this.onDidChangeText=async({changes:t})=>{if(0===t.length||!this.state)return;const{client:e,filePath:n}=this.state;await Promise.all(t.reduceRight(((t,{oldRange:r,newText:i})=>(t.push(e.execute("change",{file:n,line:r.start.row+1,offset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1,insertString:i})),t)),[]))},this.subscriptions.add(t.onDidChangePath(this.onDidChangePath),t.onDidDestroy(this.dispose),t.onDidSave((()=>{pt(this.onDidSave())})),t.onDidStopChanging((({changes:t})=>{pt(this.getErr({allFiles:!1})),t.length>0&&this.deps.reportBuildStatus(void 0)})),t.onDidChangeText((t=>{pt(this.onDidChangeText(t))}))),this.openPromise=this.open(this.buffer.getPath())}static create(t,e){const n=tc.bufferMap.get(t);if(n)return n;{const n=new tc(t,e);return tc.bufferMap.set(t,n),n}}getPath(){return this.state&&this.state.filePath}getInfo(){if(this.state)return{clientVersion:this.state.client.version,tsConfigPath:this.state.configFile&&this.state.configFile.getPath()}}async getErr({allFiles:t}){if(!this.state)return;const e=t?Array.from(function*(){for(const t of atom.workspace.getTextEditors())Ot(t)&&(yield t.getPath())}()):[this.state.filePath];await this.state.client.execute("geterr",{files:e,delay:100})}async compile(){if(!this.state)return;const{client:t,filePath:e}=this.state,n=await t.execute("compileOnSaveAffectedFileList",{file:e}),r=dt.flatten(n.body.map((t=>t.fileNames)));if(0===r.length)return;const i=r.map((e=>t.execute("compileOnSaveEmitFile",{file:e})));if(!(await Promise.all(i)).every((t=>!!t.body)))throw new Error("Some files failed to emit")}async doCompileOnSave(){if(this.compileOnSave){this.deps.reportBuildStatus(void 0);try{await this.compile(),this.deps.reportBuildStatus({success:!0})}catch(t){const e=t;console.error("Save failed with error",e),this.deps.reportBuildStatus({success:!1,message:e.message})}}}async open(t){if(void 0===t||!Et(t))return this.close();{const e=await this.deps.getClient(t);this.state={client:e,filePath:t,configFile:void 0,subscriptions:new v.CompositeDisposable},this.state.subscriptions.add(e.on("restarted",(()=>pt(this.init())))),await this.init();const n=await e.execute("projectInfo",{needFileNameList:!1,file:t});void 0!==n.body.configFileName&&(this.state.configFile=new v.File(n.body.configFileName),await this.readConfigFile(),this.state.subscriptions.add(this.state.configFile.onDidChange((()=>pt(this.readConfigFile()))))),this.events.emit("opened")}}async readConfigFile(){if(!this.state||!this.state.configFile)return;const t=bt(this.state.configFile.getPath());this.compileOnSave=t.compileOnSave,await this.state.client.execute("configure",{file:this.state.filePath,formatOptions:t.formatCodeOptions})}}tc.bufferMap=new WeakMap;class ec{constructor(t,e){this.editor=t,this.opts=e,this.subscriptions=new y,this.isTypescript=!1,this.destroy=()=>{atom.views.getView(this.editor).classList.remove("typescript-editor"),this.subscriptions.dispose()},this.didActivate=()=>{this.isTypescript&&this.reportInfo()},this.onOpened=()=>{atom.workspace.getActiveTextEditor()===this.editor&&this.reportInfo()},this.checkIfTypescript=()=>{this.isTypescript=Ot(this.editor),this.isTypescript?atom.views.getView(this.editor).classList.add("typescript-editor"):atom.views.getView(this.editor).classList.remove("typescript-editor")},this.buffer=tc.create(t.getBuffer(),e),this.subscriptions.add(this.buffer.on("opened",this.onOpened)),this.checkIfTypescript(),this.subscriptions.add(t.onDidChangePath(this.checkIfTypescript),t.onDidChangeGrammar(this.checkIfTypescript),t.onDidDestroy(this.destroy),t.onDidSave((()=>{atom.config.get("atom-typescript.checkAllFilesOnSave")&&atom.commands.dispatch(atom.views.getView(t),"typescript:check-all-files")})))}static createFactory(t){return e=>{let n=ec.editorMap.get(e);return n||(n=new ec(e,t),ec.editorMap.set(e,n)),n}}static lookupPane(t){return ec.editorMap.get(t)}reportInfo(){const t=this.buffer.getInfo();t&&this.opts.reportClientInfo(t)}}ec.editorMap=new WeakMap;class nc{constructor(t){this.usingBuiltinTooltipManager=!0,this.usingBuiltinSigHelpManager=!0,this.pending=new Set,this.clearErrors=()=>{this.errorPusher.clear()},this.clearFileErrors=t=>{this.errorPusher.clearFileErrors(t)},this.getClient=async t=>this.clientResolver.get(t),this.killAllServers=()=>{pt(this.clientResolver.restartAllServers())},this.withBuffer=async(t,e)=>{const n=d.normalize(t),r=atom.workspace.getTextEditors().find((t=>t.getPath()===n));if(r)return e(r.getBuffer());const i=await v.TextBuffer.load(n);try{return await e(i)}finally{i.isModified()&&await i.save(),i.destroy()}},this.reportBusyWhile=async(t,e)=>{if(this.busySignalService)return this.busySignalService.reportBusyWhile(t,e);{const n={title:t};try{return this.pending.add(n),this.drawPending(Array.from(this.pending)),await e()}finally{this.pending.delete(n),this.drawPending(Array.from(this.pending))}}},this.reportProgress=t=>{pt(this.statusPanel.update({progress:t}))},this.reportBuildStatus=t=>{pt(this.statusPanel.update({buildStatus:t}))},this.reportClientInfo=t=>{pt(this.statusPanel.update(t))},this.applyEdits=async t=>{Promise.all(t.map((t=>this.withBuffer(t.fileName,(async e=>{e.transact((()=>{const n=t.textChanges.map((t=>({range:vt(t),newText:t.newText}))).reverse().sort(((t,e)=>e.range.compare(t.range)));for(const t of n)e.setTextInRange(t.range,t.newText)}))})))))},this.showTooltipAt=async t=>{this.usingBuiltinTooltipManager?this.tooltipManager.showExpressionAt(t):await atom.commands.dispatch(atom.views.getView(t),"datatip:toggle")},this.showSigHelpAt=async t=>{this.usingBuiltinSigHelpManager?await this.sigHelpManager.showTooltipAt(t):await atom.commands.dispatch(atom.views.getView(t),"signature-help:show")},this.hideSigHelpAt=t=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.hideTooltipAt(t),this.rotateSigHelp=(t,e)=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.rotateSigHelp(t,e),this.histGoForward=(t,e)=>this.editorPosHist.goForward(t,e),this.drawPending=dt.throttle((t=>pt(this.statusPanel.update({pending:t}))),100,{leading:!1}),this.subscriptions=new y,this.clientResolver=new Ze(this.reportBusyWhile),this.subscriptions.add(this.clientResolver),this.statusPanel=new Ia,this.subscriptions.add(this.statusPanel),this.errorPusher=new Xa,this.subscriptions.add(this.errorPusher),this.codefixProvider=new Or(this.clientResolver,this.errorPusher,this.applyEdits),this.subscriptions.add(this.codefixProvider),this.semanticViewController=new Wa(this.getClient),this.subscriptions.add(this.semanticViewController),this.editorPosHist=new Na(t&&t.editorPosHistState),this.subscriptions.add(this.editorPosHist),this.symbolsViewController=new Ja({histGoForward:this.histGoForward,getClient:this.getClient}),this.subscriptions.add(this.symbolsViewController),this.tooltipManager=new Ua(this.getClient),this.subscriptions.add(this.tooltipManager),this.sigHelpManager=new Ba({getClient:this.getClient}),this.subscriptions.add(this.sigHelpManager),this.occurrenceManager=new La(this.getClient),this.subscriptions.add(this.occurrenceManager),this.typescriptPaneFactory=ec.createFactory({clearFileErrors:this.clearFileErrors,getClient:this.getClient,reportBuildStatus:this.reportBuildStatus,reportClientInfo:this.reportClientInfo}),this.subscribeEditors(),this.subscriptions.add(Oa({getClient:this.getClient,applyEdits:this.applyEdits,clearErrors:this.clearErrors,killAllServers:this.killAllServers,reportProgress:this.reportProgress,reportBuildStatus:this.reportBuildStatus,toggleSemanticViewController:()=>{pt(this.semanticViewController.toggle())},toggleFileSymbolsView:t=>{this.symbolsViewController.toggleFileView(t)},toggleProjectSymbolsView:t=>{this.symbolsViewController.toggleProjectView(t)},histGoForward:this.histGoForward,histGoBack:()=>this.editorPosHist.goBack(),histShowHistory:()=>this.editorPosHist.showHistory(),showTooltipAt:this.showTooltipAt,showSigHelpAt:this.showSigHelpAt,hideSigHelpAt:this.hideSigHelpAt,rotateSigHelp:this.rotateSigHelp}))}destroy(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=ec.lookupPane(t);e&&e.destroy()}}serialize(){return{version:"0.1",editorPosHistState:this.editorPosHist.serialize()}}consumeLinter(t){const e=t({name:"TypeScript"});this.errorPusher.setLinter(e),this.subscriptions.add(this.clientResolver.on("diagnostics",(({type:t,filePath:e,diagnostics:n})=>{this.errorPusher.setErrors(t,e,n)})))}consumeStatusBar(t){let e=100;for(const n of t.getRightTiles())"GRAMMAR-SELECTOR-STATUS"===atom.views.getView(n.getItem()).tagName&&(e=n.getPriority()-1);const n=t.addRightTile({item:this.statusPanel,priority:e}),r=new v.Disposable((()=>{n.destroy()}));return this.subscriptions.add(r),r}consumeDatatipService(t){if(atom.config.get("atom-typescript").preferBuiltinTooltips)return;const e=t.addProvider(new en(this.getClient));return this.subscriptions.add(e),this.tooltipManager.dispose(),this.usingBuiltinTooltipManager=!1,e}consumeSigHelpService(t){if(atom.config.get("atom-typescript").preferBuiltinSigHelp)return;const e=new wr(this.getClient),n=t(e);return this.subscriptions.add(n,e),this.sigHelpManager.dispose(),this.usingBuiltinSigHelpManager=!1,n}consumeBusySignal(t){if(atom.config.get("atom-typescript").preferBuiltinBusySignal)return;this.busySignalService=t;const e={dispose:()=>{this.busySignalService&&this.busySignalService.dispose(),this.busySignalService=void 0}};return this.subscriptions.add(e),e}provideAutocomplete(){return[new _r(this.getClient)]}provideIntentions(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async({bufferPosition:e,textEditor:n})=>(await t.runCodeFix(n,e)).map((e=>({priority:100,title:e.description,selected:()=>{pt(t.applyFix(e))}})))};var t}provideIntentionsHighlight(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async({visibleRange:e,textEditor:n})=>(await t.getFixableRanges(n,e)).map((t=>({range:t,created:t=>{}})))};var t}provideCodeActions(){return t=this.codefixProvider,{grammarScopes:Ct(),priority:0,getCodeActions:async(e,n,r)=>(await t.runCodeFix(e,n.start)).map((e=>({getTitle:async()=>e.description,dispose:()=>{},apply:async()=>{await t.applyFix(e)}})))};var t}provideHyperclick(){return t=this.getClient,e=this.histGoForward,{priority:0,providerName:"typescript-hyperclick-provider",wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,async getSuggestionForWord(n,r,i){if(!Ot(n))return;const o=n.getPath();return void 0!==o?{range:i,callback:async()=>{var r;const s={file:o,line:i.start.row+1,offset:i.start.column+1},a=await t(s.file),c=await a.execute("definition",s),u=c.body?c.body[0]:void 0;if(1===(null===(r=c.body)||void 0===r?void 0:r.length)&&(null==u?void 0:u.start.line)===s.line&&(null==u?void 0:u.start.offset)===s.offset){const t=await a.execute("references",s);await gr(t,n,e)}else await mr(c,n,e)}}:void 0}};var t,e}provideReferences(){return t=this.getClient,{isEditorSupported:async t=>Ot(t),async findReferences(e,n){const r=Pt(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("references",r);return o.body?{type:"data",baseUri:r.file,referencedSymbolName:o.body.symbolDisplayString,references:o.body.refs.map(on)}:void 0}};var t}provideOutlines(){return t=this.getClient,{name:"Atom-TypeScript",grammarScopes:Ct(),priority:100,updateOnEdit:!0,async getOutline(e){const n=e.getPath();if(void 0===n)return;const r=await t(n),i=(await r.execute("navtree",{file:n})).body;return i?{outlineTrees:[vr(i)]}:void 0}};var t}provideDefinitions(){var t;if(!atom.config.get("atom-typescript").disableAtomIdeDefinitions)return t=this.getClient,{priority:0,grammarScopes:Ct(),wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,async getDefinition(e,n){if(!Ot(e))return;const r=Pt(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("definition",r);return o.body&&0!==o.body.length?{queryRange:void 0,definitions:o.body.map(rn)}:void 0}}}provideCodeHighlight(){if(!atom.config.get("atom-typescript").preferBuiltinOccurrenceHighlight)return this.occurrenceManager.dispose(),Je(this.getClient)}subscribeEditors(){this.subscriptions.add(atom.workspace.observeTextEditors((t=>{this.typescriptPaneFactory(t)})),atom.workspace.onDidChangeActiveTextEditor((t=>{if(t&&Ot(t)){pt(this.statusPanel.show());const e=ec.lookupPane(t);e&&e.didActivate()}else pt(this.statusPanel.hide())})))}}let rc;var ic=x(P);exports.activate=function(t){ic.setScheduler(atom.views),rc=new nc(t),setImmediate((()=>pt(async function(){if(!["atom-ide-ui","linter","nuclide"].some((t=>atom.packages.isPackageLoaded(t)))){const t=await ht();await t.install("atom-typescript",!0)}}())))},exports.deactivate=function(){rc&&rc.destroy(),rc=void 0},exports.serialize=function(){return rc?rc.serialize():void 0},exports.deserializeSemanticView=function(t){return Rt.create(t.data)},exports.consumeLinter=function(t){if(rc)return rc.consumeLinter(t)},exports.consumeStatusBar=function(t){if(rc)return rc.consumeStatusBar(t)},exports.consumeDatatipService=function(t){if(rc)return rc.consumeDatatipService(t)},exports.consumeSignatureHelp=function(t){if(rc)return rc.consumeSigHelpService(t)},exports.consumeBusySignal=function(t){if(rc)return rc.consumeBusySignal(t)},exports.provideAutocomplete=function(){if(rc)return rc.provideAutocomplete()},exports.provideIntentions=function(){if(rc)return rc.provideIntentions()},exports.provideIntentionsHighlight=function(){if(rc)return rc.provideIntentionsHighlight()},exports.provideCodeActions=function(){if(rc)return rc.provideCodeActions()},exports.provideHyperclick=function(){if(rc)return rc.provideHyperclick()},exports.provideReferences=function(){if(rc)return rc.provideReferences()},exports.provideOutlines=function(){if(rc)return rc.provideOutlines()},exports.provideDefinitions=function(){if(rc)return rc.provideDefinitions()},exports.provideCodeHighlight=function(){if(rc)return rc.provideCodeHighlight()};
//# sourceMappingURL=atomts.js.map

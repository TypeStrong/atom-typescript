var t,e,n=require("crypto"),r=require("module"),i=require("events"),o=require("assert"),s=require("timers"),a=require("util"),c=require("stream"),u=c,l=c.Transform,f=T(require("typescript")),p=require("atom"),h=(t={},e=p,Object.keys(e).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t),d=p.CompositeDisposable,g=p.TextBuffer,m=p.Emitter,v=p.BufferedNodeProcess,y=(p.BufferedProcess,p.Disposable),w=require("path"),b=w,_=w.dirname,S=require("fs"),x=S,k=T(S),E=require("child_process"),C=require("os");function T(t){return t&&t.__esModule?t.default:t}var A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},P={};Object.defineProperty(P,"__esModule",{value:!0});var O=E,I=x,j=b;function N(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var L=N(C),F=N(I),D=N(j);const M=/\s+at.*(?:\(|\s)(.*)\)?/,R=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,B=void 0===L.default.homedir?"":L.default.homedir();class z extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e=(t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"==typeof t?Object.assign(new Error(t.message),t):new Error(t)))).map((t=>{return"string"==typeof t.stack?(t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""))((e=t.stack,n=Object.assign({pretty:!1},n),e.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(M);if(null===e||!e[1])return!0;const n=e[1];return!n.includes(".app/Contents/Resources/electron.asar")&&!n.includes(".app/Contents/Resources/default_app.asar")&&!R.test(n)})).filter((t=>""!==t.trim())).map((t=>n.pretty?t.replace(M,((t,e)=>t.replace(e,e.replace(B,"~")))):t)).join("\n"))):String(t);var e,n})).join("\n");e="\n"+((t,e=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},"string"!=typeof t)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if("number"!=typeof e)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if("string"!=typeof n.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(0===e)return t;const r=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(r,n.indent.repeat(e))})(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}var q=z;const H=(t,e,n)=>new Promise(((r,i)=>{if(n=Object.assign({concurrency:1/0},n),"function"!=typeof e)throw new TypeError("Mapper function is required");const{concurrency:o}=n;if(!("number"==typeof o&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);const s=[],a=t[Symbol.iterator]();let c=!1,u=!1,l=0,f=0;const p=()=>{if(c)return;const t=a.next(),n=f;if(f++,t.done)return u=!0,void(0===l&&r(s));l++,Promise.resolve(t.value).then((t=>e(t,n))).then((t=>{s[n]=t,l--,p()}),(t=>{c=!0,i(t)}))};for(let t=0;t<o&&(p(),!u);t++);}));var $=H,U=H;$.default=U;const V=async(t,e,n)=>(await $(t,((t,n)=>Promise.all([e(t,n),t])),n)).filter((t=>Boolean(t[0]))).map((t=>t[1]));var W=V,G=V;W.default=G;const K="undefined"!=typeof atom,Q="undefined"!=typeof atom&&(atom.inDevMode()||atom.inSpecMode());
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
var Z=/["'&<>]/,J=function(t){var e,n=""+t,r=Z.exec(n);if(!r)return n;var i="",o=0,s=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==o&&(i+=n.substring(s,o)),s=o+1,i+=e}return s!==o?i+n.substring(s,o):i};function Y(t,e,n){let r;const i=async function(t,e,n){const r=O.spawn(t,e,n),i=new Promise(((t,e)=>{const i={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",e),r.stdout&&r.stdout.on("data",(function(t){i.stdout.push(t),n.handleStdout&&n.handleStdout(t)})),r.stderr&&r.stderr.on("data",(function(t){i.stderr.push(t),n.handleStderr&&n.handleStderr(t)})),r.on("close",(e=>{let r=null;null!=i.stdout&&(r=null===n.encoding||"buffer"===n.encoding?Buffer.concat(i.stdout):i.stdout.join(""));let o=null;null!=i.stderr&&(o=null===n.encoding||"buffer"===n.encoding?Buffer.concat(i.stderr):i.stderr.join("")),t({exitCode:e,stdout:r,stderr:o})}))}));return n.handleChildProcess(r),i}(t,e,{...n,handleChildProcess(t){r=t}});return i.kill=function(t){return r.kill(t)},i}async function X(t){if(K){const e=await async function(t){var e;const n=atom.packages.getLoadedPackage(t.name);return null==n?null:null!==(e=n.metadata.version)&&void 0!==e?e:null}(t);if(e)return e}return async function(t){var e,n;const{directory:r}=t;if(null==r)return null;let i=null;try{i=JSON.parse(await F.default.promises.readFile(D.default.join(r,"package.json"),"utf8"))}catch(t){return null}return null!==(e=null===(n=i)||void 0===n?void 0:n.version)&&void 0!==e?e:null}(t)}const tt=K?async function(t){return atom.packages.resolvePackagePath(t)}:async function(t){var e;const n=D.default.join(null!==(e=process.env.ATOM_HOME)&&void 0!==e?e:D.default.join(L.default.homedir(),".atom"),"packages",t);try{return await F.default.promises.access(n,F.default.constants.R_OK),n}catch(t){return null}};function et(t,e){if(!t)throw new Error(null!=e?e:"Invariant violation")}async function nt(t){const e=await(K?async function(t){const e=atom.packages.getLoadedPackage(t),n=e&&e.metadata["package-deps"];return Array.isArray(n)?n:[]}(t):async function(t){let e=null;try{e=await F.default.promises.stat(t)}catch(t){}if(null==e||!e.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let n=null;try{const e=await F.default.promises.readFile(D.default.join(t,"package.json"),"utf8");n=JSON.parse(e)}catch(t){}const r=null==n||"object"!=typeof n?[]:n["package-deps"];return Array.isArray(r)?r:[]}(t));return Q&&(et(Array.isArray(e),`Dependencies for ${t} are not a valid array`),e.forEach(((e,n)=>{if(Array.isArray(e))e.forEach(((e,r)=>{const i=`Dependency#${n}#${r} for ${t} is invalid`;et("string"==typeof e.name&&e.name.length>0,i),et(null==e.minimumVersion||"string"==typeof e.minimumVersion&&e.minimumVersion.length>0,i)})),et(e.length>0,`Dependency#${n} for ${t} has no group items`);else{const r=`Dependency#${n} for ${t} is invalid`;et("string"==typeof e.name&&e.name.length>0,r),et(null==e.minimumVersion||"string"==typeof e.minimumVersion&&e.minimumVersion.length>0,r)}}))),e}async function rt(t){if(null==t.directory)return!0;if(null==t.minimumVersion)return!1;const e=await X(t);return null==e||1===function(t,e){for(var n=t.split("."),r=e.split("."),i=0;i<3;i++){var o=Number(n[i]),s=Number(r[i]);if(o>s)return 1;if(s>o)return-1;if(!isNaN(o)&&isNaN(s))return 1;if(isNaN(o)&&!isNaN(s))return-1}return 0}(t.minimumVersion,e)}const it=new Set(["✓","done"]),ot=/(?:Installing|Moving) (.*?) to .* (.*)/;let st=!0;const at=K?function({packageName:t,dependencies:e}){const n=[],r=atom.notifications.addInfo(`Installing ${t} dependencies`,{detail:"Installing "+e.map((t=>t.name)).join(", "),dismissable:!0}),i=document.createElement("progress");i.max=e.length,i.style.width="100%";try{var o;const t=atom.views.getView(r),e=null!==(o=null==t?void 0:t.element)&&void 0!==o?o:null;if(null==e)throw new Error("Unable to get notification element from view");const n=e.querySelector(".detail-content");if(null==n)throw new Error("Content detail container not found inside the notification");n.appendChild(i)}catch(t){console.error("[Package-Deps] Error during showing installation progress to user",t)}return{handleFailure({dependency:t,error:e}){var r;n.push(t.name),i.value+=1,console.error(`[Package-Deps] Unable to install ${t.name}, Error:`,null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:e)},handleDependencyInstalled(t){i.value+=1},handleComplete(){r.dismiss(),n.length>0?atom.notifications.addWarning(`Failed to install ${t} dependencies`,{detail:"These packages were not installed, check your console\nfor more info.\n"+n.join("\n"),dismissable:!0}):atom.notifications.addSuccess(`Installed ${t} dependencies`,{detail:"Installed "+e.map((t=>t.name)).join(", ")}),Promise.all(e.map((t=>n.includes(t.name)?null:atom.packages.activatePackage(t.name)))).catch((e=>{console.error("[Package-Deps] Error activating installed packages for "+t,e)}))}}}:function({dependencies:t}){let e=!1;return console.log("Installing dependencies:\n"+t.map((t=>"  - "+t.name)).join("\n")),{handleFailure({dependency:t,error:n}){var r;e=!0,console.error(`Unable to install ${t.name}, Error:`,null!==(r=null==n?void 0:n.stack)&&void 0!==r?r:n)},handleDependencyInstalled(t){console.log("Successfully installed",t.name)},handleComplete(){console.log("Installation complete"),e&&(process.exitCode=1)}}},ct=K?function({packageName:t,dependencies:e}){return new Promise((n=>{const r=e.filter((t=>!Array.isArray(t))),i=e.filter((t=>Array.isArray(t))),o=0===i.length,s=o?r.map((t=>t.name)).join(", "):"Something went wrong. Check your developer console",a=i.map((t=>t[0]));atom.packages.isPackageDisabled("notifications")&&console.warn("Enable notifications to install dependencies for "+t);const c=atom.notifications.addInfo(t+" needs to install dependencies",{dismissable:!0,icon:"cloud-download",detail:s,description:`Install dependenc${1===e.length?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{n(o?[]:r.concat(a)),c.dismiss()}},{text:"No Thanks",onDidClick:()=>{c.dismiss()}},{text:"Never",onDidClick:()=>{!function(t){var e;if(!K)return;const n=new Set(null!==(e=atom.config.get("atom-package-deps.ignored"))&&void 0!==e?e:[]);n.add(t),atom.config.set("atom-package-deps.ignored",Array.from(n))}(t),st&&(st=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),c.dismiss()}}]});if(c.onDidDismiss((()=>n([]))),!o)try{var u;const t=atom.views.getView(c),e=null!==(u=null==t?void 0:t.element)&&void 0!==u?u:null;if(null==e)throw new Error("Unable to get notification element from view");const n=e.querySelector(".detail-content");if(null==n)throw new Error("Content detail container not found inside the notification");if(n.innerHTML="",r.length>0){const t=document.createElement("div");t.innerHTML=`Packages without choices: <br /><ul><li>${r.map((t=>J(t.name))).join("</li><li>")}</li></ul>`,n.appendChild(t)}const o=document.createElement("div");o.innerHTML="Packages with choices:",n.appendChild(o);const s=document.createElement("ul");i.forEach(((t,e)=>{const n=document.createElement("li"),r=document.createElement("select");r.innerHTML=t.map((t=>`<option>${J(t.name)}</option>`)).join("\n"),r.addEventListener("change",(()=>{const n=t.find((t=>t.name===r.value));null!=n&&(a[e]=n)})),n.style.marginTop="5px",n.appendChild(r),s.appendChild(n)})),n.appendChild(s)}catch(t){console.error("[Package-Deps] Error during showing package choices to user",t)}}))}:async function({dependencies:t}){return t.map((t=>Array.isArray(t)?t[0]:t))};var ut=async function(t){if(et("string"==typeof t&&t.length>0,"[Package-Deps] Package name is required"),e=t,K&&(null!==(n=atom.config.get("atom-package-deps.ignored"))&&void 0!==n?n:[]).includes(e))return;var e,n;const r=await nt(t);if(0===r.length)return;const i=await Promise.all(r.map((async t=>Array.isArray(t)?Promise.all(t.map((async t=>({...t,directory:await tt(t.name)})))):{...t,directory:await tt(t.name)}))),o=await W(i,(async function(t){return Array.isArray(t)?(await Promise.all(t.map((t=>rt(t))))).every(Boolean):rt(t)}));if(0===o.length)return;const s=await ct({packageName:t,dependencies:o});if(0===s.length)return;const a=at({packageName:t,dependencies:s});await(async(t,e,{concurrency:n=1/0,stopOnError:r=!0}={})=>new Promise(((i,o)=>{if("function"!=typeof e)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(n)&&n!==1/0||!(n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const s=[],a=[],c=t[Symbol.iterator]();let u=!1,l=!1,f=0,p=0;const h=()=>{if(u)return;const t=c.next(),n=p;if(p++,t.done)return l=!0,void(0===f&&(r||0===a.length?i(s):o(new q(a))));f++,(async()=>{try{const r=await t.value;s[n]=await e(r,n),f--,h()}catch(t){r?(u=!0,o(t)):(a.push(t),f--,h())}})()};for(let t=0;t<n&&(h(),!l);t++);})))(s,(async function(t){try{await async function(t){const e=K?atom.packages.getApmPath():"apm",{stdout:n,stderr:r}=await Y(e,["install",t.name,"--production","--color","false"]),i=ot.exec(n.trim());if(null!=i&&it.has(i[2]))return;const o=new Error("Error installing dependency: "+t.name);throw o.stack=r.trim(),o}(t),a.handleDependencyInstalled(t)}catch(e){a.handleFailure({dependency:t,error:e})}}),{concurrency:2}),a.handleComplete()};P.install=ut;var lt,ft,pt={};ft={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var ht={};function dt(t,e,...n){let r=[];for(let t=0;t<n.length;){const e=n[t];switch(typeof e){case"string":case"number":n[t]={text:e},t++;break;case"object":Array.isArray(e)?n.splice(t,1,...e):e?(e.context||(r.push(e),e.ambiguous&&e.ambiguous.length&&(r=r.concat(e.ambiguous))),t++):n.splice(t,1);break;default:throw new Error("Invalid child node: "+e)}}if(e){for(const t in e){const n=ft[t];n&&(e.on||(e.on={}),e.on[n]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:n,ambiguous:r}}ht=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);const gt=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of gt)dt[t]=(e,...n)=>dt(t,e,...n);for(const t of ht)dt[t]=(e,...n)=>dt(t,e,...n);lt=dt;var mt,vt={},yt={};yt=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);var wt;function bt(t,e,n,r,i){if(n)for(var o in n)"ref"!==o&&"on"!==o&&(o in ft||i&&o in i||("dataset"===o?bt(t.dataset,null,n&&n.dataset,null,null):"innerHTML"!==o&&e&&ht.has(e.tag)?t.removeAttribute(yt.get(o)||o):(t[o]="",delete t[o])));if(i)for(var o in i)if("ref"!==o&&"on"!==o&&!(o in ft)){var s=n&&n[o],a=i[o];"dataset"===o?_t(t.dataset,s,a,!1):"style"===o&&"string"!=typeof a?("string"==typeof s&&(t.style="",s=null),_t(t.style,s,a,!0)):"attributes"===o?St(t,s,a):a!==s&&("innerHTML"!==o&&r&&ht.has(r.tag)?t.setAttribute(yt.get(o)||o,a):r&&"input"===r.tag&&"value"===o&&t[o]===a||(t[o]=a))}}function _t(t,e,n,r){if(e)for(var i in e)n&&i in n||(r?t[i]="":delete t[i]);if(n)for(var i in n){const r=e&&e[i],o=n[i];o!==r&&(t[i]=o)}}function St(t,e,n){if(e)for(var r in e)n&&r in n||t.removeAttribute(r);if(n)for(var r in n){const i=e&&e[r],o=n[r];o!==i&&t.setAttribute(r,o)}}function xt(t,e){let n;if(null!=t.text)n=document.createTextNode(t.text);else{const{tag:r,children:i}=t;let{props:o,context:s}=t;if(s&&(e={refs:s.refs,listenerContext:s}),"function"==typeof r){let s;o&&o.ref&&(s=o.ref);const a=new r(o||{},i);t.component=a,n=a.element,"function"==typeof s?s(a):e&&e.refs&&s&&(e.refs[s]=a)}else ht.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&kt(n,i,e),o&&mt(n,null,t,e)):(n=document.createElement(r),i&&kt(n,i,e),o&&mt(n,null,t,e))}return t.domNode=n,n}function kt(t,e,n){for(let r=0;r<e.length;r++)t.appendChild(xt(e[r],n))}wt=function(t,e,n,r){n!==e&&("function"==typeof e?e(null):e&&r[e]===t&&delete r[e],"function"==typeof n?n(t):n&&(r[n]=t))},mt=function(t,e,n,r){const i=e&&e.props,o=n.props;let s,a;r&&(s=r.refs,a=r.listenerContext),bt(t,e,i,n,o),s&&wt(t,i&&i.ref,o&&o.ref,s),function(t,e,n,r){const i=e&&e.props&&e.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=e&&e.boundListeners&&e.boundListeners[n]?e.boundListeners[n]:i[n],t.removeEventListener(n,r)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let n;n=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,n)}if(c){let e;r?(e=c.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,n,a)},vt=xt;var Et,Ct={};function Tt(t,e,n){const r=t.domNode;if(e===t)return r;if(Ot(t,e)){let i;return null!=e.text?(r.nodeValue=e.text,i=r):"function"==typeof e.tag?i=function(t,e,n){const{component:r,props:i}=t;let{props:o,children:s}=e;e.component=r;const a=n&&n.refs;a&&wt(r,i&&i.ref,o&&o.ref,a);return r.update(o||{},s),r.element}(t,e,n):(!function(t,e,n,r){var i,o=0,s=e.length-1,a=e[0],c=e[s],u=0,l=n.length-1,f=n[0],p=n[l];for(;o<=s&&u<=l;)if(a)if(c)if(Ot(a,f))Tt(a,f,r),a=e[++o],f=n[++u];else if(Ot(c,p))Tt(c,p,r),c=e[--s],p=n[--l];else if(Ot(a,p))Tt(a,p,r),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],p=n[--l];else if(Ot(c,f))Tt(c,f,r),t.insertBefore(c.domNode,a.domNode),c=e[--s],f=n[++u];else{i||(At.length>0?(i=At.pop()).clear():i=new Map,jt(i,e,o,s));var h=It(f),d=h?i.get(h):null;if(null==d)t.insertBefore(vt(f,r),a.domNode),f=n[++u];else{var g=e[d];Tt(g,f,r),e[d]=void 0,t.insertBefore(g.domNode,a.domNode),f=n[++u]}}else c=e[--s];else a=e[++o];if(o>s){var m=n[l+1]?n[l+1].domNode:null;for(let e=u;e<=l;e++)t.insertBefore(vt(n[e],r),m)}else if(u>l)for(let t=o;t<=s;t++){var v=e[t];v&&Pt(v,r&&r.refs)}i&&At.push(i)}(r,t.children,e.children,n),mt(r,t,e,n),i=r),e.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;Pt(t,n&&n.refs);const s=vt(e,n);return i&&i.insertBefore(s,o),e.domNode=s,s}}let At=[new Map,new Map,new Map,new Map];function Pt(t,e,n=!0){const{domNode:r,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)"function"==typeof a?a(null):e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if("function"==typeof a?a(null):e&&a&&e[a]===r&&delete e[a],o)for(let t=0;t<o.length;t++)Pt(o[t],e,!1);n&&r.remove()}function Ot(t,e){return It(t)===It(e)&&t.tag===e.tag}function It(t){return t.props?t.props.key:void 0}function jt(t,e,n,r){for(let i=n;i<=r;i++){const n=It(e[i]);n&&t.set(n,i)}return t}Ct=Tt;var Nt;Nt=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise((t=>{this.resolveNextUpdatePromise=t}))),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}};let Lt=null;var Ft=function(){return Lt||(Lt=new Nt),Lt};const Dt=new WeakSet;let Mt=0,Rt=0;function Bt(t){return null!=t&&!1!==t}function zt(t,e){e.context=t,e.ambiguous&&(e.ambiguous.forEach((e=>{e.context=t})),delete e.ambiguous)}function qt(t,e=!0){if(!Bt(t.virtualNode))throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==t.element)throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a DOM element. Perhaps this component was never initialized?");let n=t.render();if(!Bt(n)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+e)}zt(t,n),Mt++;let r=t.virtualNode,i=t.element,o=Ct(r,n,{refs:t.refs,listenerContext:t});if(t.virtualNode=n,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&Ft().readDocument((function(){t.readAfterUpdate()})),Mt--}function Ht(t,e=!0){Rt++,$t(t.virtualNode),1===Rt&&e&&t.element.remove(),Rt--}function $t(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach($t)}Et={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!Bt(e)){let n=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+n)}zt(t,e),t.refs={},t.virtualNode=e,t.element=vt(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(Mt>0)return qt(t,e),Promise.resolve();let n=Ft();return Dt.has(t)||(Dt.add(t),n.updateDocument((function(){Dt.delete(t),qt(t,e)}))),n.getNextUpdatePromise()},updateSync:qt,destroy:function(t,e=!0){if(Mt>0||Rt>0)return Ht(t,e),Promise.resolve();let n=Ft();return n.updateDocument((function(){Ht(t,e)})),n.getNextUpdatePromise()},destroySync:Ht};const{initialize:Ut,update:Vt,updateSync:Wt,destroy:Gt,destroySync:Kt}=Et;function Qt(t){void 0!==t&&("function"==typeof t.catch?t.catch((t=>{atom.notifications.addFatalError("Atom-Typescript error: "+t.message,{detail:t.toString(),stack:t.stack,dismissable:!0})})):atom.notifications.addFatalError("Atom-Typescript: non-promise passed to handlePromise. Please report this.",{stack:(new Error).stack,dismissable:!0}))}pt={dom:lt,render:vt,initialize:Ut,update:Vt,updateSync:Wt,destroy:Gt,destroySync:Kt,setScheduler:function(t){Lt=t},getScheduler:Ft};var Zt,Jt=function(){var t=this,e={exports:this};return function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,a=32,c=64,u=128,l=256,f=1/0,p=9007199254740991,h=NaN,d=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",a],["partialRight",c],["rearg",l]],m="[object Arguments]",v="[object Array]",y="[object Boolean]",w="[object Date]",b="[object Error]",_="[object Function]",S="[object GeneratorFunction]",x="[object Map]",k="[object Number]",E="[object Object]",C="[object Promise]",T="[object RegExp]",P="[object Set]",O="[object String]",I="[object Symbol]",j="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",F="[object Float32Array]",D="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",B="[object Int32Array]",z="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",$="[object Uint32Array]",U=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Q=RegExp(G.source),Z=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),ot=/^\s+/,st=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,pt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,St=/['\n\r\u2028\u2029\\]/g,xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="['’]",Ot="[\\ud800-\\udfff]",It="["+At+"]",jt="["+xt+"]",Nt="\\d+",Lt="[\\u2700-\\u27bf]",Ft="["+Et+"]",Dt="[^\\ud800-\\udfff"+At+Nt+kt+Et+Ct+"]",Mt="\\ud83c[\\udffb-\\udfff]",Rt="[^\\ud800-\\udfff]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="["+Ct+"]",Ht="(?:"+Ft+"|"+Dt+")",$t="(?:"+qt+"|"+Dt+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",Vt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+jt+"|"+Mt+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Kt=Gt+Wt+("(?:\\u200d(?:"+[Rt,Bt,zt].join("|")+")"+Gt+Wt+")*"),Qt="(?:"+[Lt,Bt,zt].join("|")+")"+Kt,Zt="(?:"+[Rt+jt+"?",jt,Bt,zt,Ot].join("|")+")",Jt=RegExp(Pt,"g"),Yt=RegExp(jt,"g"),Xt=RegExp(Mt+"(?="+Mt+")|"+Zt+Kt,"g"),te=RegExp([qt+"?"+Ft+"+"+Ut+"(?="+[It,qt,"$"].join("|")+")",$t+"+"+Vt+"(?="+[It,qt+Ht,"$"].join("|")+")",qt+"?"+Ht+"+"+Ut,qt+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt,Qt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+xt+Tt+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[F]=oe[D]=oe[M]=oe[R]=oe[B]=oe[z]=oe[q]=oe[H]=oe[$]=!0,oe[m]=oe[v]=oe[N]=oe[y]=oe[L]=oe[w]=oe[b]=oe[_]=oe[x]=oe[k]=oe[E]=oe[T]=oe[P]=oe[O]=oe[j]=!1;var se={};se[m]=se[v]=se[N]=se[L]=se[y]=se[w]=se[F]=se[D]=se[M]=se[R]=se[B]=se[x]=se[k]=se[E]=se[T]=se[P]=se[O]=se[I]=se[z]=se[q]=se[H]=se[$]=!0,se[b]=se[_]=se[j]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,ue=parseInt,le="object"==typeof A&&A&&A.Object===Object&&A,fe="object"==typeof self&&self&&self.Object===Object&&self,pe=le||fe||Function("return this")(),he="object"==typeof t&&t&&!t.nodeType&&t,de=he&&"object"==typeof e&&e&&!e.nodeType&&e,ge=de&&de.exports===he,me=ge&&le.process,ve=function(){try{var t=de&&de.require&&de.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}(),ye=ve&&ve.isArrayBuffer,we=ve&&ve.isDate,be=ve&&ve.isMap,_e=ve&&ve.isRegExp,Se=ve&&ve.isSet,xe=ve&&ve.isTypedArray;function ke(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Oe(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Ie(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Le(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Fe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function De(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Me=Ue("length");function Re(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ze(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,He,n)}function qe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function He(t){return t!=t}function $e(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:h}function Ue(t){return function(e){return null==e?n:e[t]}}function Ve(t){return function(e){return null==t?n:t[e]}}function We(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ge(t,e){for(var r,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==n&&(r=r===n?s:r+s)}return r}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return t?t.slice(0,dn(t)+1).replace(ot,""):t}function Ze(t){return function(e){return t(e)}}function Je(t,e){return je(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&ze(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=Ve({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ae[t]}function sn(t){return ee.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var a=t[n];a!==e&&a!==o||(t[n]=o,s[i++]=n)}return s}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return sn(t)?function(t){var e=Xt.lastIndex=0;for(;Xt.test(t);)++e;return e}(t):Me(t)}function hn(t){return sn(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var gn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var A,st=(e=null==e?pe:mn.defaults(pe.Object(),e,mn.pick(pe,re))).Array,xt=e.Date,kt=e.Error,Et=e.Function,Ct=e.Math,Tt=e.Object,At=e.RegExp,Pt=e.String,Ot=e.TypeError,It=st.prototype,jt=Et.prototype,Nt=Tt.prototype,Lt=e["__core-js_shared__"],Ft=jt.toString,Dt=Nt.hasOwnProperty,Mt=0,Rt=(A=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",Bt=Nt.toString,zt=Ft.call(Tt),qt=pe._,Ht=At("^"+Ft.call(Dt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=ge?e.Buffer:n,Ut=e.Symbol,Vt=e.Uint8Array,Wt=$t?$t.allocUnsafe:n,Gt=cn(Tt.getPrototypeOf,Tt),Kt=Tt.create,Qt=Nt.propertyIsEnumerable,Zt=It.splice,Xt=Ut?Ut.isConcatSpreadable:n,ee=Ut?Ut.iterator:n,ae=Ut?Ut.toStringTag:n,le=function(){try{var t=ho(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),fe=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,he=xt&&xt.now!==pe.Date.now&&xt.now,de=e.setTimeout!==pe.setTimeout&&e.setTimeout,me=Ct.ceil,ve=Ct.floor,Me=Tt.getOwnPropertySymbols,Ve=$t?$t.isBuffer:n,vn=e.isFinite,yn=It.join,wn=cn(Tt.keys,Tt),bn=Ct.max,_n=Ct.min,Sn=xt.now,xn=e.parseInt,kn=Ct.random,En=It.reverse,Cn=ho(e,"DataView"),Tn=ho(e,"Map"),An=ho(e,"Promise"),Pn=ho(e,"Set"),On=ho(e,"WeakMap"),In=ho(Tt,"create"),jn=On&&new On,Nn={},Ln=qo(Cn),Fn=qo(Tn),Dn=qo(An),Mn=qo(Pn),Rn=qo(On),Bn=Ut?Ut.prototype:n,zn=Bn?Bn.valueOf:n,qn=Bn?Bn.toString:n;function Hn(t){if(ia(t)&&!Gs(t)&&!(t instanceof Wn)){if(t instanceof Vn)return t;if(Dt.call(t,"__wrapped__"))return Ho(t)}return new Vn(t)}var $n=function(){function t(){}return function(e){if(!ra(e))return{};if(Kt)return Kt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Un(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Qn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Kn(t);this.size=e.size}function Yn(t,e){var n=Gs(t),r=!n&&Ws(t),i=!n&&!r&&Js(t),o=!n&&!r&&!i&&pa(t),s=n||r||i||o,a=s?Ke(t.length,Pt):[],c=a.length;for(var u in t)!e&&!Dt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_o(u,c))||a.push(u);return a}function Xn(t){var e=t.length;return e?t[Zr(0,e-1)]:n}function tr(t,e){return Ro(Ii(t),ur(e,0,t.length))}function er(t){return Ro(Ii(t))}function nr(t,e,r){(r!==n&&!$s(t[e],r)||r===n&&!(e in t))&&ar(t,e,r)}function rr(t,e,r){var i=t[e];Dt.call(t,e)&&$s(i,r)&&(r!==n||e in t)||ar(t,e,r)}function ir(t,e){for(var n=t.length;n--;)if($s(t[n][0],e))return n;return-1}function or(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function sr(t,e){return t&&ji(e,La(e),t)}function ar(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function cr(t,e){for(var r=-1,i=e.length,o=st(i),s=null==t;++r<i;)o[r]=s?n:Pa(t,e[r]);return o}function ur(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function lr(t,e,r,i,o,s){var a,c=1&e,u=2&e,l=4&e;if(r&&(a=o?r(t,i,o,s):r(t)),a!==n)return a;if(!ra(t))return t;var f=Gs(t);if(f){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Ii(t,a)}else{var p=vo(t),h=p==_||p==S;if(Js(t))return Ei(t,c);if(p==E||p==m||h&&!o){if(a=u||h?{}:wo(t),!c)return u?function(t,e){return ji(t,mo(t),e)}(t,function(t,e){return t&&ji(e,Fa(e),t)}(a,t)):function(t,e){return ji(t,go(t),e)}(t,sr(a,t))}else{if(!se[p])return o?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case N:return Ci(t);case y:case w:return new r(+t);case L:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case F:case D:case M:case R:case B:case z:case q:case H:case $:return Ti(t,n);case x:return new r;case k:case O:return new r(t);case T:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new r;case I:return i=t,zn?Tt(zn.call(i)):{}}var i}(t,p,c)}}s||(s=new Jn);var d=s.get(t);if(d)return d;s.set(t,a),ua(t)?t.forEach((function(n){a.add(lr(n,e,r,n,t,s))})):oa(t)&&t.forEach((function(n,i){a.set(i,lr(n,e,r,i,t,s))}));var g=f?n:(l?u?so:oo:u?Fa:La)(t);return Ce(g||t,(function(n,i){g&&(n=t[i=n]),rr(a,i,lr(n,e,r,i,t,s))})),a}function fr(t,e,r){var i=r.length;if(null==t)return!i;for(t=Tt(t);i--;){var o=r[i],s=e[o],a=t[o];if(a===n&&!(o in t)||!s(a))return!1}return!0}function pr(t,e,i){if("function"!=typeof t)throw new Ot(r);return Lo((function(){t.apply(n,i)}),e)}function hr(t,e,n,r){var i=-1,o=Oe,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=je(e,Ze(n))),r?(o=Ie,s=!1):e.length>=200&&(o=Ye,s=!1,e=new Zn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,s&&f==f){for(var p=u;p--;)if(e[p]===f)continue t;c.push(l)}else o(e,f,r)||c.push(l)}return c}Hn.templateSettings={escape:J,evaluate:Y,interpolate:X,variable:"",imports:{_:Hn}},Hn.prototype=Un.prototype,Hn.prototype.constructor=Hn,Vn.prototype=$n(Un.prototype),Vn.prototype.constructor=Vn,Wn.prototype=$n(Un.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(In){var r=e[t];return r===i?n:r}return Dt.call(e,t)?e[t]:n},Gn.prototype.has=function(t){var e=this.__data__;return In?e[t]!==n:Dt.call(e,t)},Gn.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=In&&e===n?i:e,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=ir(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},Kn.prototype.get=function(t){var e=this.__data__,r=ir(e,t);return r<0?n:e[r][1]},Kn.prototype.has=function(t){return ir(this.__data__,t)>-1},Kn.prototype.set=function(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Tn||Kn),string:new Gn}},Qn.prototype.delete=function(t){var e=fo(this,t).delete(t);return this.size-=e?1:0,e},Qn.prototype.get=function(t){return fo(this,t).get(t)},Qn.prototype.has=function(t){return fo(this,t).has(t)},Qn.prototype.set=function(t,e){var n=fo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,i),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qn(r)}return n.set(t,e),this.size=n.size,this};var dr=Fi(Sr),gr=Fi(xr,!0);function mr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function vr(t,e,r){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(c===n?a==a&&!fa(a):r(a,c)))var c=a,u=s}return u}function yr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function wr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=bo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?wr(a,e-1,n,r,i):Ne(i,a):r||(i[i.length]=a)}return i}var br=Di(),_r=Di(!0);function Sr(t,e){return t&&br(t,e,La)}function xr(t,e){return t&&_r(t,e,La)}function kr(t,e){return Pe(e,(function(e){return ta(t[e])}))}function Er(t,e){for(var r=0,i=(e=_i(e,t)).length;null!=t&&r<i;)t=t[zo(e[r++])];return r&&r==i?t:n}function Cr(t,e,n){var r=e(t);return Gs(t)?r:Ne(r,n(t))}function Tr(t){return null==t?t===n?"[object Undefined]":"[object Null]":ae&&ae in Tt(t)?function(t){var e=Dt.call(t,ae),r=t[ae];try{t[ae]=n;var i=!0}catch(t){}var o=Bt.call(t);i&&(e?t[ae]=r:delete t[ae]);return o}(t):function(t){return Bt.call(t)}(t)}function Ar(t,e){return t>e}function Pr(t,e){return null!=t&&Dt.call(t,e)}function Or(t,e){return null!=t&&e in Tt(t)}function Ir(t,e,r){for(var i=r?Ie:Oe,o=t[0].length,s=t.length,a=s,c=st(s),u=1/0,l=[];a--;){var f=t[a];a&&e&&(f=je(f,Ze(e))),u=_n(f.length,u),c[a]=!r&&(e||o>=120&&f.length>=120)?new Zn(a&&f):n}f=t[0];var p=-1,h=c[0];t:for(;++p<o&&l.length<u;){var d=f[p],g=e?e(d):d;if(d=r||0!==d?d:0,!(h?Ye(h,g):i(l,g,r))){for(a=s;--a;){var m=c[a];if(!(m?Ye(m,g):i(t[a],g,r)))continue t}h&&h.push(g),l.push(d)}}return l}function jr(t,e,r){var i=null==(t=Oo(t,e=_i(e,t)))?t:t[zo(Xo(e))];return null==i?n:ke(i,t,r)}function Nr(t){return ia(t)&&Tr(t)==m}function Lr(t,e,r,i,o){return t===e||(null==t||null==e||!ia(t)&&!ia(e)?t!=t&&e!=e:function(t,e,r,i,o,s){var a=Gs(t),c=Gs(e),u=a?v:vo(t),l=c?v:vo(e),f=(u=u==m?E:u)==E,p=(l=l==m?E:l)==E,h=u==l;if(h&&Js(t)){if(!Js(e))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new Jn),a||pa(t)?ro(t,e,r,i,o,s):function(t,e,n,r,i,o,s){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case y:case w:case k:return $s(+t,+e);case b:return t.name==e.name&&t.message==e.message;case T:case O:return t==e+"";case x:var a=an;case P:var c=1&r;if(a||(a=ln),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var l=ro(a(t),a(e),r,i,o,s);return s.delete(t),l;case I:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,u,r,i,o,s);if(!(1&r)){var d=f&&Dt.call(t,"__wrapped__"),g=p&&Dt.call(e,"__wrapped__");if(d||g){var _=d?t.value():t,S=g?e.value():e;return s||(s=new Jn),o(_,S,r,i,s)}}if(!h)return!1;return s||(s=new Jn),function(t,e,r,i,o,s){var a=1&r,c=oo(t),u=c.length,l=oo(e).length;if(u!=l&&!a)return!1;var f=u;for(;f--;){var p=c[f];if(!(a?p in e:Dt.call(e,p)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var g=!0;s.set(t,e),s.set(e,t);var m=a;for(;++f<u;){var v=t[p=c[f]],y=e[p];if(i)var w=a?i(y,v,p,e,t,s):i(v,y,p,t,e,s);if(!(w===n?v===y||o(v,y,r,i,s):w)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(g=!1)}return s.delete(t),s.delete(e),g}(t,e,r,i,o,s)}(t,e,r,i,Lr,o))}function Fr(t,e,r,i){var o=r.length,s=o,a=!i;if(null==t)return!s;for(t=Tt(t);o--;){var c=r[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var u=(c=r[o])[0],l=t[u],f=c[1];if(a&&c[2]){if(l===n&&!(u in t))return!1}else{var p=new Jn;if(i)var h=i(l,f,u,t,e,p);if(!(h===n?Lr(f,l,3,i,p):h))return!1}}return!0}function Dr(t){return!(!ra(t)||(e=t,Rt&&Rt in e))&&(ta(t)?Ht:vt).test(qo(t));var e}function Mr(t){return"function"==typeof t?t:null==t?sc:"object"==typeof t?Gs(t)?$r(t[0],t[1]):Hr(t):gc(t)}function Rr(t){if(!Co(t))return wn(t);var e=[];for(var n in Tt(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Br(t){if(!ra(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}function zr(t,e){return t<e}function qr(t,e){var n=-1,r=Qs(t)?st(t.length):[];return dr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Hr(t){var e=po(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Fr(n,t,e)}}function $r(t,e){return xo(t)&&To(e)?Ao(zo(t),e):function(r){var i=Pa(r,t);return i===n&&i===e?Oa(r,t):Lr(e,i,3)}}function Ur(t,e,r,i,o){t!==e&&br(e,(function(s,a){if(o||(o=new Jn),ra(s))!function(t,e,r,i,o,s,a){var c=jo(t,r),u=jo(e,r),l=a.get(u);if(l)return void nr(t,r,l);var f=s?s(c,u,r+"",t,e,a):n,p=f===n;if(p){var h=Gs(u),d=!h&&Js(u),g=!h&&!d&&pa(u);f=u,h||d||g?Gs(c)?f=c:Zs(c)?f=Ii(c):d?(p=!1,f=Ei(u,!0)):g?(p=!1,f=Ti(u,!0)):f=[]:aa(u)||Ws(u)?(f=c,Ws(c)?f=ba(c):ra(c)&&!ta(c)||(f=wo(u))):p=!1}p&&(a.set(u,f),o(f,u,i,s,a),a.delete(u));nr(t,r,f)}(t,e,a,r,Ur,i,o);else{var c=i?i(jo(t,a),s,a+"",t,e,o):n;c===n&&(c=s),nr(t,a,c)}}),Fa)}function Vr(t,e){var r=t.length;if(r)return _o(e+=e<0?r:0,r)?t[e]:n}function Wr(t,e,n){e=e.length?je(e,(function(t){return Gs(t)?function(e){return Er(e,1===t.length?t[0]:t)}:t})):[sc];var r=-1;return e=je(e,Ze(lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(qr(t,(function(t,n,i){return{criteria:je(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var c=Ai(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Er(t,s);n(a,s)&&ei(o,_i(s,t),a)}return o}function Kr(t,e,n,r){var i=r?qe:ze,o=-1,s=e.length,a=t;for(t===e&&(e=Ii(e)),n&&(a=je(t,Ze(n)));++o<s;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==t&&Zt.call(a,c,1),Zt.call(t,c,1);return t}function Qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;_o(i)?Zt.call(t,i,1):hi(t,i)}}return t}function Zr(t,e){return t+ve(kn()*(e-t+1))}function Jr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ve(e/2))&&(t+=t)}while(e);return n}function Yr(t,e){return Fo(Po(t,e,sc),t+"")}function Xr(t){return Xn($a(t))}function ti(t,e){var n=$a(t);return Ro(n,ur(e,0,n.length))}function ei(t,e,r,i){if(!ra(t))return t;for(var o=-1,s=(e=_i(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var u=zo(e[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var f=c[u];(l=i?i(f,u,c):n)===n&&(l=ra(f)?f:_o(e[o+1])?[]:{})}rr(c,u,l),c=c[u]}return t}var ni=jn?function(t,e){return jn.set(t,e),t}:sc,ri=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:rc(e),writable:!0})}:sc;function ii(t){return Ro($a(t))}function oi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=st(i);++r<i;)o[r]=t[r+e];return o}function si(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!fa(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ci(t,e,sc,n)}function ci(t,e,r,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=r(e))!=e,c=null===e,u=fa(e),l=e===n;o<s;){var f=ve((o+s)/2),p=r(t[f]),h=p!==n,d=null===p,g=p==p,m=fa(p);if(a)var v=i||g;else v=l?g&&(i||h):c?g&&h&&(i||!d):u?g&&h&&!d&&(i||!m):!d&&!m&&(i?p<=e:p<e);v?o=f+1:s=f}return _n(s,4294967294)}function ui(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!$s(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function li(t){return"number"==typeof t?t:fa(t)?h:+t}function fi(t){if("string"==typeof t)return t;if(Gs(t))return je(t,fi)+"";if(fa(t))return qn?qn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pi(t,e,n){var r=-1,i=Oe,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=Ie;else if(o>=200){var u=e?null:Ji(t);if(u)return ln(u);s=!1,i=Ye,c=new Zn}else c=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,s&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue t;e&&c.push(f),a.push(l)}else i(c,f,n)||(c!==a&&c.push(f),a.push(l))}return a}function hi(t,e){return null==(t=Oo(t,e=_i(e,t)))||delete t[zo(Xo(e))]}function di(t,e,n,r){return ei(t,e,n(Er(t,e)),r)}function gi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?oi(t,r?0:o,r?o+1:i):oi(t,r?o+1:0,r?i:o)}function mi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function vi(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=st(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=hr(o[i]||s,t[a],e,n));return pi(wr(o,1),e,n)}function yi(t,e,r){for(var i=-1,o=t.length,s=e.length,a={};++i<o;){var c=i<s?e[i]:n;r(a,t[i],c)}return a}function wi(t){return Zs(t)?t:[]}function bi(t){return"function"==typeof t?t:sc}function _i(t,e){return Gs(t)?t:xo(t,e)?[t]:Bo(_a(t))}var Si=Yr;function xi(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:oi(t,e,r)}var ki=fe||function(t){return pe.clearTimeout(t)};function Ei(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Ti(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var r=t!==n,i=null===t,o=t==t,s=fa(t),a=e!==n,c=null===e,u=e==e,l=fa(e);if(!c&&!l&&!s&&t>e||s&&a&&u&&!c&&!l||i&&a&&u||!r&&u||!o)return 1;if(!i&&!s&&!l&&t<e||l&&r&&o&&!i&&!s||c&&r&&o||!a&&o||!u)return-1}return 0}function Pi(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,c=e.length,u=bn(o-s,0),l=st(c+u),f=!r;++a<c;)l[a]=e[a];for(;++i<s;)(f||i<o)&&(l[n[i]]=t[i]);for(;u--;)l[a++]=t[i++];return l}function Oi(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,c=-1,u=e.length,l=bn(o-a,0),f=st(l+u),p=!r;++i<l;)f[i]=t[i];for(var h=i;++c<u;)f[h+c]=e[c];for(;++s<a;)(p||i<o)&&(f[h+n[s]]=t[i++]);return f}function Ii(t,e){var n=-1,r=t.length;for(e||(e=st(r));++n<r;)e[n]=t[n];return e}function ji(t,e,r,i){var o=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var c=e[s],u=i?i(r[c],t[c],c,r,t):n;u===n&&(u=t[c]),o?ar(r,c,u):rr(r,c,u)}return r}function Ni(t,e){return function(n,r){var i=Gs(n)?Ee:or,o=e?e():{};return i(n,t,lo(r,2),o)}}function Li(t){return Yr((function(e,r){var i=-1,o=r.length,s=o>1?r[o-1]:n,a=o>2?r[2]:n;for(s=t.length>3&&"function"==typeof s?(o--,s):n,a&&So(r[0],r[1],a)&&(s=o<3?n:s,o=1),e=Tt(e);++i<o;){var c=r[i];c&&t(e,c,i,s)}return e}))}function Fi(t,e){return function(n,r){if(null==n)return n;if(!Qs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Tt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=Tt(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function Mi(t){return function(e){var r=sn(e=_a(e))?hn(e):n,i=r?r[0]:e.charAt(0),o=r?xi(r,1).join(""):e.slice(1);return i[t]()+o}}function Ri(t){return function(e){return Le(tc(Wa(e).replace(Jt,"")),t,"")}}function Bi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=$n(t.prototype),r=t.apply(n,e);return ra(r)?r:n}}function zi(t){return function(e,r,i){var o=Tt(e);if(!Qs(e)){var s=lo(r,3);e=La(e),r=function(t){return s(o[t],t,o)}}var a=t(e,r,i);return a>-1?o[s?e[a]:a]:n}}function qi(t){return io((function(e){var i=e.length,o=i,s=Vn.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new Ot(r);if(s&&!c&&"wrapper"==co(a))var c=new Vn([],!0)}for(o=c?o:i;++o<i;){var u=co(a=e[o]),l="wrapper"==u?ao(a):n;c=l&&ko(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[co(l[0])].apply(c,l[3]):1==a.length&&ko(a)?c[u]():c.thru(a)}return function(){var t=arguments,n=t[0];if(c&&1==t.length&&Gs(n))return c.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function Hi(t,e,r,i,o,s,a,c,l,f){var p=e&u,h=1&e,d=2&e,g=24&e,m=512&e,v=d?n:Bi(t);return function n(){for(var u=arguments.length,y=st(u),w=u;w--;)y[w]=arguments[w];if(g)var b=uo(n),_=en(y,b);if(i&&(y=Pi(y,i,o,g)),s&&(y=Oi(y,s,a,g)),u-=_,g&&u<f){var S=un(y,b);return Qi(t,e,Hi,n.placeholder,r,y,S,c,l,f-u)}var x=h?r:this,k=d?x[t]:t;return u=y.length,c?y=Io(y,c):m&&u>1&&y.reverse(),p&&l<u&&(y.length=l),this&&this!==pe&&this instanceof n&&(k=v||Bi(k)),k.apply(x,y)}}function $i(t,e){return function(n,r){return function(t,e,n,r){return Sr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(r,i){var o;if(r===n&&i===n)return e;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=fi(r),i=fi(i)):(r=li(r),i=li(i)),o=t(r,i)}return o}}function Vi(t){return io((function(e){return e=je(e,Ze(lo())),Yr((function(n){var r=this;return t(e,(function(t){return ke(t,r,n)}))}))}))}function Wi(t,e){var r=(e=e===n?" ":fi(e)).length;if(r<2)return r?Jr(e,t):e;var i=Jr(e,me(t/pn(e)));return sn(e)?xi(hn(i),0,t).join(""):i.slice(0,t)}function Gi(t){return function(e,r,i){return i&&"number"!=typeof i&&So(e,r,i)&&(r=i=n),e=ma(e),r===n?(r=e,e=0):r=ma(r),function(t,e,n,r){for(var i=-1,o=bn(me((e-t)/(n||1)),0),s=st(o);o--;)s[r?o:++i]=t,t+=n;return s}(e,r,i=i===n?e<r?1:-1:ma(i),t)}}function Ki(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=wa(e),n=wa(n)),t(e,n)}}function Qi(t,e,r,i,o,s,u,l,f,p){var h=8&e;e|=h?a:c,4&(e&=~(h?c:a))||(e&=-4);var d=[t,e,o,h?s:n,h?u:n,h?n:s,h?n:u,l,f,p],g=r.apply(n,d);return ko(t)&&No(g,d),g.placeholder=i,Do(g,t,e)}function Zi(t){var e=Ct[t];return function(t,n){if(t=wa(t),(n=null==n?0:_n(va(n),292))&&vn(t)){var r=(_a(t)+"e").split("e");return+((r=(_a(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ji=Pn&&1/ln(new Pn([,-0]))[1]==f?function(t){return new Pn(t)}:fc;function Yi(t){return function(e){var n=vo(e);return n==x?an(e):n==P?fn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,i,f,p,h,d,g){var m=2&e;if(!m&&"function"!=typeof t)throw new Ot(r);var v=f?f.length:0;if(v||(e&=-97,f=p=n),d=d===n?d:bn(va(d),0),g=g===n?g:va(g),v-=p?p.length:0,e&c){var y=f,w=p;f=p=n}var b=m?n:ao(t),_=[t,e,i,f,p,y,w,h,d,g];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,a=r==u&&8==n||r==u&&n==l&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?Pi(f,c,e[4]):c,t[4]=f?un(t[3],o):e[4]}(c=e[5])&&(f=t[5],t[5]=f?Oi(f,c,e[6]):c,t[6]=f?un(t[5],o):e[6]);(c=e[7])&&(t[7]=c);r&u&&(t[8]=null==t[8]?e[8]:_n(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(_,b),t=_[0],e=_[1],i=_[2],f=_[3],p=_[4],!(g=_[9]=_[9]===n?m?0:t.length:bn(_[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==s?function(t,e,r){var i=Bi(t);return function o(){for(var s=arguments.length,a=st(s),c=s,u=uo(o);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==u&&a[s-1]!==u?[]:un(a,u);return(s-=l.length)<r?Qi(t,e,Hi,o.placeholder,n,a,l,n,n,r-s):ke(this&&this!==pe&&this instanceof o?i:t,this,a)}}(t,e,g):e!=a&&33!=e||p.length?Hi.apply(n,_):function(t,e,n,r){var i=1&e,o=Bi(t);return function e(){for(var s=-1,a=arguments.length,c=-1,u=r.length,l=st(u+a),f=this&&this!==pe&&this instanceof e?o:t;++c<u;)l[c]=r[c];for(;a--;)l[c++]=arguments[++s];return ke(f,i?n:this,l)}}(t,e,i,f);else var S=function(t,e,n){var r=1&e,i=Bi(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return Do((b?ni:No)(S,_),t,e)}function to(t,e,r,i){return t===n||$s(t,Nt[r])&&!Dt.call(i,r)?e:t}function eo(t,e,r,i,o,s){return ra(t)&&ra(e)&&(s.set(e,t),Ur(t,e,n,eo,s),s.delete(e)),t}function no(t){return aa(t)?n:t}function ro(t,e,r,i,o,s){var a=1&r,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(t),f=s.get(e);if(l&&f)return l==e&&f==t;var p=-1,h=!0,d=2&r?new Zn:n;for(s.set(t,e),s.set(e,t);++p<c;){var g=t[p],m=e[p];if(i)var v=a?i(m,g,p,e,t,s):i(g,m,p,t,e,s);if(v!==n){if(v)continue;h=!1;break}if(d){if(!De(e,(function(t,e){if(!Ye(d,e)&&(g===t||o(g,t,r,i,s)))return d.push(e)}))){h=!1;break}}else if(g!==m&&!o(g,m,r,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function io(t){return Fo(Po(t,n,Ko),t+"")}function oo(t){return Cr(t,La,go)}function so(t){return Cr(t,Fa,mo)}var ao=jn?function(t){return jn.get(t)}:fc;function co(t){for(var e=t.name+"",n=Nn[e],r=Dt.call(Nn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function uo(t){return(Dt.call(Hn,"placeholder")?Hn:t).placeholder}function lo(){var t=Hn.iteratee||ac;return t=t===ac?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function fo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function po(t){for(var e=La(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function ho(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Dr(r)?r:n}var go=Me?function(t){return null==t?[]:(t=Tt(t),Pe(Me(t),(function(e){return Qt.call(t,e)})))}:yc,mo=Me?function(t){for(var e=[];t;)Ne(e,go(t)),t=Gt(t);return e}:yc,vo=Tr;function yo(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,o=!1;++r<i;){var s=zo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&na(i)&&_o(s,i)&&(Gs(t)||Ws(t))}function wo(t){return"function"!=typeof t.constructor||Co(t)?{}:$n(Gt(t))}function bo(t){return Gs(t)||Ws(t)||!!(Xt&&t&&t[Xt])}function _o(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function So(t,e,n){if(!ra(n))return!1;var r=typeof e;return!!("number"==r?Qs(n)&&_o(e,n.length):"string"==r&&e in n)&&$s(n[e],t)}function xo(t,e){if(Gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fa(t))||(et.test(t)||!tt.test(t)||null!=e&&t in Tt(e))}function ko(t){var e=co(t),n=Hn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(Cn&&vo(new Cn(new ArrayBuffer(1)))!=L||Tn&&vo(new Tn)!=x||An&&vo(An.resolve())!=C||Pn&&vo(new Pn)!=P||On&&vo(new On)!=j)&&(vo=function(t){var e=Tr(t),r=e==E?t.constructor:n,i=r?qo(r):"";if(i)switch(i){case Ln:return L;case Fn:return x;case Dn:return C;case Mn:return P;case Rn:return j}return e});var Eo=Lt?ta:wc;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Nt)}function To(t){return t==t&&!ra(t)}function Ao(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Tt(r)))}}function Po(t,e,r){return e=bn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=bn(n.length-e,0),s=st(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=st(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),ke(t,this,a)}}function Oo(t,e){return e.length<2?t:Er(t,oi(e,0,-1))}function Io(t,e){for(var r=t.length,i=_n(e.length,r),o=Ii(t);i--;){var s=e[i];t[i]=_o(s,r)?o[s]:n}return t}function jo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=Mo(ni),Lo=de||function(t,e){return pe.setTimeout(t,e)},Fo=Mo(ri);function Do(t,e,n){var r=e+"";return Fo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(g,(function(n){var r="_."+n[0];e&n[1]&&!Oe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ut):[]}(r),n)))}function Mo(t){var e=0,r=0;return function(){var i=Sn(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Ro(t,e){var r=-1,i=t.length,o=i-1;for(e=e===n?i:e;++r<e;){var s=Zr(r,o),a=t[s];t[s]=t[r],t[r]=a}return t.length=e,t}var Bo=function(t){var e=Ms(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(pt,"$1"):n||t)})),e}));function zo(t){if("string"==typeof t||fa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function qo(t){if(null!=t){try{return Ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ho(t){if(t instanceof Wn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var $o=Yr((function(t,e){return Zs(t)?hr(t,wr(e,1,Zs,!0)):[]})),Uo=Yr((function(t,e){var r=Xo(e);return Zs(r)&&(r=n),Zs(t)?hr(t,wr(e,1,Zs,!0),lo(r,2)):[]})),Vo=Yr((function(t,e){var r=Xo(e);return Zs(r)&&(r=n),Zs(t)?hr(t,wr(e,1,Zs,!0),n,r):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=bn(r+i,0)),Be(t,lo(e,3),i)}function Go(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==n&&(o=va(r),o=r<0?bn(i+o,0):_n(o,i-1)),Be(t,lo(e,3),o,!0)}function Ko(t){return(null==t?0:t.length)?wr(t,1):[]}function Qo(t){return t&&t.length?t[0]:n}var Zo=Yr((function(t){var e=je(t,wi);return e.length&&e[0]===t[0]?Ir(e):[]})),Jo=Yr((function(t){var e=Xo(t),r=je(t,wi);return e===Xo(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Ir(r,lo(e,2)):[]})),Yo=Yr((function(t){var e=Xo(t),r=je(t,wi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Ir(r,n,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:n}var ts=Yr(es);function es(t,e){return t&&t.length&&e&&e.length?Kr(t,e):t}var ns=io((function(t,e){var n=null==t?0:t.length,r=cr(t,e);return Qr(t,je(e,(function(t){return _o(t,n)?+t:t})).sort(Ai)),r}));function rs(t){return null==t?t:En.call(t)}var is=Yr((function(t){return pi(wr(t,1,Zs,!0))})),os=Yr((function(t){var e=Xo(t);return Zs(e)&&(e=n),pi(wr(t,1,Zs,!0),lo(e,2))})),ss=Yr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,pi(wr(t,1,Zs,!0),n,e)}));function as(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Zs(t))return e=bn(t.length,e),!0})),Ke(e,(function(e){return je(t,Ue(e))}))}function cs(t,e){if(!t||!t.length)return[];var r=as(t);return null==e?r:je(r,(function(t){return ke(e,n,t)}))}var us=Yr((function(t,e){return Zs(t)?hr(t,e):[]})),ls=Yr((function(t){return vi(Pe(t,Zs))})),fs=Yr((function(t){var e=Xo(t);return Zs(e)&&(e=n),vi(Pe(t,Zs),lo(e,2))})),ps=Yr((function(t){var e=Xo(t);return e="function"==typeof e?e:n,vi(Pe(t,Zs),n,e)})),hs=Yr(as);var ds=Yr((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,cs(t,r)}));function gs(t){var e=Hn(t);return e.__chain__=!0,e}function ms(t,e){return e(t)}var vs=io((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,o=function(e){return cr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Wn&&_o(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:ms,args:[o],thisArg:n}),new Vn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));var ys=Ni((function(t,e,n){Dt.call(t,n)?++t[n]:ar(t,n,1)}));var ws=zi(Wo),bs=zi(Go);function _s(t,e){return(Gs(t)?Ce:dr)(t,lo(e,3))}function Ss(t,e){return(Gs(t)?Te:gr)(t,lo(e,3))}var xs=Ni((function(t,e,n){Dt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var ks=Yr((function(t,e,n){var r=-1,i="function"==typeof e,o=Qs(t)?st(t.length):[];return dr(t,(function(t){o[++r]=i?ke(e,t,n):jr(t,e,n)})),o})),Es=Ni((function(t,e,n){ar(t,n,e)}));function Cs(t,e){return(Gs(t)?je:qr)(t,lo(e,3))}var Ts=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var As=Yr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&So(t,e[0],e[1])?e=[]:n>2&&So(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,wr(e,1),[])})),Ps=he||function(){return pe.Date.now()};function Os(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Xi(t,u,n,n,n,n,e)}function Is(t,e){var i;if("function"!=typeof e)throw new Ot(r);return t=va(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var js=Yr((function(t,e,n){var r=1;if(n.length){var i=un(n,uo(js));r|=a}return Xi(t,r,e,n,i)})),Ns=Yr((function(t,e,n){var r=3;if(n.length){var i=un(n,uo(Ns));r|=a}return Xi(e,r,t,n,i)}));function Ls(t,e,i){var o,s,a,c,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Ot(r);function g(e){var r=o,i=s;return o=s=n,f=e,c=t.apply(i,r)}function m(t){return f=t,u=Lo(y,e),p?g(t):c}function v(t){var r=t-l;return l===n||r>=e||r<0||h&&t-f>=a}function y(){var t=Ps();if(v(t))return w(t);u=Lo(y,function(t){var n=e-(t-l);return h?_n(n,a-(t-f)):n}(t))}function w(t){return u=n,d&&o?g(t):(o=s=n,c)}function b(){var t=Ps(),r=v(t);if(o=arguments,s=this,l=t,r){if(u===n)return m(l);if(h)return ki(u),u=Lo(y,e),g(l)}return u===n&&(u=Lo(y,e)),c}return e=wa(e)||0,ra(i)&&(p=!!i.leading,a=(h="maxWait"in i)?bn(wa(i.maxWait)||0,e):a,d="trailing"in i?!!i.trailing:d),b.cancel=function(){u!==n&&ki(u),f=0,o=l=s=u=n},b.flush=function(){return u===n?c:w(Ps())},b}var Fs=Yr((function(t,e){return pr(t,1,e)})),Ds=Yr((function(t,e,n){return pr(t,wa(e)||0,n)}));function Ms(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ms.Cache||Qn),n}function Rs(t){if("function"!=typeof t)throw new Ot(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ms.Cache=Qn;var Bs=Si((function(t,e){var n=(e=1==e.length&&Gs(e[0])?je(e[0],Ze(lo())):je(wr(e,1),Ze(lo()))).length;return Yr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ke(t,this,r)}))})),zs=Yr((function(t,e){var r=un(e,uo(zs));return Xi(t,a,n,e,r)})),qs=Yr((function(t,e){var r=un(e,uo(qs));return Xi(t,c,n,e,r)})),Hs=io((function(t,e){return Xi(t,l,n,n,n,e)}));function $s(t,e){return t===e||t!=t&&e!=e}var Us=Ki(Ar),Vs=Ki((function(t,e){return t>=e})),Ws=Nr(function(){return arguments}())?Nr:function(t){return ia(t)&&Dt.call(t,"callee")&&!Qt.call(t,"callee")},Gs=st.isArray,Ks=ye?Ze(ye):function(t){return ia(t)&&Tr(t)==N};function Qs(t){return null!=t&&na(t.length)&&!ta(t)}function Zs(t){return ia(t)&&Qs(t)}var Js=Ve||wc,Ys=we?Ze(we):function(t){return ia(t)&&Tr(t)==w};function Xs(t){if(!ia(t))return!1;var e=Tr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!aa(t)}function ta(t){if(!ra(t))return!1;var e=Tr(t);return e==_||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ea(t){return"number"==typeof t&&t==va(t)}function na(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ra(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ia(t){return null!=t&&"object"==typeof t}var oa=be?Ze(be):function(t){return ia(t)&&vo(t)==x};function sa(t){return"number"==typeof t||ia(t)&&Tr(t)==k}function aa(t){if(!ia(t)||Tr(t)!=E)return!1;var e=Gt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==zt}var ca=_e?Ze(_e):function(t){return ia(t)&&Tr(t)==T};var ua=Se?Ze(Se):function(t){return ia(t)&&vo(t)==P};function la(t){return"string"==typeof t||!Gs(t)&&ia(t)&&Tr(t)==O}function fa(t){return"symbol"==typeof t||ia(t)&&Tr(t)==I}var pa=xe?Ze(xe):function(t){return ia(t)&&na(t.length)&&!!oe[Tr(t)]};var ha=Ki(zr),da=Ki((function(t,e){return t<=e}));function ga(t){if(!t)return[];if(Qs(t))return la(t)?hn(t):Ii(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=vo(t);return(e==x?an:e==P?ln:$a)(t)}function ma(t){return t?(t=wa(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function va(t){var e=ma(t),n=e%1;return e==e?n?e-n:e:0}function ya(t){return t?ur(va(t),0,d):0}function wa(t){if("number"==typeof t)return t;if(fa(t))return h;if(ra(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ra(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var n=mt.test(t);return n||yt.test(t)?ue(t.slice(2),n?2:8):gt.test(t)?h:+t}function ba(t){return ji(t,Fa(t))}function _a(t){return null==t?"":fi(t)}var Sa=Li((function(t,e){if(Co(e)||Qs(e))ji(e,La(e),t);else for(var n in e)Dt.call(e,n)&&rr(t,n,e[n])})),xa=Li((function(t,e){ji(e,Fa(e),t)})),ka=Li((function(t,e,n,r){ji(e,Fa(e),t,r)})),Ea=Li((function(t,e,n,r){ji(e,La(e),t,r)})),Ca=io(cr);var Ta=Yr((function(t,e){t=Tt(t);var r=-1,i=e.length,o=i>2?e[2]:n;for(o&&So(e[0],e[1],o)&&(i=1);++r<i;)for(var s=e[r],a=Fa(s),c=-1,u=a.length;++c<u;){var l=a[c],f=t[l];(f===n||$s(f,Nt[l])&&!Dt.call(t,l))&&(t[l]=s[l])}return t})),Aa=Yr((function(t){return t.push(n,eo),ke(Ma,n,t)}));function Pa(t,e,r){var i=null==t?n:Er(t,e);return i===n?r:i}function Oa(t,e){return null!=t&&yo(t,e,Or)}var Ia=$i((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),rc(sc)),ja=$i((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Na=Yr(jr);function La(t){return Qs(t)?Yn(t):Rr(t)}function Fa(t){return Qs(t)?Yn(t,!0):Br(t)}var Da=Li((function(t,e,n){Ur(t,e,n)})),Ma=Li((function(t,e,n,r){Ur(t,e,n,r)})),Ra=io((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),ji(t,so(t),n),r&&(n=lr(n,7,no));for(var i=e.length;i--;)hi(n,e[i]);return n}));var Ba=io((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Oa(t,n)}))}(t,e)}));function za(t,e){if(null==t)return{};var n=je(so(t),(function(t){return[t]}));return e=lo(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var qa=Yi(La),Ha=Yi(Fa);function $a(t){return null==t?[]:Je(t,La(t))}var Ua=Ri((function(t,e,n){return e=e.toLowerCase(),t+(n?Va(e):e)}));function Va(t){return Xa(_a(t).toLowerCase())}function Wa(t){return(t=_a(t))&&t.replace(bt,nn).replace(Yt,"")}var Ga=Ri((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ka=Ri((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Qa=Mi("toLowerCase");var Za=Ri((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ja=Ri((function(t,e,n){return t+(n?" ":"")+Xa(e)}));var Ya=Ri((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Mi("toUpperCase");function tc(t,e,r){return t=_a(t),(e=r?n:e)===n?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var ec=Yr((function(t,e){try{return ke(t,n,e)}catch(t){return Xs(t)?t:new kt(t)}})),nc=io((function(t,e){return Ce(e,(function(e){e=zo(e),ar(t,e,js(t[e],t))})),t}));function rc(t){return function(){return t}}var ic=qi(),oc=qi(!0);function sc(t){return t}function ac(t){return Mr("function"==typeof t?t:lr(t,1))}var cc=Yr((function(t,e){return function(n){return jr(n,t,e)}})),uc=Yr((function(t,e){return function(n){return jr(t,n,e)}}));function lc(t,e,n){var r=La(e),i=kr(e,r);null!=n||ra(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=kr(e,La(e)));var o=!(ra(n)&&"chain"in n&&!n.chain),s=ta(t);return Ce(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ii(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function fc(){}var pc=Vi(je),hc=Vi(Ae),dc=Vi(De);function gc(t){return xo(t)?Ue(zo(t)):function(t){return function(e){return Er(e,t)}}(t)}var mc=Gi(),vc=Gi(!0);function yc(){return[]}function wc(){return!1}var bc=Ui((function(t,e){return t+e}),0),_c=Zi("ceil"),Sc=Ui((function(t,e){return t/e}),1),xc=Zi("floor");var kc=Ui((function(t,e){return t*e}),1),Ec=Zi("round"),Cc=Ui((function(t,e){return t-e}),0);return Hn.after=function(t,e){if("function"!=typeof e)throw new Ot(r);return t=va(t),function(){if(--t<1)return e.apply(this,arguments)}},Hn.ary=Os,Hn.assign=Sa,Hn.assignIn=xa,Hn.assignInWith=ka,Hn.assignWith=Ea,Hn.at=Ca,Hn.before=Is,Hn.bind=js,Hn.bindAll=nc,Hn.bindKey=Ns,Hn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Gs(t)?t:[t]},Hn.chain=gs,Hn.chunk=function(t,e,r){e=(r?So(t,e,r):e===n)?1:bn(va(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,a=st(me(i/e));o<i;)a[s++]=oi(t,o,o+=e);return a},Hn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Hn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=st(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne(Gs(n)?Ii(n):[n],wr(e,1))},Hn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Ot(r);return[n(t[0]),t[1]]})):[],Yr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ke(i[0],this,n))return ke(i[1],this,n)}}))},Hn.conforms=function(t){return function(t){var e=La(t);return function(n){return fr(n,t,e)}}(lr(t,1))},Hn.constant=rc,Hn.countBy=ys,Hn.create=function(t,e){var n=$n(t);return null==e?n:sr(n,e)},Hn.curry=function t(e,r,i){var o=Xi(e,8,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Hn.curryRight=function t(e,r,i){var o=Xi(e,s,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Hn.debounce=Ls,Hn.defaults=Ta,Hn.defaultsDeep=Aa,Hn.defer=Fs,Hn.delay=Ds,Hn.difference=$o,Hn.differenceBy=Uo,Hn.differenceWith=Vo,Hn.drop=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,(e=r||e===n?1:va(e))<0?0:e,i):[]},Hn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,0,(e=i-(e=r||e===n?1:va(e)))<0?0:e):[]},Hn.dropRightWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!0,!0):[]},Hn.dropWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!0):[]},Hn.fill=function(t,e,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&So(t,e,r)&&(r=0,i=o),function(t,e,r,i){var o=t.length;for((r=va(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:va(i))<0&&(i+=o),i=r>i?0:ya(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Hn.filter=function(t,e){return(Gs(t)?Pe:yr)(t,lo(e,3))},Hn.flatMap=function(t,e){return wr(Cs(t,e),1)},Hn.flatMapDeep=function(t,e){return wr(Cs(t,e),f)},Hn.flatMapDepth=function(t,e,r){return r=r===n?1:va(r),wr(Cs(t,e),r)},Hn.flatten=Ko,Hn.flattenDeep=function(t){return(null==t?0:t.length)?wr(t,f):[]},Hn.flattenDepth=function(t,e){return(null==t?0:t.length)?wr(t,e=e===n?1:va(e)):[]},Hn.flip=function(t){return Xi(t,512)},Hn.flow=ic,Hn.flowRight=oc,Hn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Hn.functions=function(t){return null==t?[]:kr(t,La(t))},Hn.functionsIn=function(t){return null==t?[]:kr(t,Fa(t))},Hn.groupBy=xs,Hn.initial=function(t){return(null==t?0:t.length)?oi(t,0,-1):[]},Hn.intersection=Zo,Hn.intersectionBy=Jo,Hn.intersectionWith=Yo,Hn.invert=Ia,Hn.invertBy=ja,Hn.invokeMap=ks,Hn.iteratee=ac,Hn.keyBy=Es,Hn.keys=La,Hn.keysIn=Fa,Hn.map=Cs,Hn.mapKeys=function(t,e){var n={};return e=lo(e,3),Sr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Hn.mapValues=function(t,e){var n={};return e=lo(e,3),Sr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Hn.matches=function(t){return Hr(lr(t,1))},Hn.matchesProperty=function(t,e){return $r(t,lr(e,1))},Hn.memoize=Ms,Hn.merge=Da,Hn.mergeWith=Ma,Hn.method=cc,Hn.methodOf=uc,Hn.mixin=lc,Hn.negate=Rs,Hn.nthArg=function(t){return t=va(t),Yr((function(e){return Vr(e,t)}))},Hn.omit=Ra,Hn.omitBy=function(t,e){return za(t,Rs(lo(e)))},Hn.once=function(t){return Is(2,t)},Hn.orderBy=function(t,e,r,i){return null==t?[]:(Gs(e)||(e=null==e?[]:[e]),Gs(r=i?n:r)||(r=null==r?[]:[r]),Wr(t,e,r))},Hn.over=pc,Hn.overArgs=Bs,Hn.overEvery=hc,Hn.overSome=dc,Hn.partial=zs,Hn.partialRight=qs,Hn.partition=Ts,Hn.pick=Ba,Hn.pickBy=za,Hn.property=gc,Hn.propertyOf=function(t){return function(e){return null==t?n:Er(t,e)}},Hn.pull=ts,Hn.pullAll=es,Hn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,lo(n,2)):t},Hn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Kr(t,e,n,r):t},Hn.pullAt=ns,Hn.range=mc,Hn.rangeRight=vc,Hn.rearg=Hs,Hn.reject=function(t,e){return(Gs(t)?Pe:yr)(t,Rs(lo(e,3)))},Hn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Qr(t,i),n},Hn.rest=function(t,e){if("function"!=typeof t)throw new Ot(r);return Yr(t,e=e===n?e:va(e))},Hn.reverse=rs,Hn.sampleSize=function(t,e,r){return e=(r?So(t,e,r):e===n)?1:va(e),(Gs(t)?tr:ti)(t,e)},Hn.set=function(t,e,n){return null==t?t:ei(t,e,n)},Hn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ei(t,e,r,i)},Hn.shuffle=function(t){return(Gs(t)?er:ii)(t)},Hn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&So(t,e,r)?(e=0,r=i):(e=null==e?0:va(e),r=r===n?i:va(r)),oi(t,e,r)):[]},Hn.sortBy=As,Hn.sortedUniq=function(t){return t&&t.length?ui(t):[]},Hn.sortedUniqBy=function(t,e){return t&&t.length?ui(t,lo(e,2)):[]},Hn.split=function(t,e,r){return r&&"number"!=typeof r&&So(t,e,r)&&(e=r=n),(r=r===n?d:r>>>0)?(t=_a(t))&&("string"==typeof e||null!=e&&!ca(e))&&!(e=fi(e))&&sn(t)?xi(hn(t),0,r):t.split(e,r):[]},Hn.spread=function(t,e){if("function"!=typeof t)throw new Ot(r);return e=null==e?0:bn(va(e),0),Yr((function(n){var r=n[e],i=xi(n,0,e);return r&&Ne(i,r),ke(t,this,i)}))},Hn.tail=function(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]},Hn.take=function(t,e,r){return t&&t.length?oi(t,0,(e=r||e===n?1:va(e))<0?0:e):[]},Hn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?oi(t,(e=i-(e=r||e===n?1:va(e)))<0?0:e,i):[]},Hn.takeRightWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!1,!0):[]},Hn.takeWhile=function(t,e){return t&&t.length?gi(t,lo(e,3)):[]},Hn.tap=function(t,e){return e(t),t},Hn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Ot(r);return ra(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ls(t,e,{leading:i,maxWait:e,trailing:o})},Hn.thru=ms,Hn.toArray=ga,Hn.toPairs=qa,Hn.toPairsIn=Ha,Hn.toPath=function(t){return Gs(t)?je(t,zo):fa(t)?[t]:Ii(Bo(_a(t)))},Hn.toPlainObject=ba,Hn.transform=function(t,e,n){var r=Gs(t),i=r||Js(t)||pa(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ra(t)&&ta(o)?$n(Gt(t)):{}}return(i?Ce:Sr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Hn.unary=function(t){return Os(t,1)},Hn.union=is,Hn.unionBy=os,Hn.unionWith=ss,Hn.uniq=function(t){return t&&t.length?pi(t):[]},Hn.uniqBy=function(t,e){return t&&t.length?pi(t,lo(e,2)):[]},Hn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?pi(t,n,e):[]},Hn.unset=function(t,e){return null==t||hi(t,e)},Hn.unzip=as,Hn.unzipWith=cs,Hn.update=function(t,e,n){return null==t?t:di(t,e,bi(n))},Hn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:di(t,e,bi(r),i)},Hn.values=$a,Hn.valuesIn=function(t){return null==t?[]:Je(t,Fa(t))},Hn.without=us,Hn.words=tc,Hn.wrap=function(t,e){return zs(bi(e),t)},Hn.xor=ls,Hn.xorBy=fs,Hn.xorWith=ps,Hn.zip=hs,Hn.zipObject=function(t,e){return yi(t||[],e||[],rr)},Hn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ei)},Hn.zipWith=ds,Hn.entries=qa,Hn.entriesIn=Ha,Hn.extend=xa,Hn.extendWith=ka,lc(Hn,Hn),Hn.add=bc,Hn.attempt=ec,Hn.camelCase=Ua,Hn.capitalize=Va,Hn.ceil=_c,Hn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=wa(r))==r?r:0),e!==n&&(e=(e=wa(e))==e?e:0),ur(wa(t),e,r)},Hn.clone=function(t){return lr(t,4)},Hn.cloneDeep=function(t){return lr(t,5)},Hn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:n)},Hn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:n)},Hn.conformsTo=function(t,e){return null==e||fr(t,e,La(e))},Hn.deburr=Wa,Hn.defaultTo=function(t,e){return null==t||t!=t?e:t},Hn.divide=Sc,Hn.endsWith=function(t,e,r){t=_a(t),e=fi(e);var i=t.length,o=r=r===n?i:ur(va(r),0,i);return(r-=e.length)>=0&&t.slice(r,o)==e},Hn.eq=$s,Hn.escape=function(t){return(t=_a(t))&&Z.test(t)?t.replace(K,rn):t},Hn.escapeRegExp=function(t){return(t=_a(t))&&it.test(t)?t.replace(rt,"\\$&"):t},Hn.every=function(t,e,r){var i=Gs(t)?Ae:mr;return r&&So(t,e,r)&&(e=n),i(t,lo(e,3))},Hn.find=ws,Hn.findIndex=Wo,Hn.findKey=function(t,e){return Re(t,lo(e,3),Sr)},Hn.findLast=bs,Hn.findLastIndex=Go,Hn.findLastKey=function(t,e){return Re(t,lo(e,3),xr)},Hn.floor=xc,Hn.forEach=_s,Hn.forEachRight=Ss,Hn.forIn=function(t,e){return null==t?t:br(t,lo(e,3),Fa)},Hn.forInRight=function(t,e){return null==t?t:_r(t,lo(e,3),Fa)},Hn.forOwn=function(t,e){return t&&Sr(t,lo(e,3))},Hn.forOwnRight=function(t,e){return t&&xr(t,lo(e,3))},Hn.get=Pa,Hn.gt=Us,Hn.gte=Vs,Hn.has=function(t,e){return null!=t&&yo(t,e,Pr)},Hn.hasIn=Oa,Hn.head=Qo,Hn.identity=sc,Hn.includes=function(t,e,n,r){t=Qs(t)?t:$a(t),n=n&&!r?va(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ze(t,e,n)>-1},Hn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=bn(r+i,0)),ze(t,e,i)},Hn.inRange=function(t,e,r){return e=ma(e),r===n?(r=e,e=0):r=ma(r),function(t,e,n){return t>=_n(e,n)&&t<bn(e,n)}(t=wa(t),e,r)},Hn.invoke=Na,Hn.isArguments=Ws,Hn.isArray=Gs,Hn.isArrayBuffer=Ks,Hn.isArrayLike=Qs,Hn.isArrayLikeObject=Zs,Hn.isBoolean=function(t){return!0===t||!1===t||ia(t)&&Tr(t)==y},Hn.isBuffer=Js,Hn.isDate=Ys,Hn.isElement=function(t){return ia(t)&&1===t.nodeType&&!aa(t)},Hn.isEmpty=function(t){if(null==t)return!0;if(Qs(t)&&(Gs(t)||"string"==typeof t||"function"==typeof t.splice||Js(t)||pa(t)||Ws(t)))return!t.length;var e=vo(t);if(e==x||e==P)return!t.size;if(Co(t))return!Rr(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},Hn.isEqual=function(t,e){return Lr(t,e)},Hn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Lr(t,e,n,r):!!i},Hn.isError=Xs,Hn.isFinite=function(t){return"number"==typeof t&&vn(t)},Hn.isFunction=ta,Hn.isInteger=ea,Hn.isLength=na,Hn.isMap=oa,Hn.isMatch=function(t,e){return t===e||Fr(t,e,po(e))},Hn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Fr(t,e,po(e),r)},Hn.isNaN=function(t){return sa(t)&&t!=+t},Hn.isNative=function(t){if(Eo(t))throw new kt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(t)},Hn.isNil=function(t){return null==t},Hn.isNull=function(t){return null===t},Hn.isNumber=sa,Hn.isObject=ra,Hn.isObjectLike=ia,Hn.isPlainObject=aa,Hn.isRegExp=ca,Hn.isSafeInteger=function(t){return ea(t)&&t>=-9007199254740991&&t<=p},Hn.isSet=ua,Hn.isString=la,Hn.isSymbol=fa,Hn.isTypedArray=pa,Hn.isUndefined=function(t){return t===n},Hn.isWeakMap=function(t){return ia(t)&&vo(t)==j},Hn.isWeakSet=function(t){return ia(t)&&"[object WeakSet]"==Tr(t)},Hn.join=function(t,e){return null==t?"":yn.call(t,e)},Hn.kebabCase=Ga,Hn.last=Xo,Hn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=va(r))<0?bn(i+o,0):_n(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,He,o,!0)},Hn.lowerCase=Ka,Hn.lowerFirst=Qa,Hn.lt=ha,Hn.lte=da,Hn.max=function(t){return t&&t.length?vr(t,sc,Ar):n},Hn.maxBy=function(t,e){return t&&t.length?vr(t,lo(e,2),Ar):n},Hn.mean=function(t){return $e(t,sc)},Hn.meanBy=function(t,e){return $e(t,lo(e,2))},Hn.min=function(t){return t&&t.length?vr(t,sc,zr):n},Hn.minBy=function(t,e){return t&&t.length?vr(t,lo(e,2),zr):n},Hn.stubArray=yc,Hn.stubFalse=wc,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=kc,Hn.nth=function(t,e){return t&&t.length?Vr(t,va(e)):n},Hn.noConflict=function(){return pe._===this&&(pe._=qt),this},Hn.noop=fc,Hn.now=Ps,Hn.pad=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Wi(ve(i),n)+t+Wi(me(i),n)},Hn.padEnd=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;return e&&r<e?t+Wi(e-r,n):t},Hn.padStart=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;return e&&r<e?Wi(e-r,n)+t:t},Hn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(_a(t).replace(ot,""),e||0)},Hn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&So(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=ma(t),e===n?(e=t,t=0):e=ma(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var o=kn();return _n(t+o*(e-t+ce("1e-"+((o+"").length-1))),e)}return Zr(t,e)},Hn.reduce=function(t,e,n){var r=Gs(t)?Le:We,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},Hn.reduceRight=function(t,e,n){var r=Gs(t)?Fe:We,i=arguments.length<3;return r(t,lo(e,4),n,i,gr)},Hn.repeat=function(t,e,r){return e=(r?So(t,e,r):e===n)?1:va(e),Jr(_a(t),e)},Hn.replace=function(){var t=arguments,e=_a(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Hn.result=function(t,e,r){var i=-1,o=(e=_i(e,t)).length;for(o||(o=1,t=n);++i<o;){var s=null==t?n:t[zo(e[i])];s===n&&(i=o,s=r),t=ta(s)?s.call(t):s}return t},Hn.round=Ec,Hn.runInContext=t,Hn.sample=function(t){return(Gs(t)?Xn:Xr)(t)},Hn.size=function(t){if(null==t)return 0;if(Qs(t))return la(t)?pn(t):t.length;var e=vo(t);return e==x||e==P?t.size:Rr(t).length},Hn.snakeCase=Za,Hn.some=function(t,e,r){var i=Gs(t)?De:si;return r&&So(t,e,r)&&(e=n),i(t,lo(e,3))},Hn.sortedIndex=function(t,e){return ai(t,e)},Hn.sortedIndexBy=function(t,e,n){return ci(t,e,lo(n,2))},Hn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&$s(t[r],e))return r}return-1},Hn.sortedLastIndex=function(t,e){return ai(t,e,!0)},Hn.sortedLastIndexBy=function(t,e,n){return ci(t,e,lo(n,2),!0)},Hn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if($s(t[n],e))return n}return-1},Hn.startCase=Ja,Hn.startsWith=function(t,e,n){return t=_a(t),n=null==n?0:ur(va(n),0,t.length),e=fi(e),t.slice(n,n+e.length)==e},Hn.subtract=Cc,Hn.sum=function(t){return t&&t.length?Ge(t,sc):0},Hn.sumBy=function(t,e){return t&&t.length?Ge(t,lo(e,2)):0},Hn.template=function(t,e,r){var i=Hn.templateSettings;r&&So(t,e,r)&&(e=n),t=_a(t),e=ka({},e,i,to);var o,s,a=ka({},e.imports,i.imports,to),c=La(a),u=Je(a,c),l=0,f=e.interpolate||_t,p="__p += '",h=At((e.escape||_t).source+"|"+f.source+"|"+(f===X?ht:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(h,(function(e,n,r,i,a,c){return r||(r=i),p+=t.slice(l,c).replace(St,on),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),p+="';\n";var g=Dt.call(e,"variable")&&e.variable;if(g){if(ft.test(g))throw new kt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(U,""):p).replace(V,"$1").replace(W,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=ec((function(){return Et(c,d+"return "+p).apply(n,u)}));if(m.source=p,Xs(m))throw m;return m},Hn.times=function(t,e){if((t=va(t))<1||t>p)return[];var n=d,r=_n(t,d);e=lo(e),t-=d;for(var i=Ke(r,e);++n<t;)e(n);return i},Hn.toFinite=ma,Hn.toInteger=va,Hn.toLength=ya,Hn.toLower=function(t){return _a(t).toLowerCase()},Hn.toNumber=wa,Hn.toSafeInteger=function(t){return t?ur(va(t),-9007199254740991,p):0===t?t:0},Hn.toString=_a,Hn.toUpper=function(t){return _a(t).toUpperCase()},Hn.trim=function(t,e,r){if((t=_a(t))&&(r||e===n))return Qe(t);if(!t||!(e=fi(e)))return t;var i=hn(t),o=hn(e);return xi(i,Xe(i,o),tn(i,o)+1).join("")},Hn.trimEnd=function(t,e,r){if((t=_a(t))&&(r||e===n))return t.slice(0,dn(t)+1);if(!t||!(e=fi(e)))return t;var i=hn(t);return xi(i,0,tn(i,hn(e))+1).join("")},Hn.trimStart=function(t,e,r){if((t=_a(t))&&(r||e===n))return t.replace(ot,"");if(!t||!(e=fi(e)))return t;var i=hn(t);return xi(i,Xe(i,hn(e))).join("")},Hn.truncate=function(t,e){var r=30,i="...";if(ra(e)){var o="separator"in e?e.separator:o;r="length"in e?va(e.length):r,i="omission"in e?fi(e.omission):i}var s=(t=_a(t)).length;if(sn(t)){var a=hn(t);s=a.length}if(r>=s)return t;var c=r-pn(i);if(c<1)return i;var u=a?xi(a,0,c).join(""):t.slice(0,c);if(o===n)return u+i;if(a&&(c+=u.length-c),ca(o)){if(t.slice(c).search(o)){var l,f=u;for(o.global||(o=At(o.source,_a(dt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;u=u.slice(0,p===n?c:p)}}else if(t.indexOf(fi(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},Hn.unescape=function(t){return(t=_a(t))&&Q.test(t)?t.replace(G,gn):t},Hn.uniqueId=function(t){var e=++Mt;return _a(t)+e},Hn.upperCase=Ya,Hn.upperFirst=Xa,Hn.each=_s,Hn.eachRight=Ss,Hn.first=Qo,lc(Hn,function(){var t={};return Sr(Hn,(function(e,n){Dt.call(Hn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Hn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Hn[t].placeholder=Hn})),Ce(["drop","take"],(function(t,e){Wn.prototype[t]=function(r){r=r===n?1:bn(va(r),0);var i=this.__filtered__&&!e?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=_n(r,i.__takeCount__):i.__views__.push({size:_n(r,d),type:t+(i.__dir__<0?"Right":"")}),i},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(sc)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Yr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return jr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Rs(lo(t)))},Wn.prototype.slice=function(t,e){t=va(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Wn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=va(e))<0?r.dropRight(-e):r.take(e-t)),r)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(d)},Sr(Wn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Hn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(Hn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,c=e instanceof Wn,u=a[0],l=c||Gs(e),f=function(t){var e=o.apply(Hn,Ne([t],a));return i&&p?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=s&&!p,g=c&&!h;if(!s&&l){e=g?e:new Wn(this);var m=t.apply(e,a);return m.__actions__.push({func:ms,args:[f],thisArg:n}),new Vn(m,p)}return d&&g?t.apply(this,a):(m=this.thru(f),d?i?m.value()[0]:m.value():m)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Hn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Gs(i)?i:[],t)}return this[n]((function(n){return e.apply(Gs(n)?n:[],t)}))}})),Sr(Wn.prototype,(function(t,e){var n=Hn[e];if(n){var r=n.name+"";Dt.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:e,func:n})}})),Nn[Hi(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=_n(e,t+s);break;case"takeRight":t=bn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,f=l.length,p=0,h=_n(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return mi(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var g=-1,m=t[u+=e];++g<f;){var v=l[g],y=v.iteratee,w=v.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue t;break t}}d[p++]=m}return d},Hn.prototype.at=vs,Hn.prototype.chain=function(){return gs(this)},Hn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===n&&(this.__values__=ga(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Hn.prototype.plant=function(t){for(var e,r=this;r instanceof Un;){var i=Ho(r);i.__index__=0,i.__values__=n,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e},Hn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ms,args:[rs],thisArg:n}),new Vn(e,this.__chain__)}return this.thru(rs)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,ee&&(Hn.prototype[ee]=function(){return this}),Hn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(pe._=mn,define((function(){return mn}))):de?((de.exports=mn)._=mn,he._=mn):pe._=mn}.call(this),e.exports}.call({}),Yt={};Yt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Xt,te={},ee={};Xt="object"==typeof A&&A&&A.Object===Object&&A;var ne="object"==typeof self&&self&&self.Object===Object&&self,re=Xt||ne||Function("return this")();te=function(){return ee.Date.now()};var ie={},oe={},se={},ae=/\s/;se=function(t){for(var e=t.length;e--&&ae.test(t.charAt(e)););return e};var ce=/^\s+/;oe=function(t){return t?t.slice(0,se(t)+1).replace(ce,""):t};var ue,le={},fe={};ue=(ee=re).Symbol;var pe={},he=Object.prototype,de=he.hasOwnProperty,ge=he.toString,me=ue?ue.toStringTag:void 0;pe=function(t){var e=de.call(t,me),n=t[me];try{t[me]=void 0;var r=!0}catch(t){}var i=ge.call(t);return r&&(e?t[me]=n:delete t[me]),i};var ve={},ye=Object.prototype.toString;ve=function(t){return ye.call(t)};var we=ue?ue.toStringTag:void 0;fe=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":we&&we in Object(t)?pe(t):ve(t)};var be={};be=function(t){return null!=t&&"object"==typeof t};le=function(t){return"symbol"==typeof t||be(t)&&"[object Symbol]"==fe(t)};var _e=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,xe=/^0o[0-7]+$/i,ke=parseInt;ie=function(t){if("number"==typeof t)return t;if(le(t))return NaN;if(Yt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Yt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=oe(t);var n=Se.test(t);return n||xe.test(t)?ke(t.slice(2),n?2:8):_e.test(t)?NaN:+t};var Ee=Math.max,Ce=Math.min;Zt=function(t,e,n){var r,i,o,s,a,c,u=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function d(t){return u=t,a=setTimeout(m,e),l?h(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=o}function m(){var t=te();if(g(t))return v(t);a=setTimeout(m,function(t){var n=e-(t-c);return f?Ce(n,o-(t-u)):n}(t))}function v(t){return a=void 0,p&&r?h(t):(r=i=void 0,s)}function y(){var t=te(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return d(c);if(f)return clearTimeout(a),a=setTimeout(m,e),h(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=ie(e)||0,Yt(n)&&(l=!!n.leading,o=(f="maxWait"in n)?Ee(ie(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=i=a=void 0},y.flush=function(){return void 0===a?s:v(te())},y};const Te=f.DiagnosticCategory;function Ae(t){return{line:t.row+1,offset:t.column+1}}function Pe(t){return new h.Point(t.line-1,t.offset-1)}function Oe(t){return Ie(t.start,t.end)}function Ie(t,e){return new h.Range(Pe(t),Pe(e))}function je(t){const e=Ne(t),n=e.formatCodeOptions;return{formatCodeOptions:{indentSize:atom.config.get("editor.tabLength"),tabSize:atom.config.get("editor.tabLength"),...n},compileOnSave:!!e.compileOnSave,preferences:e.preferences?e.preferences:{}}}function Ne(t){".json"!==b.extname(t)&&(t+=".json");let{config:e}=f.readConfigFile(t,(t=>f.sys.readFile(t)));if(void 0===e)return{};if("string"==typeof e.extends){const n=Ne(b.join(b.dirname(t),e.extends));e=Object.assign({},n,e)}return e}function Le(t){return{label:De(t.prefixDisplayParts)+t.parameters.map((t=>De(t.displayParts))).join(De(t.separatorDisplayParts))+De(t.suffixDisplayParts),documentation:De(t.documentation),parameters:t.parameters.map(Fe)}}function Fe(t){return{label:De(t.displayParts),documentation:De(t.documentation)}}function De(t){return t.map((t=>t.text)).join("")}const Me=function(){let t;return function(e,n){if(void 0===e)return!0;void 0===t&&(t=new Map(Object.values(f.Diagnostics).map((t=>[t.code,t.category]))));const r=t.get(e);return void 0===r||r===n}}();function Re(t,e){const n=new Error("Max time reached");return atom.notifications.addError(`${t} took more than ${e} seconds to complete`,{dismissable:!0,description:t+" took too long to complete and was terminated.",stack:n.stack}),n}async function Be(t,e){const n=function(t,e){const n=performance.now();let r=n;return async function(){const i=performance.now();return i-r>t&&(await new Promise(setImmediate),r=i),i-n<=e}}(100,5e3),r=new g;try{const i=atom.grammars.grammarForId(e),o=atom.grammars.languageModeForGrammarAndBuffer(i,r);r.setLanguageMode(o),r.setText(t);const s=r.getEndPosition();o.startTokenizing&&o.startTokenizing(),await async function(t){return new Promise((e=>{if(t.fullyTokenized||t.tree)e(void 0);else if(t.onDidTokenize){const n=t.onDidTokenize((()=>{n.dispose(),e(void 0)}))}else e(void 0)}))}(o);const a=o.buildHighlightIterator();if(a.getOpenScopeIds&&a.getCloseScopeIds){let t={row:0,column:0};a.seek(t);const e=[];for(;t.row<s.row||t.row===s.row&&t.column<=s.column;){e.push(...a.getCloseScopeIds().map((()=>"</span>")),...a.getOpenScopeIds().map((t=>`<span class="${o.classNameForScopeId(t)}">`))),a.moveToSuccessor();const i=a.getPosition();if(e.push(r.getTextInRange([t,i]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),!await n()){console.error(Re("Atom-TypeScript: Highlighter",5));break}t=i}return e.join("")}return t}finally{r.destroy()}}function ze(t){return void 0!==t&&Ve(b.extname(t))}function qe(){const t=atom.config.get("atom-typescript"),e=t.tsSyntaxScopes;return t.allowJS&&e.push(...t.jsSyntaxScopes),e}function He(t){return ze(t.getPath())&&$e(t)}function $e(t){const[e]=t.getRootScopeDescriptor().getScopesArray();return qe().includes(e)}function Ue(t){return null!=t}const Ve=function(t,e){const n=Jt.memoize((n=>Jt.throttle(t,e,{leading:!0})));return t=>n(t)(t)}((t=>{const e=atom.config.get("atom-typescript"),n=e.tsFileExtensions;if(e.allowJS&&n.push(...e.jsFileExtensions),e.extensionsFromGrammars){var r;const t=null!==(r=atom.config.get("core.customFileTypes"))&&void 0!==r?r:{},e=qe();n.push(...[].concat(...e.map((t=>{var e;return null===(e=atom.grammars.grammarForScopeName(t))||void 0===e?void 0:e.fileTypes})),...e.map((e=>t[e]))).filter(Ue).map((t=>"."+t)))}return n.includes(t)}),5e3);function We(t,e){const n=t.getPath();if(void 0!==n){return{file:n,...e?Ae(e):function(t){const e=t.getCursorBufferPosition();return{line:e.row+1,offset:e.column+1}}(t)}}}function Ge(t){const e=t.dataset.startLine;return void 0!==e?parseInt(e,10)-1:0}function Ke(t){const e=t.dataset.endLine;return void 0!==e?parseInt(e,10)-1:0}function Qe(t,e,n){const r=n.querySelectorAll(":scope > ol > li.node");if(0===r.length)return;for(const n of Array.from(r)){const r=Ge(n),i=Ke(n);if(isFinite(r)&&isFinite(i)){if(t>=r&&e<=i){const r=Qe(t,e,n);return r||n}if(isFinite(i)&&e<i)break}const o=Qe(t,e,n);if(o)return o}const i=Ge(n),o=Ke(n);return isFinite(i)&&isFinite(o)&&t>=i&&e<=o?n:void 0}function Ze(t){return t.spans.length>0?t.spans[0].start.line-1:0}function Je(t,e){if(!t||!e)return t===e;if(t.text===e.text){if(e.collapsed&&(t.collapsed=!0),t.childItems&&e.childItems){let n,r;for(let i=0,o=t.childItems.length;i<o;++i)n=t.childItems[i],r=e.childItems[i],Je(n,r)||(r=e.childItems[i+1],Je(n,r)||(r=e.childItems[i-1],Je(n,r)))}return!0}return!1}function Ye(t){if(null!==t&&t.childItems){if(t.childItems.length<1)return void(t.childItems=void 0);t.childItems.sort(((t,e)=>Ze(t)-Ze(e)));for(const e of t.childItems)Ye(e)}}class Xe{constructor(t){this.props=t,pt.initialize(this)}async update(t){this.props={...this.props,...t},await pt.update(this)}async destroy(){await pt.destroy(this)}render(){var t,e,n,r;const i=this.props.navTree,{ctrl:o}=this.props,s=(i.childItems?"nested-":"")+"item"+(i.collapsed?" collapsed":" expanded"),a=this.getStyles();return pt.dom("li",{className:"node entry exanded list-"+s,dataset:{startLine:null===(t=this.props.navTree.spans[0])||void 0===t||null===(e=t.start)||void 0===e?void 0:e.line,endLine:null===(n=this.props.navTree.spans[0])||void 0===n||null===(r=n.end)||void 0===r?void 0:r.line}},pt.dom("div",{className:"header list-item",on:{click:t=>this.entryClicked(t,i)}},pt.dom("span",{className:a},i.text)),pt.dom("ol",{className:"entries list-tree"},i.childItems?i.childItems.map((t=>pt.dom(Xe,{navTree:t,ctrl:o}))):null))}getStyles(){const{kind:t}=this.props.navTree;let e="icon icon-"+t;const{kindModifiers:n}=this.props.navTree;return n&&(e+=" "+n.split(/[, ]/).map((t=>"modifier-"+t.trim())).join(" ")),e}entryClicked(t,e){t.stopPropagation();(function(t,e){return!!t.childItems&&e.target===e.currentTarget})(e,t)?(e.collapsed=!e.collapsed,Qt(pt.update(this))):this.props.ctrl.gotoNode(e)}}var tn=T(Zt);class en{constructor(t){this.props=t,this.subscriptions=new d,this.longLineLength=4e3,this.largeFileLineCount=500,this.loadNavTree=async()=>{if(!this.editor)return;if(!this.getClient)return;const t=this.editor.getPath();if(void 0!==t)try{const e=await this.getClient(t),n=(await e.execute("navtree",{file:t})).body;n&&(this.setNavTree(n),await pt.update(this))}catch(e){console.error(e,t)}},this.selectAtCursorLine=({newBufferPosition:t})=>{var e,n;const r=this.firstNode();if(!r)return;const i=t.row,o=null!==(e=null===(n=Qe(i,i,r))||void 0===n?void 0:n.querySelector(".header"))&&void 0!==e?e:void 0,s=this.getSelectedNode();o!==s&&(s&&s.classList.remove("selected"),o&&o.classList.add("selected"))},this.subscribeToEditor=async t=>{if(this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),!t||!He(t))return this.update({navTree:null});this.editor=t,await this.loadNavTree();const e=this.lineCountIfLarge(t);atom.config.get("atom-typescript.largeFileNoFollowCursor")&&0!==e||(this.editorScrolling=t.onDidChangeCursorPosition(this.selectAtCursorLine)),this.editorChanging=t.onDidStopChanging(0===e?this.loadNavTree:tn(this.loadNavTree,Math.max(e/5,300)))},Ye(t.navTree),pt.initialize(this),this.subscriptions.add(atom.workspace.observeActiveTextEditor(this.subscribeToEditor),atom.commands.add("atom-text-editor.typescript-editor",{"typescript:reveal-in-semantic-view":{description:"Reveal the symbol under the text cursor in semantic view",didDispatch:t=>{const e=t.currentTarget.getModel();this.selectAtCursorLine({newBufferPosition:e.getCursorBufferPosition()})}}}),atom.config.observe("atom-typescript.longLineLength",(t=>{t>0&&(this.longLineLength=t)})),atom.config.observe("atom-typescript.largeFileLineCount",(t=>{t>0&&(this.largeFileLineCount=t)})),atom.config.observe("linter-ui-default.longLineLength",(t=>{atom.config.get("atom-typescript.longLineLength")>0||"number"==typeof t&&(this.longLineLength=t)})),atom.config.observe("linter-ui-default.largeFileLineCount",(t=>{atom.config.get("atom-typescript.largeFileLineCount")>0||"number"==typeof t&&(this.largeFileLineCount=t/6)})))}async update(t){void 0!==t.navTree&&this.setNavTree(t.navTree),this.props={...this.props,...t},await pt.update(this)}async destroy(){this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),this.editorScrolling=void 0,this.editorChanging=void 0,this.subscriptions.dispose(),await pt.destroy(this)}async setGetClient(t){this.getClient=t,await this.loadNavTree()}getSelectedNode(){var t;return null!==(t=this.element.querySelector(".header.selected"))&&void 0!==t?t:void 0}clearSelection(){const t=this.element.querySelectorAll(".header.selected");for(let e=0;e<t.length;e+=1)t.item(e).classList.remove("selected")}markSelection(t){if(this.clearSelection(),!t)return;const e=t.querySelector(".header");e&&e.classList.add("selected")}firstNode(){var t;return null!==(t=this.element.querySelector("li.node"))&&void 0!==t?t:void 0}render(){const t=this.props.navTree?pt.dom(Xe,{navTree:this.props.navTree,ctrl:this}):null;return pt.dom("div",{className:"atomts atomts-semantic-view native-key-bindings"},pt.dom("ol",{className:"list-tree has-collapsable-children focusable-panel"},t))}readAfterUpdate(){const t=this.element.querySelector(".selected");t&&this.scrollTo(t)}gotoNode(t){if(!this.editor)return;const e=Ze(t),n=function(t){return t.spans.length>0?t.spans[0].start.offset-1:0}(t);this.editor.setCursorBufferPosition([e,n])}getCursorLine(){return this.editor?this.editor.getLastCursor().getBufferRow():void 0}setNavTree(t){if(Ye(t),Jt.isEqual(t,this.props.navTree))return;Je(t,this.props.navTree),this.props.navTree=t;const e=this.firstNode();if(e){const t=this.getCursorLine();void 0!==t&&this.markSelection(Qe(t,t,e))}}scrollTo(t){const e=t;"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}lineCountIfLarge(t){const e=t.getLineCount();if(e>=this.largeFileLineCount)return e;{const n=t.getBuffer();for(let t=0,r=e;t<r;t++)if(n.lineLengthForRow(t)>this.longLineLength)return this.longLineLength/100;return 0}}}class nn{constructor(t){this.comp=new en({navTree:t.navTree})}static create(t){return nn.instance||(nn.instance=new nn(t)),nn.instance}get element(){return this.comp.element}async setGetClient(t){await this.comp.setGetClient(t),await this.comp.update({})}getTitle(){return"TypeScript"}getURI(){return"atom-typescript://semantic-view"}async destroy(){nn.instance=null,await this.comp.destroy()}getDefaultLocation(){return"right"}getAllowedLocations(){return["left","right"]}serialize(){return{deserializer:"atomts-semantic-view/SemanticView",data:{navTree:this.comp.props.navTree}}}}nn.instance=null;var rn,on=u,sn=a,an=s;rn=function(t,e){return cn(t,e)};var cn=function(t,e){return t?un(t,e):new ln(e)};rn.createStream=cn;function un(t,e){if(!t)throw new Error("expected readStream");if(!t.readable)throw new Error("readStream must be readable");var n=new ln(e);return t.pipe(n),n}function ln(t){on.Transform.call(this,t),t=t||{},this._readableState.objectMode=!0,this._lineBuffer=[],this._keepEmptyLines=t.keepEmptyLines||!1,this._lastChunkEndedWithCR=!1;var e=this;this.on("pipe",(function(t){e.encoding||t instanceof on.Readable&&(e.encoding=t._readableState.encoding)}))}rn.createLineStream=function(t){return console.log("WARNING: byline#createLineStream is deprecated and will be removed soon"),un(t)},rn.LineStream=ln,sn.inherits(ln,on.Transform),ln.prototype._transform=function(t,e,n){e=e||"utf8",Buffer.isBuffer(t)&&("buffer"==e?(t=t.toString(),e="utf8"):t=t.toString(e)),this._chunkEncoding=e;var r=t.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/g);this._lastChunkEndedWithCR&&"\n"==t[0]&&r.shift(),this._lineBuffer.length>0&&(this._lineBuffer[this._lineBuffer.length-1]+=r[0],r.shift()),this._lastChunkEndedWithCR="\r"==t[t.length-1],this._lineBuffer=this._lineBuffer.concat(r),this._pushBuffer(e,1,n)},ln.prototype._pushBuffer=function(t,e,n){for(;this._lineBuffer.length>e;){var r=this._lineBuffer.shift();if((this._keepEmptyLines||r.length>0)&&!this.push(this._reencode(r,t))){var i=this;return void an.setImmediate((function(){i._pushBuffer(t,e,n)}))}}n()},ln.prototype._flush=function(t){this._pushBuffer(this._chunkEncoding,0,t)},ln.prototype._reencode=function(t,e){return this.encoding&&this.encoding!=e?new Buffer(t,e).toString(this.encoding):this.encoding?t:new Buffer(t,e)};class fn{constructor(t){this.reportBusyWhile=t,this.callbacks=new Map,this.interval=0}async add(t,e){try{const n=new Promise(((n,r)=>{this.callbacks.set(t,{command:e,resolve:n,reject:r,started:Date.now()})}));return 0===this.interval&&(this.interval=window.setInterval((()=>{process.activateUvLoop()}),100)),await this.reportBusyWhile(e,(()=>n))}finally{this.callbacks.delete(t),0!==this.interval&&0===this.callbacks.size&&(clearInterval(this.interval),this.interval=0)}}rejectAll(t){for(const{reject:e}of this.callbacks.values())e(t);this.callbacks.clear()}resolve(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log("received response for",t.command,"in",Date.now()-e.started,"ms","with data",t.body),t.success?e.resolve(t):e.reject(new Error(t.message))):console.warn("unexpected response:",t)}resolveMS(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log(`received requestCompleted event for multistep command ${e.command} in ${Date.now()-e.started} ms`),e.resolve(void 0)):console.warn("unexpected requestCompleted event:",t)}error(t,e){const n=this.callbacks.get(t);n?n.reject(e):console.error(e)}}const pn=new Set(Object.keys({compileOnSaveAffectedFileList:!0,compileOnSaveEmitFile:!0,completionEntryDetails:!0,completions:!0,completionInfo:!0,configure:!0,definition:!0,format:!0,getCodeFixes:!0,getSupportedCodeFixes:!0,documentHighlights:!0,projectInfo:!0,quickinfo:!0,references:!0,reload:!0,rename:!0,navtree:!0,navto:!0,getApplicableRefactors:!0,getEditsForRefactor:!0,organizeImports:!0,signatureHelp:!0,getEditsForFileRename:!0,applyCodeActionCommand:!0})),hn=new Set(Object.keys({geterr:!0,geterrForProject:!0})),dn=new Set(Object.keys({configFileDiag:!0,semanticDiag:!0,suggestionDiag:!0,syntaxDiag:!0}));class gn{constructor(t,e,n){this.tsServerPath=t,this.version=e,this.reportBusyWhile=n,this.emitter=new m,this.seq=0,this.lastStderrOutput="",this.on=this.emitter.on.bind(this.emitter),this.exitHandler=(t,e=!0)=>{if(this.callbacks.rejectAll(t),e&&console.error("tsserver: ",t),this.server=void 0,this.emitter.emit("terminated"),e){let e=t.message;this.lastStderrOutput&&(e=`Last output from tsserver:\n${this.lastStderrOutput}\n\n${e}`),atom.notifications.addError("TypeScript server quit unexpectedly",{detail:e,stack:t.stack,dismissable:!0})}},this.onMessage=t=>{"response"===t.type?this.callbacks.resolve(t):this.onEvent(t)};const[r,i]=e.split(".").slice(0,2).map((t=>parseInt(t,10)));this.multistepSupported=r>2||2===r&&i>=2,this.callbacks=new fn(this.reportBusyWhile),this.server=this.startServer()}async execute(t,...e){this.server||(this.server=this.startServer(),this.emitter.emit("restarted"));const n={seq:this.seq++,command:t,arguments:e[0]};window.atom_typescript_debug&&console.log("sending request",n);let r=void 0;(function(t){return pn.has(t)}(t)||this.multistepSupported&&function(t){return hn.has(t)}(t))&&(r=this.callbacks.add(n.seq,t));try{if(!this.server.stdin)throw new Error("Server stdin is missing");this.server.stdin.write(JSON.stringify(n)+"\n")}catch(t){this.callbacks.error(n.seq,t)}return r}async restartServer(){if(this.server){const t=this.server,e=setTimeout((()=>t.kill()),1e4);await Promise.all([this.execute("exit"),new Promise((t=>{const e=this.emitter.once("terminated",(()=>{e.dispose(),t()}))}))]),clearTimeout(e)}this.server||(this.server=this.startServer(),this.emitter.emit("restarted"))}startServer(){window.atom_typescript_debug&&console.log("starting",this.tsServerPath);const t=function(t){const e=atom.config.get("atom-typescript").locale,n=e?["--locale",e]:[];return new v({command:t,args:n}).process}(this.tsServerPath);if(!t)throw new Error("ChildProcess failed to start");const e=this.exitHandler;if(t.once("error",e),t.once("exit",((t,n)=>{0===t?e(new Error("Server stopped normally"),!1):null!==t?e(new Error("exited with code: "+t)):null!==n&&e(new Error("terminated on signal: "+n))})),!t.stdout)throw new Error("ChildProcess stdout missing");if(!t.stderr)throw new Error("ChildProcess stderr missing");var n;return(n=t.stdout,n.pipe(vn()).pipe(new yn)).on("data",this.onMessage),t.stderr.on("data",(t=>{console.warn("tsserver stderr:",this.lastStderrOutput=t.toString())})),t}onEvent(t){var e;window.atom_typescript_debug&&console.log("received event",t),t.body&&(e=t.event,dn.has(e)?this.emitter.emit(t.event,t.body):"requestCompleted"===t.event&&this.callbacks.resolveMS(t.body))}}var mn,vn=T(rn);class yn extends l{constructor(){super({objectMode:!0})}_transform(t,e,n){const r=t.toString();try{r.startsWith("{")?this.push(JSON.parse(r)):r.startsWith("Content-Length:")||console.warn(r)}catch(t){console.error("client: failed to parse: ",r)}finally{n(void 0)}}}function wn(t,e){void 0===e&&(e=!1);var n=t.length,r=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,f=0;function p(e,n){for(var i=0,o=0;i<e||!n;){var s=t.charCodeAt(r);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}r++,i++}return i<e&&(o=-1),o}function h(){if(i="",f=0,o=r,c=a,l=u,r>=n)return o=n,s=17;var e=t.charCodeAt(r);if(bn(e)){do{r++,i+=String.fromCharCode(e),e=t.charCodeAt(r)}while(bn(e));return s=15}if(_n(e))return r++,i+=String.fromCharCode(e),13===e&&10===t.charCodeAt(r)&&(r++,i+="\n"),a++,u=r,s=14;switch(e){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=function(){for(var e="",i=r;;){if(r>=n){e+=t.substring(i,r),f=2;break}var o=t.charCodeAt(r);if(34===o){e+=t.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(_n(o)){e+=t.substring(i,r),f=2;break}f=6}r++}else{if(e+=t.substring(i,r),++r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:e+='"';break;case 92:e+="\\";break;case 47:e+="/";break;case 98:e+="\b";break;case 102:e+="\f";break;case 110:e+="\n";break;case 114:e+="\r";break;case 116:e+="\t";break;case 117:var s=p(4,!0);s>=0?e+=String.fromCharCode(s):f=4;break;default:f=5}i=r}}return e}(),s=10;case 47:var h=r-1;if(47===t.charCodeAt(r+1)){for(r+=2;r<n&&!_n(t.charCodeAt(r));)r++;return i=t.substring(h,r),s=12}if(42===t.charCodeAt(r+1)){r+=2;for(var g=n-1,m=!1;r<g;){var v=t.charCodeAt(r);if(42===v&&47===t.charCodeAt(r+1)){r+=2,m=!0;break}r++,_n(v)&&(13===v&&10===t.charCodeAt(r)&&r++,a++,u=r)}return m||(r++,f=1),i=t.substring(h,r),s=13}return i+=String.fromCharCode(e),r++,s=16;case 45:if(i+=String.fromCharCode(e),++r===n||!Sn(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=function(){var e=r;if(48===t.charCodeAt(r))r++;else for(r++;r<t.length&&Sn(t.charCodeAt(r));)r++;if(r<t.length&&46===t.charCodeAt(r)){if(!(++r<t.length&&Sn(t.charCodeAt(r))))return f=3,t.substring(e,r);for(r++;r<t.length&&Sn(t.charCodeAt(r));)r++}var n=r;if(r<t.length&&(69===t.charCodeAt(r)||101===t.charCodeAt(r)))if((++r<t.length&&43===t.charCodeAt(r)||45===t.charCodeAt(r))&&r++,r<t.length&&Sn(t.charCodeAt(r))){for(r++;r<t.length&&Sn(t.charCodeAt(r));)r++;n=r}else f=3;return t.substring(e,n)}(),s=11;default:for(;r<n&&d(e);)r++,e=t.charCodeAt(r);if(o!==r){switch(i=t.substring(o,r)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(e),r++,s=16}}function d(t){if(bn(t)||_n(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(t){r=t,i="",o=0,s=16,f=0},getPosition:function(){return r},scan:e?function(){var t;do{t=h()}while(t>=12&&t<=15);return t}:h,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return r-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-l},getTokenError:function(){return f}}}function bn(t){return 32===t||9===t||11===t||12===t||160===t||5760===t||t>=8192&&t<=8203||8239===t||8287===t||12288===t||65279===t}function _n(t){return 10===t||13===t||8232===t||8233===t}function Sn(t){return t>=48&&t<=57}(mn||(mn={})).DEFAULT={allowTrailingComma:!1};var xn,kn,En=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=mn.DEFAULT);var r=null,i=[],o=[];function s(t){Array.isArray(i)?i.push(t):null!==r&&(i[r]=t)}return function(t,e,n){void 0===n&&(n=mn.DEFAULT);var r=wn(t,!1);function i(t){return t?function(){return t(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function o(t){return t?function(e){return t(e,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),u=i(e.onArrayBegin),l=i(e.onArrayEnd),f=o(e.onLiteralValue),p=o(e.onSeparator),h=i(e.onComment),d=o(e.onError),g=n&&n.disallowComments,m=n&&n.allowTrailingComma;function v(){for(;;){var t=r.scan();switch(r.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:g||y(11);break;case 2:y(12);break;case 6:y(16)}switch(t){case 12:case 13:g?y(10):h();break;case 16:y(1);break;case 15:case 14:break;default:return t}}}function y(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=[]),d(t),e.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==e.indexOf(i)){v();break}if(-1!==n.indexOf(i))break;i=v()}}function w(t){var e=r.getTokenValue();return t?f(e):a(e),v(),!0}function b(){switch(r.getToken()){case 11:var t=r.getTokenValue(),e=Number(t);isNaN(e)&&(y(2),e=0),f(e);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return v(),!0}function _(){return 10!==r.getToken()?(y(3,[],[2,5]),!1):(w(!1),6===r.getToken()?(p(":"),v(),k()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function S(){s(),v();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),2===r.getToken()&&m)break}else t&&y(6,[],[]);_()||y(4,[],[2,5]),t=!0}return c(),2!==r.getToken()?y(7,[2],[]):v(),!0}function x(){u(),v();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),4===r.getToken()&&m)break}else t&&y(6,[],[]);k()||y(4,[],[4,5]),t=!0}return l(),4!==r.getToken()?y(8,[4],[]):v(),!0}function k(){switch(r.getToken()){case 3:return x();case 1:return S();case 10:return w(!0);default:return b()}}if(v(),17===r.getToken())return!!n.allowEmptyContent||(y(4,[],[]),!1);if(!k())return y(4,[],[]),!1;17!==r.getToken()&&y(9,[],[])}(t,{onObjectBegin:function(){var t={};s(t),o.push(i),i=t,r=null},onObjectProperty:function(t){r=t},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var t=[];s(t),o.push(i),i=t,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(t,n,r){e.push({error:t,offset:n,length:r})}},n),i[0]},Cn=x,Tn=b;kn=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var e=(new Error).stack;return Error.prepareStackTrace=t,e[2].getFileName()};var An,Pn,On,In,jn,Nn,Ln,Fn,Dn,Mn,Rn=b,Bn=!1;function zn(){Pn={},On="win32"===process.platform,In=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,jn=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,(Nn={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n,r,i,o,s=(e=t,n=In.exec(e),r=(n[1]||"")+(n[2]||""),i=n[3]||"",o=jn.exec(i),[r,o[1],o[2],o[3]]);if(!s||4!==s.length)throw new TypeError("Invalid path '"+t+"'");return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},Ln=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,(Fn={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n=(e=t,Ln.exec(e).slice(1));if(!n||4!==n.length)throw new TypeError("Invalid path '"+t+"'");return n[1]=n[1]||"",n[2]=n[2]||"",n[3]=n[3]||"",{root:n[0],dir:n[0]+n[1].slice(0,-1),base:n[2],ext:n[3],name:n[2].slice(0,n[2].length-n[3].length)}},Pn=On?Nn.parse:Fn.parse,Dn=Fn.parse,Pn.posix=Dn,Mn=Nn.parse,Pn.win32=Mn}var qn=Rn.parse||(Bn||(Bn=!0,zn()),Pn),Hn=function(t,e){var n="/";/^([A-Za-z]:)/.test(t)?n="":/^\\\\/.test(t)&&(n="\\\\");for(var r=[t],i=qn(t);i.dir!==r[r.length-1];)r.push(i.dir),i=qn(i.dir);return r.reduce((function(t,r){return t.concat(e.map((function(t){return Rn.resolve(n,r,t)})))}),[])};An=function(t,e,n){var r=e&&e.moduleDirectory?[].concat(e.moduleDirectory):["node_modules"];if(e&&"function"==typeof e.paths)return e.paths(n,t,(function(){return Hn(t,r)}),e);var i=Hn(t,r);return e&&e.paths?i.concat(e.paths):i};var $n;$n=function(t,e){return e||{}};var Un,Vn,Wn={},Gn={},Kn=Array.prototype.slice,Qn=Object.prototype.toString;function Zn(t,e){for(var n=t.split("."),r=e.split(" "),i=r.length>1?r[0]:"=",o=(r.length>1?r[1]:r[0]).split("."),s=0;s<3;++s){var a=parseInt(n[s]||0,10),c=parseInt(o[s]||0,10);if(a!==c)return"<"===i?a<c:">="===i&&a>=c}return">="===i}function Jn(t,e){var n=e.split(/ ?&& ?/);if(0===n.length)return!1;for(var r=0;r<n.length;++r)if(!Zn(t,n[r]))return!1;return!0}Vn=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==Qn.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=Kn.call(arguments,1),i=function(){if(this instanceof n){var i=e.apply(this,r.concat(Kn.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(Kn.call(arguments)))},o=Math.max(0,e.length-r.length),s=[],a=0;a<o;a++)s.push("$"+a);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},Gn=Function.prototype.bind||Vn,Wn=Gn.call(Function.call,Object.prototype.hasOwnProperty);var Yn;Yn=JSON.parse('{"assert":true,"assert/strict":">= 15","async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"diagnostics_channel":">= 15.1","dns":true,"dns/promises":">= 15","domain":">= 0.7.12","events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"path/posix":">= 15.3","path/win32":">= 15.3","perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"stream/promises":">= 15","string_decoder":true,"sys":[">= 0.6 && < 0.7",">= 0.8"],"timers":true,"timers/promises":">= 15","_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"util/types":">= 15.3","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}'),Un=function(t,e){return Wn(Yn,t)&&function(t,e){if("boolean"==typeof e)return e;var n=void 0===t?process.versions&&process.versions.node&&process.versions.node:t;if("string"!=typeof n)throw new TypeError(void 0===t?"Unable to determine current node version":"If provided, a valid node version is required");if(e&&"object"==typeof e){for(var r=0;r<e.length;++r)if(Jn(n,e[r]))return!0;return!1}return Jn(n,e)}(e,Yn[t])};var Xn=Cn.realpath&&"function"==typeof Cn.realpath.native?Cn.realpath.native:Cn.realpath,tr=function(t,e){Cn.stat(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isFile()||n.isFIFO())}))},er=function(t,e){Cn.stat(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isDirectory())}))},nr=function(t,e){Xn(t,(function(n,r){n&&"ENOENT"!==n.code?e(n):e(null,n?t:r)}))},rr=function(t,e,n,r){n&&!1===n.preserveSymlinks?t(e,r):r(null,e)},ir=function(t,e,n){t(e,(function(t,e){if(t)n(t);else try{var r=JSON.parse(e);n(null,r)}catch(t){n(null)}}))};xn=function(t,e,n){var r=n,i=e;if("function"==typeof e&&(r=i,i={}),"string"!=typeof t){var o=new TypeError("Path must be a string.");return process.nextTick((function(){r(o)}))}var s=(i=$n(0,i)).isFile||tr,a=i.isDirectory||er,c=i.readFile||Cn.readFile,u=i.realpath||nr,l=i.readPackage||ir;if(i.readFile&&i.readPackage){var f=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick((function(){r(f)}))}var p=i.packageIterator,h=i.extensions||[".js"],d=!1!==i.includeCoreModules,g=i.basedir||Tn.dirname(kn()),m=i.filename||g;i.paths=i.paths||[];var v,y=Tn.resolve(g);function w(e,n,o){e?r(e):n?r(null,n,o):S(v,(function(e,n,o){if(e)r(e);else if(n)rr(u,n,i,(function(t,e){t?r(t):r(null,e,o)}));else{var s=new Error("Cannot find module '"+t+"' from '"+m+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}function b(t,e,n){var r=e,o=n;"function"==typeof r&&(o=r,r=void 0),function t(e,n,r){if(0===e.length)return o(null,void 0,r);var a=n+e[0],c=r;c?u(null,c):_(Tn.dirname(a),u);function u(r,u,f){if(c=u,r)return o(r);if(f&&c&&i.pathFilter){var p=Tn.relative(f,a),d=p.slice(0,p.length-e[0].length),g=i.pathFilter(c,n,d);if(g)return t([""].concat(h.slice()),Tn.resolve(f,g),c)}s(a,l)}function l(r,i){return r?o(r):i?o(null,a,c):void t(e.slice(1),n,c)}}([""].concat(h),t,r)}function _(t,e){return""===t||"/"===t||"win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t)?e(null):void rr(u,t,i,(function(n,r){if(n)return _(Tn.dirname(t),e);var o=Tn.join(r,"package.json");s(o,(function(n,r){if(!r)return _(Tn.dirname(t),e);l(c,o,(function(n,r){n&&e(n);var s=r;s&&i.packageFilter&&(s=i.packageFilter(s,o)),e(null,s,t)}))}))}))}function S(t,e,n){var r=n,o=e;"function"==typeof o&&(r=o,o=i.package),rr(u,t,i,(function(e,n){if(e)return r(e);var a=Tn.join(n,"package.json");s(a,(function(e,n){return e?r(e):n?void l(c,a,(function(e,n){if(e)return r(e);var o=n;if(o&&i.packageFilter&&(o=i.packageFilter(o,a)),o&&o.main){if("string"!=typeof o.main){var s=new TypeError("package “"+o.name+"” `main` must be a string");return s.code="INVALID_PACKAGE_MAIN",r(s)}return"."!==o.main&&"./"!==o.main||(o.main="index"),void b(Tn.resolve(t,o.main),o,(function(e,n,i){return e?r(e):n?r(null,n,i):i?void S(Tn.resolve(t,i.main),i,(function(e,n,i){return e?r(e):n?r(null,n,i):void b(Tn.join(t,"index"),i,r)})):b(Tn.join(t,"index"),i,r)}))}b(Tn.join(t,"/index"),o,r)})):b(Tn.join(t,"index"),o,r)}))}))}function x(t,e){if(0===e.length)return t(null,void 0);var n=e[0];function r(e,r,s){return e?t(e):r?t(null,r,s):void S(n,i.package,o)}function o(n,r,i){return n?t(n):r?t(null,r,i):void x(t,e.slice(1))}a(Tn.dirname(n),(function(o,s){if(o)return t(o);if(!s)return x(t,e.slice(1));b(n,i.package,r)}))}rr(u,y,i,(function(e,n){e?r(e):function(e){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t))v=Tn.resolve(e,t),"."!==t&&".."!==t&&"/"!==t.slice(-1)||(v+="/"),/\/$/.test(t)&&v===e?S(v,i.package,w):b(v,i.package,w);else{if(d&&Un(t))return r(null,t);!function(t,e,n){var r=function(){return function(t,e,n){for(var r=An(e,n,t),i=0;i<r.length;i++)r[i]=Tn.join(r[i],t);return r}(t,e,i)};x(n,p?p(t,e,r,i):r())}(t,e,(function(e,n,o){if(e)r(e);else{if(n)return rr(u,n,i,(function(t,e){t?r(t):r(null,e,o)}));var s=new Error("Cannot find module '"+t+"' from '"+m+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}}(n)}))};var or=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function sr(t){for(var e=t.split(" "),n=e.length>1?e[0]:"=",r=(e.length>1?e[1]:e[0]).split("."),i=0;i<3;++i){var o=parseInt(or[i]||0,10),s=parseInt(r[i]||0,10);if(o!==s)return"<"===n?o<s:">="===n&&o>=s}return">="===n}function ar(t){var e=t.split(/ ?&& ?/);if(0===e.length)return!1;for(var n=0;n<e.length;++n)if(!sr(e[n]))return!1;return!0}function cr(t){if("boolean"==typeof t)return t;if(t&&"object"==typeof t){for(var e=0;e<t.length;++e)if(ar(t[e]))return!0;return!1}return ar(t)}var ur;ur=JSON.parse('{"assert":true,"assert/strict":">= 15","async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"diagnostics_channel":">= 15.1","dns":true,"dns/promises":">= 15","domain":">= 0.7.12","events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"path/posix":">= 15.3","path/win32":">= 15.3","perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"stream/promises":">= 15","string_decoder":true,"sys":[">= 0.6 && < 0.7",">= 0.8"],"timers":true,"timers/promises":">= 15","_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"util/types":">= 15.3","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}');var lr={};for(var fr in ur)Object.prototype.hasOwnProperty.call(ur,fr)&&(lr[fr]=cr(ur[fr]));xn.core=lr;xn.isCore=function(t){return Un(t)};var pr=x,hr=b,dr=pr.realpathSync&&"function"==typeof pr.realpathSync.native?pr.realpathSync.native:pr.realpathSync,gr=function(t){try{var e=pr.statSync(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isFile()||e.isFIFO()},mr=function(t){try{var e=pr.statSync(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isDirectory()},vr=function(t){try{return dr(t)}catch(t){if("ENOENT"!==t.code)throw t}return t},yr=function(t,e,n){return n&&!1===n.preserveSymlinks?t(e):e},wr=function(t,e){var n=t(e);try{return JSON.parse(n)}catch(t){}};async function br(t,e){const{NODE_PATH:n}=process.env,r=e+".js",i=await async function(t,e){return new Promise(((n,r)=>_r(t,e,((t,e)=>{t?r(t):void 0===e?r(new Error("Module path is undefined")):n(e)}))))}("typescript/lib/"+r,{basedir:b.dirname(t),paths:void 0!==n?n.split(b.delimiter):void 0}).catch((async()=>{const e=await async function(t){const e=await async function(t){let e=t,n=b.dirname(e);for(;e!==n;){const t=await xr(e,[[".atom-typescript.json"],[".atom","atom-typescript.json"],[".vscode","settings.json"]]);if(void 0!==t)return{basedir:e,configFile:t};e=n,n=b.dirname(e)}}(t);if(e)try{const t=En(await async function(t){return new Promise(((e,n)=>x.readFile(t,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))}(e.configFile));let r;if("object"==typeof(n=t)&&null!==n&&"string"==typeof n.tsdkPath)r=t.tsdkPath;else{if(!function(t){return"object"==typeof t&&null!==t&&"string"==typeof t["typescript.tsdk"]}(t))return;r=b.dirname(t["typescript.tsdk"])}return b.isAbsolute(r)?r:b.join(e.basedir,r)}catch(t){console.warn(t)}var n}(b.dirname(t));if(void 0!==e){const t=b.join(e,"lib",r);if(await Sr(t))return t}const n=atom.config.get("atom-typescript.tsdkPath");if(n){const t=b.join(n,"lib",r);if(await Sr(t))return t}return require.resolve("typescript/lib/"+r)})),o=b.resolve(i,"../../package.json");return{version:require(o).version,pathToBin:i}}xn.sync=function(t,e){if("string"!=typeof t)throw new TypeError("Path must be a string.");var n=$n(0,e),r=n.isFile||gr,i=n.readFileSync||pr.readFileSync,o=n.isDirectory||mr,s=n.realpathSync||vr,a=n.readPackageSync||wr;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var c=n.packageIterator,u=n.extensions||[".js"],l=!1!==n.includeCoreModules,f=n.basedir||hr.dirname(kn()),p=n.filename||f;n.paths=n.paths||[];var h=yr(s,hr.resolve(f),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t)){var d=hr.resolve(h,t);"."!==t&&".."!==t&&"/"!==t.slice(-1)||(d+="/");var g=y(d)||b(d);if(g)return yr(s,g,n)}else{if(l&&Un(t))return t;var m=function(t,e){for(var r=function(){return function(t,e,n){for(var r=An(e,n,t),i=0;i<r.length;i++)r[i]=hr.join(r[i],t);return r}(t,e,n)},i=c?c(t,e,r,n):r(),s=0;s<i.length;s++){var a=i[s];if(o(hr.dirname(a))){var u=y(a);if(u)return u;var l=b(a);if(l)return l}}}(t,h);if(m)return yr(s,m,n)}var v=new Error("Cannot find module '"+t+"' from '"+p+"'");throw v.code="MODULE_NOT_FOUND",v;function y(t){var e=w(hr.dirname(t));if(e&&e.dir&&e.pkg&&n.pathFilter){var i=hr.relative(e.dir,t),o=n.pathFilter(e.pkg,t,i);o&&(t=hr.resolve(e.dir,o))}if(r(t))return t;for(var s=0;s<u.length;s++){var a=t+u[s];if(r(a))return a}}function w(t){if(""!==t&&"/"!==t&&!("win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t))){var e=hr.join(yr(s,t,n),"package.json");if(!r(e))return w(hr.dirname(t));var o=a(i,e);return o&&n.packageFilter&&(o=n.packageFilter(o,t)),{pkg:o,dir:t}}}function b(t){var e=hr.join(yr(s,t,n),"/package.json");if(r(e)){try{var o=a(i,e)}catch(t){}if(o&&n.packageFilter&&(o=n.packageFilter(o,t)),o&&o.main){if("string"!=typeof o.main){var c=new TypeError("package “"+o.name+"” `main` must be a string");throw c.code="INVALID_PACKAGE_MAIN",c}"."!==o.main&&"./"!==o.main||(o.main="index");try{var u=y(hr.resolve(t,o.main));if(u)return u;var l=b(hr.resolve(t,o.main));if(l)return l}catch(t){}}}return y(hr.join(t,"/index"))}};var _r=T(xn);async function Sr(t){return new Promise((e=>x.access(t,x.constants.F_OK,(t=>{e(!t)}))))}async function xr(t,e){for(const n of e){const e=b.join(t,...n);if(await Sr(e))return e}}class kr{constructor(t){this.reportBusyWhile=t,this.clients=new Map,this.memoizedClients=new Map,this.emitter=new m,this.subscriptions=new d,this.tsserverInstancePerTsconfig=atom.config.get("atom-typescript").tsserverInstancePerTsconfig,this.on=this.emitter.on.bind(this.emitter),this.diagnosticHandler=(t,e)=>n=>{const r=(i=n)&&i.triggerFile&&i.configFile?n.configFile:n.file;var i;r&&this.emitter.emit("diagnostics",{type:e,serverPath:t,filePath:r,diagnostics:n.diagnostics})}}async restartAllServers(){await this.reportBusyWhile("Restarting servers",(()=>Promise.all(Array.from(this.getAllClients()).map((t=>t.restartServer())))))}async get(t){const e=this.memoizedClients.get(t);if(e)return e;const n=this._get(t);this.memoizedClients.set(t,n);try{return await n}catch(e){throw this.memoizedClients.delete(t),e}}dispose(){this.emitter.dispose(),this.subscriptions.dispose(),this.memoizedClients.clear(),this.clients.clear()}async _get(t){const{pathToBin:e,version:n}=await br(t,"tsserver"),r=this.tsserverInstancePerTsconfig?f.findConfigFile(t,(t=>f.sys.fileExists(t))):void 0;let i=this.clients.get(e);i||(i=new Map,this.clients.set(e,i));const o=i.get(r);if(o)return o;const s=new gn(e,n,this.reportBusyWhile);return i.set(r,s),this.subscriptions.add(s.on("configFileDiag",this.diagnosticHandler(e,"configFileDiag")),s.on("semanticDiag",this.diagnosticHandler(e,"semanticDiag")),s.on("syntaxDiag",this.diagnosticHandler(e,"syntaxDiag")),s.on("suggestionDiag",this.diagnosticHandler(e,"suggestionDiag"))),s}*getAllClients(){for(const t of this.clients.values())yield*t.values()}}let Er=0;let Cr=100;function Tr(t){return{grammarScopes:qe(),priority:Cr++,async highlight(e,n){if(!He(e))return;const r=We(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("documentHighlights",{...r,filesToSearch:[r.file]});return o.body?Array.from(function*(t,e){for(const n of e)n.file===t&&(yield*n.highlightSpans.map(Oe))}(r.file,o.body)):void 0}}}async function Ar(t,e,n){if(void 0===t)return null;const r=e.dom("div",{className:"atom-typescript-datatip-tooltip-kind"},t.kind,function(t,e){return void 0===e?null:t.dom("span",{className:"atom-typescript-datatip-tooltip-kind-modifiers"},e)}(t.kindModifiers)),i=t.tags?t.tags.map((t=>{const n="atom-typescript-datatip-tooltip-doc-tag atom-typescript-datatip-tooltip-doc-tag-name-"+t.name;return e.dom("div",{className:n},e.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-name"},t.name),function(t,e){if(void 0===e)return null;const[,n,r]=/^\s*(\S*)([^]*)$/.exec(e);return t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text"},t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text-first-word"},n),r)}(e,t.text))})):null,o=e.dom("div",{className:"atom-typescript-datatip-tooltip-doc"},t.documentation,i),s=t.displayString.replace(/^\(.+?\)\s+/,"");return[await n(s),r,o]}const Pr=Symbol.for("react.element"),Or={dom:(t,e,...n)=>n.length>0?{$$typeof:Pr,type:t,ref:null,props:{...e,children:n}}:{$$typeof:Pr,type:t,ref:null,props:{...e}}};class Ir{constructor(t){this.getClient=t,this.providerName="TypeScript type tooltips",this.priority=100,this.grammarScopes=qe(),this.priority++}async datatip(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("quickinfo",{file:n,line:e.row+1,offset:e.column+1})).body,o=await Ar(i,Or,jr);return{component:()=>Or.dom("div",{className:"atom-typescript-datatip-tooltip"},o),range:h.Range.fromObject([Pe(i.start),Pe(i.end)])}}catch(t){return}}}async function jr(t){const e=atom.config.get("editor.fontFamily"),n=await Be(t.replace(/\r?\n$/,""),"source.ts");return Or.dom("div",{style:{fontFamily:e},className:"atom-typescript-datatip-tooltip-code",dangerouslySetInnerHTML:{__html:n}})}let Nr=0;function Lr(t){const e=Oe(t);return{path:t.file,position:e.start,range:e,language:"TypeScript"}}function Fr(t){return{uri:t.file,range:Ie(t.start,t.end),name:void 0}}class Dr{constructor(t){this.props=t,pt.initialize(this)}async update(t){return this.props={...this.props,...t},pt.update(this)}render(){const t={fontFamily:atom.config.get("editor.fontFamily")};return pt.dom("div",{className:"editor editor-colors",style:t,innerHTML:this.props.highlightedText})}}var Mr,Rr,Br,zr={},qr=!1;function Hr(){return qr||(qr=!0,function(){var t,e;t=b.sep,Mr=function(e,n,r){var i,o,s,a,c;for(o=e.length-1;e[o]===t;)o--;for(c=0,s=o,i=null;o>=0;)e[o]===t?(c++,null==i&&(i=e.substring(o+1,s+1))):0===o&&(s<e.length-1?null==i&&(i=e.substring(0,s+1)):null==i&&(i=e)),o--;return i===e?r*=2:i&&(r+=Rr(i,n)),a=c+1,r*(.01*Math.max(1,10-a))},Br.basenameScore=Mr,Rr=function(n,r){var i,o,s,a,c,u,l,f,p,h,d,g;if(n===r)return 1;if(e(n,r))return 1;for(h=0,l=r.length,p=n.length,s=0,a=0;s<l;){if(i=r[s++],c=n.indexOf(i.toLowerCase()),d=n.indexOf(i.toUpperCase()),-1===(u=Math.min(c,d))&&(u=Math.max(c,d)),-1===(a=u))return 0;o=.1,n[a]===i&&(o+=.1),0===a||n[a-1]===t?o+=.8:"-"!==(g=n[a-1])&&"_"!==g&&" "!==g||(o+=.7),n=n.substring(a+1,p),h+=o}return((f=h/l)*(l/p)+f)/2},Br.score=Rr,e=function(e,n){if(e[e.length-n.length-1]===t)return e.lastIndexOf(n)===e.length-n.length}}.call(Br={})),Br}var $r,Ur=!1;function Vr(){return Ur||(Ur=!0,function(){var t,e,n;e=Hr(),t=function(t){return t.candidate},n=function(t,e){return e.score-t.score},$r=function(r,i,o,s){var a,c,u,l,f,p,h,d,g;if(c=(g=null!=s?s:{}).key,u=g.maxResults,i){for(f=[],h=0,d=r.length;h<d;h++)a=r[h],(p=null!=c?a[c]:a)&&(l=e.score(p,i,o),o||(l=e.basenameScore(p,i,l)),l>0&&f.push({candidate:a,score:l}));f.sort(n),r=f.map(t)}return null!=u&&(r=r.slice(0,u)),r}}.call($r={})),$r}var Wr,Gr,Kr,Qr=!1;function Zr(){return Qr||(Qr=!0,function(){var t;t=b.sep,Wr=function(e,n){var r,i,o;for(i=e.length-1;e[i]===t;)i--;for(o=i,r=null;i>=0;)e[i]===t?null==r&&(r=e.substring(i+1,o+1)):0===i&&(o<e.length-1?null==r&&(r=e.substring(0,o+1)):null==r&&(r=e)),i--;return Gr(r,n,e.length-r.length)},Kr.basenameMatch=Wr,Gr=function(t,e,n){var r,i,o,s,a,c,u,l,f,p;if(null==n&&(n=0),t===e)return function(){p=[];for(var e=n,r=n+t.length;n<=r?e<r:e>r;n<=r?e++:e--)p.push(e);return p}.apply(this);for(u=e.length,l=t.length,i=0,o=0,a=[];i<u;){if(r=e[i++],s=t.indexOf(r.toLowerCase()),f=t.indexOf(r.toUpperCase()),-1===(c=Math.min(s,f))&&(c=Math.max(s,f)),-1===(o=c))return[];a.push(n+o),n+=o+1,t=t.substring(o+1,l)}return a},Kr.match=Gr}.call(Kr={})),Kr}(function(){var t,e,n,r,i;i=Hr(),n=Vr(),r=Zr(),t=b.sep,e=/\ /g,zr={filter:function(r,i,o){var s;return i&&(s=-1!==i.indexOf(t),i=i.replace(e,"")),n(r,i,s,o)},score:function(n,r){var o,s;return n&&r?n===r?2:(o=-1!==r.indexOf(t),r=r.replace(e,""),s=i.score(n,r),o||(s=i.basenameScore(n,r,s)),s):0},match:function(n,i){var o,s,a,c,u,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var t=0,e=n.length;0<=e?t<e:t>e;0<=e?t++:t--)l.push(t);return l}.apply(this);if(c=-1!==i.indexOf(t),i=i.replace(e,""),a=r.match(n,i),!c)for(o=r.basenameMatch(n,i),a=a.concat(o).sort((function(t,e){return t-e})),u=null,s=0;s<a.length;)s&&u===a[s]?a.splice(s,1):(u=a[s],s++);return a}}}).call(zr);class Jr{constructor(t){this.props=t,this.matches=this.match(this.props),pt.initialize(this)}async update(t){this.props={...this.props,...t},this.matches=this.match(this.props),await pt.update(this)}async destroy(){await pt.destroy(this)}render(){return pt.dom("span",null,this.matches.map((t=>pt.dom("span",{className:t.type},t.text))))}match(t){return t.query?function(t,e){let n=0,r=[];const i=[],o=zr.match(t,e);let s;for(s of o){if(s<0)continue;const e=t.substring(n,s);e&&(r.length>0&&i.push({text:r.join(""),type:"character-match"}),r=[],i.push({text:e})),r.push(t[s]),n=s+1}r.length>0&&i.push({text:r.join(""),type:"character-match"});return i.push({text:t.substring(n)}),i}(t.label,t.query):[{text:t.label}]}}var Yr={},Xr=Yr&&Yr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yr,"__esModule",{value:!0});const ti=h,ei=Xr(pt),ni=ei.default.dom,ri=Xr(zr);Yr=class{constructor(t){this.props=t,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),t.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new ti.CompositeDisposable,ei.default.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),t.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const e=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);e.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",(t=>{t.target===this.refs.items&&(this.didClickItemsList=!0)})),this.disposables.add(new ti.Disposable((()=>{e.removeEventListener("blur",n)})))}static setScheduler(t){ei.default.setScheduler(t)}static getScheduler(){return ei.default.getScheduler()}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver((t=>{for(const e of t)if(e.intersectionRatio>0){const t=e.target;this.visibilityObserver.unobserve(t);const n=Array.from(this.refs.items.children).indexOf(t);n>=0&&this.renderItemAtIndex(n)}}))}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(t){this.didClickItemsList||this.element.contains(t.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),ei.default.destroy(this)}registerAtomCommands(){return atom.commands.add(this.element,{"core:move-up":t=>{this.selectPrevious(),t.stopPropagation()},"core:move-down":t=>{this.selectNext(),t.stopPropagation()},"core:move-to-top":t=>{this.selectFirst(),t.stopPropagation()},"core:move-to-bottom":t=>{this.selectLast(),t.stopPropagation()},"core:confirm":t=>{this.confirmSelection(),t.stopPropagation()},"core:cancel":t=>{this.cancelSelection(),t.stopPropagation()}})}update(t){let e=!1;return"items"in t&&(this.props.items=t.items,e=!0),"maxResults"in t&&(this.props.maxResults=t.maxResults,e=!0),"filter"in t&&(this.props.filter=t.filter,e=!0),"filterQuery"in t&&(this.props.filterQuery=t.filterQuery,e=!0),"query"in t&&(this.refs.queryEditor.setText(t.query),e=!1),"selectQuery"in t&&(t.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),"order"in t&&(this.props.order=t.order),"emptyMessage"in t&&(this.props.emptyMessage=t.emptyMessage),"errorMessage"in t&&(this.props.errorMessage=t.errorMessage),"infoMessage"in t&&(this.props.infoMessage=t.infoMessage),"loadingMessage"in t&&(this.props.loadingMessage=t.loadingMessage),"loadingBadge"in t&&(this.props.loadingBadge=t.loadingBadge),"itemsClassList"in t&&(this.props.itemsClassList=t.itemsClassList),"initialSelectionIndex"in t&&(this.props.initialSelectionIndex=t.initialSelectionIndex),e&&this.computeItems(),ei.default.update(this)}render(){return ni.div({},ni(ti.TextEditor,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const t=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&ei.default.getScheduler().updateDocument((()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach((t=>{this.visibilityObserver.observe(t)}))})),this.listItems=this.items.map(((t,e)=>{const n=this.getSelectedItem()===t,r=!this.props.initiallyVisibleItemCount||e<this.props.initiallyVisibleItemCount;return ni(ii,{element:this.props.elementForItem(t,{selected:n,index:e,visible:r}),selected:n,onclick:()=>this.didClickItem(e)})})),ni.ol({className:t,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?ni.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?ni.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?ni.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?ni.div({className:"loading"},ni.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?ni.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(t){this.selectIndex(t),this.confirmSelection()}computeItems(t){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const e=this.props.filter||this.fuzzyFilter.bind(this);this.items=e(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,t)}fuzzyFilter(t,e){if(0===e.length)return t;{const n=[];for(const r of t){const t=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r,i=ri.default.score(t,e);i>0&&n.push({item:r,score:i})}return n.sort(((t,e)=>e.score-t.score)),n.map((t=>t.item))}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(t){const e=this.items[t],n=this.getSelectedItem()===e,r=this.listItems[t].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(e,{selected:n,index:t,visible:!0}),selected:n,onclick:()=>this.didClickItem(t)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(t,e=!0){t>=this.items.length?t=0:t<0&&(t=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=t,void 0!==t&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),e?this.listItems?(n>=0&&this.renderItemAtIndex(n),t>=0&&this.renderItemAtIndex(t),ei.default.getScheduler().getNextUpdatePromise()):ei.default.update(this):Promise.resolve()}selectItem(t){const e=this.items.indexOf(t);if(-1===e)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(e)}confirmSelection(){const t=this.getSelectedItem();null!=t?this.props.didConfirmSelection&&this.props.didConfirmSelection(t):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class ii{constructor(t){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=t.selected,this.onclick=t.onclick,this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new ti.Disposable((()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)})),ei.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(t){t.preventDefault()}mouseUp(t){t.preventDefault()}didClick(t){t.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(t){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(t.element,this.element),this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),t.selected&&this.element.classList.add("selected"),this.selected=t.selected,this.onclick=t.onclick,ei.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var oi=T(Yr);async function si({items:t,itemTemplate:e,itemFilterKey:n,didChangeSelection:r}){let i;const o=document.activeElement;try{return await new Promise((o=>{let s,a,c="Loading...",u=!1;const l=t=>{u||Qt(f.update(t))};"function"==typeof t&&(s=async e=>{const n=setTimeout((()=>l({loadingMessage:"Loading..."})),300),r=await t(e);clearTimeout(n),l({items:r,emptyMessage:"Nothing matches the search value",loadingMessage:void 0})},c=void 0,a="Please enter a search value");const f=new oi({items:[],elementForItem:t=>pt.render(e(t,f)),filterKeyForItem:t=>""+t[n],didChangeSelection:r,didCancelSelection:()=>{u=!0,o(void 0)},didConfirmSelection:t=>{u=!0,o(t)},loadingMessage:c,didChangeQuery:s,emptyMessage:a,itemsClassList:["atom-typescript"]});"function"!=typeof t&&Qt(Promise.resolve(t).then((t=>{l({items:t,loadingMessage:void 0})}))),i=atom.workspace.addModalPanel({item:f,visible:!0}),f.focus()}))}finally{i&&i.destroy(),o&&o.focus()}}const ai=[];function ci(t,e,n){ai.push({selector:t,command:e,desc:n})}async function ui(t,e,n){const r=Promise.all(t.body.refs.map((async t=>{var e,n;const r=(await new Promise(((e,n)=>x.readFile(t.file,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))).split(/\r?\n/g),i=void 0!==t.contextStart&&void 0!==t.contextEnd?r.slice(t.contextStart.line-1,t.contextEnd.line):r,o=(await Be(i.join("\n"),"source.tsx")).split("\n")[t.start.line-(null!==(e=null===(n=t.contextStart)||void 0===n?void 0:n.line)&&void 0!==e?e:1)];return{...t,hlText:o}}))),i=await si({items:r,itemTemplate:(t,e)=>pt.dom("li",null,pt.dom(Jr,{label:atom.project.relativize(t.file),query:e.getFilterQuery()}),pt.dom("div",{className:"pull-right"},"line: ",t.start.line),pt.dom(Dr,{highlightedText:t.hlText})),itemFilterKey:"file"});i&&await n(e,i)}async function li(t,e,n){if(t.body)if(t.body.length>1){const r=await si({items:t.body,itemTemplate:(t,e)=>pt.dom("li",null,pt.dom(Jr,{label:t.file,query:e.getFilterQuery()}),pt.dom("div",{className:"pull-right"},"line: ",t.start.line)),itemFilterKey:"file"});r&&await n(e,r)}else t.body.length>0&&await n(e,t.body[0])}ci("atom-text-editor","typescript:find-references",(t=>({description:"Find where symbol under text cursor is referenced",async didDispatch(e){const n=We(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("references",n);await ui(i,e,t.histGoForward)}}))),ci("atom-text-editor","typescript:go-to-declaration",(t=>({description:"Go to declaration of symbol under text cursor",async didDispatch(e){const n=We(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("definition",n);await li(i,e,t.histGoForward)}})));let fi=0;let pi=100;function hi(t){const e=t.spans.map(Oe).reduce(((t,e)=>e.union(t)));return{kind:gi[t.kind],plainText:t.text,startPosition:e.start,endPosition:e.end,landingPosition:t.nameSpan?Oe(t.nameSpan).start:void 0,children:t.childItems?t.childItems.map(hi).sort(di):[]}}function di(t,e){const n=t.landingPosition?t.landingPosition:t.startPosition,r=e.landingPosition?e.landingPosition:e.startPosition;return n.compare(r)}const gi={directory:"file",module:"module","external module name":"module",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"field",constructor:"constructor",enum:"enum",interface:"interface",type:"interface",function:"function","local function":"function",label:"variable",alias:"variable",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"string","":void 0,warning:void 0,keyword:void 0,script:void 0,call:void 0,index:void 0,construct:void 0,"type parameter":void 0,"primitive type":void 0};let mi=100;class vi{constructor(t){this.getClient=t,this.triggerCharacters=new Set([]),this.grammarScopes=qe(),this.priority=mi++,this.disposables=new d;const e=new Set(["<","(",","]),n=new Set([]);this.disposables.add(atom.config.observe("atom-typescript.sigHelpDisplayOnChange",(t=>{this.triggerCharacters=t?e:n})))}dispose(){this.disposables.dispose()}async getSignatureHelp(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("signatureHelp",{file:n,line:e.row+1,offset:e.column+1})).body;return{signatures:i.items.map(Le),activeParameter:i.argumentIndex,activeSignature:i.selectedItemIndex}}catch(t){return}}}function yi(t){return pt.dom("li",null,t.description)}class wi{constructor(t,e){this.getClient=t,this.applyEdits=e,this.selector=qe().map((t=>t.includes(".")?"."+t:t)).join(", "),this.inclusionPriority=3,this.suggestionPriority=atom.config.get("atom-typescript").autocompletionSuggestionPriority,this.excludeLowerPriority=!1}async getSuggestions(t){const e=function(t){const e=t.editor.getPath();if(void 0===e)return;return{file:e,line:t.bufferPosition.row+1,offset:t.bufferPosition.column+1}}(t),n=function(t){const e=t.editor.getBuffer().getTextInRange([[t.bufferPosition.row,0],t.bufferPosition]).match(bi);return e?e[0]:""}(t);if(!e)return[];const r=function(t){if(void 0===t)return;if(!t)return;const e=t.slice(-1);if(Ci.has(e))return e;return}(function(t,e){let n;const r=new h.Range([0,0],e);return t.backwardsScanInRange(/\S/,r,(({matchText:t,stop:e})=>{n=t,e()})),n}(t.editor.getBuffer(),t.bufferPosition));if(!n&&!t.activatedManually&&!r)return[];if(Si(t.scopeDescriptor.getScopesArray(),"string.template.")&&!Si(t.scopeDescriptor.getScopesArray(),"template.expression."))return[];try{let i=await this.getSuggestionsWithCache({prefix:n,location:e,triggerCharacter:r,activatedManually:t.activatedManually});return i=zr.filter(i,n,{key:"displayText"}),i.map((r=>({replacementPrefix:r.replacementRange?t.editor.getTextInBufferRange(r.replacementRange):n,location:e,...this.getDetailsFromCache(r),...ki(t,r)})))}catch(t){return[]}}async getSuggestionDetailsOnSelect(t){return"text"in t&&!("rightLabel"in t)?this.getAdditionalDetails(t):null}onDidInsertSuggestion(t){const e=t.suggestion;if(!e.hasAction)return;if(!this.lastSuggestions)return;const n=this.lastSuggestions.client;let r=this.getDetailsFromCache(e);Qt((async()=>{var t;if(r||(r=await this.getAdditionalDetails(e)),!(null===(t=r)||void 0===t?void 0:t.details.codeActions))return;let i;i=1===r.details.codeActions.length?r.details.codeActions[0]:await si({items:r.details.codeActions,itemTemplate:yi,itemFilterKey:"description"}),i&&(await this.applyEdits(i.changes),i.commands&&await Promise.all(i.commands.map((t=>n.execute("applyCodeActionCommand",{command:t})))))})())}async getAdditionalDetails(t){var e;if(void 0===t.identifier)return null;if(!this.lastSuggestions)return null;const n=await this.lastSuggestions.client.execute("completionEntryDetails",{entryNames:[t.identifier],...this.lastSuggestions.location});if(!n.body)return null;const[r]=n.body;if(!r)return null;let i=r.displayParts;i.length>=3&&"("===i[0].text&&i[1].text===t.leftLabel&&")"===i[2].text&&(i=i.slice(3));let o=i.map((t=>t.text)).join("");const s=t.hasAction&&1===(null===(e=r.codeActions)||void 0===e?void 0:e.length)?r.codeActions[0].description+"\n\n":"";s&&(o=s);const a=s+r.displayParts.map((t=>t.text)).join("")+(r.documentation?"\n\n"+r.documentation.map((t=>t.text)).join(" "):"");return this.lastSuggestions.details.set(t.displayText,{details:r,rightLabel:o,description:a}),{...t,details:r,rightLabel:o,description:a}}getDetailsFromCache(t){if(!this.lastSuggestions)return null;const e=this.lastSuggestions.details.get(t.displayText);return e||null}async getSuggestionsWithCache({prefix:t,location:e,triggerCharacter:n,activatedManually:r}){if(this.lastSuggestions&&!r){const n=this.lastSuggestions.location,r=_i(this.lastSuggestions.prefix,n.offset),i=_i(t,e.offset);if(n.file===e.file&&n.line===e.line&&r===i&&0!==this.lastSuggestions.suggestions.length)return this.lastSuggestions.suggestions}const i=await this.getClient(e.file),o=await async function({client:t,location:e,triggerCharacter:n}){if(parseInt(t.version.split(".")[0],10)>=3){var r;const i=await t.execute("completionInfo",{includeExternalModuleExports:!1,includeInsertTextCompletions:!0,triggerCharacter:n,...e});return i.body.entries.map(xi.bind(null,null===(r=i.body)||void 0===r?void 0:r.isMemberCompletion))}return(await t.execute("completions",{includeExternalModuleExports:!1,includeInsertTextCompletions:!0,...e})).body.map(xi.bind(null,void 0))}({client:i,location:e,triggerCharacter:r?void 0:n});return this.lastSuggestions={client:i,location:e,prefix:t,suggestions:o,details:new Map},o}}const bi=/(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}])(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}\u200C\u200D\p{Mn}\p{Mc}\p{Nd}\p{Pc}])*$/u;function _i(t,e){return e-("."===t?0:t.length)}function Si(t,e){for(const n of t)if(n.includes(e))return!0;return!1}function xi(t,e){return{displayText:e.name,text:void 0!==e.insertText?e.insertText:e.name,leftLabel:e.kind,replacementRange:e.replacementSpan?Oe(e.replacementSpan):void 0,type:Ei[e.kind],isMemberCompletion:t,identifier:void 0!==e.source?{name:e.name,source:e.source}:e.name,hasAction:e.hasAction}}function ki(t,e){return atom.config.get("atom-typescript.autocompleteParens")&&["function","method"].includes(e.leftLabel)&&!function(t){const e=t.editor.getBuffer(),n=t.bufferPosition;return!!e.getTextInRange([n,[n.row,e.lineLengthForRow(n.row)]]).match(/\s*\(/)}(t)?{...e,snippet:e.text+"($1)",text:void 0}:e}const Ei={directory:"require",module:"import","external module name":"import",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"property",constructor:"method",enum:"type",interface:"type",type:"type","type parameter":"type","primitive type":"type",function:"function","local function":"function",label:"variable",alias:"import",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"value",keyword:"keyword","":void 0,warning:void 0,script:void 0,call:void 0,index:void 0,construct:void 0},Ci=new Set(Object.keys({".":null,'"':null,"'":null,"`":null,"/":null,"@":null,"<":null,"#":null}));async function Ti(t,e){const n=await async function(t,e){try{return await t.execute("getApplicableRefactors",{triggerReason:"invoked",...e})}catch{return}}(t,e);if(!n)return[];if(void 0===n.body||0===n.body.length)return[];const r=[];for(const t of n.body)for(const n of t.actions)r.push({refactorName:t.name,refactorDescription:t.description,refactorRange:e,actionName:n.name,actionDescription:n.description,inlineable:void 0===t.inlineable||t.inlineable});return r}async function Ai(t,e,n){const r=await e.execute("getEditsForRefactor",{...t.refactorRange,refactor:t.refactorName,action:t.actionName});if(void 0===r.body)return;const{edits:i,renameFilename:o,renameLocation:s}=r.body;if(await n.applyEdits(i),void 0===o||void 0===s)return;const a=await atom.workspace.open(o,{searchAllPanes:!0,initialLine:s.line-1,initialColumn:s.offset-1});await atom.commands.dispatch(atom.views.getView(a),"typescript:rename-refactor")}ci("atom-text-editor","typescript:refactor-selection",(t=>({description:"Get a list of applicable refactors to selected code",async didDispatch(e){const n=We(e);if(!n)return;const r=e.getSelectedBufferRange(),i=await t.getClient(n.file),o=r.isEmpty()?n:{file:n.file,startLine:r.start.row+1,startOffset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1},s=await Ti(i,o);if(0===s.length)return void atom.notifications.addInfo("AtomTS: No applicable refactors for the selection");const a=await si({items:s,itemTemplate:(t,e)=>pt.dom("li",null,pt.dom(Jr,{label:`${t.refactorDescription}: ${t.actionDescription}`,query:e.getFilterQuery()})),itemFilterKey:"actionDescription"});void 0!==a&&await Ai(a,i,t)}})));class Pi{constructor(t,e,n){this.clientResolver=t,this.errorPusher=e,this.applyEdits=n,this.supportedFixes=new WeakMap}async getFixableRanges(t,e){const n=t.getPath();if(void 0===n)return[];const r=this.errorPusher.getErrorsInRange(n,e),i=await this.clientResolver.get(n),o=await this.getSupportedFixes(i);return Array.from(r).filter((t=>void 0!==t.code&&o.has(t.code))).map((t=>Oe(t)))}async runCodeFix(t,e){const n=t.getPath();if(void 0===n)return[];const r=await this.clientResolver.get(n),i=await this.getSupportedFixes(r),o=Array.from(this.errorPusher.getErrorsAt(n,e)).filter((t=>void 0!==t.code&&i.has(t.code))).map((t=>r.execute("getCodeFixes",{file:n,startLine:t.start.line,startOffset:t.start.offset,endLine:t.end.line,endOffset:t.end.offset,errorCodes:[t.code]}))),s=await Promise.all(o),a=[];for(const t of s)if(t.body)for(const e of t.body)a.push(e);const c=await Ti(r,{file:n,...Ae(e)});return a.push(...c),a}async applyFix(t){if("changes"in t)return this.applyEdits(t.changes);return Ai(t,await this.clientResolver.get(t.refactorRange.file),{applyEdits:this.applyEdits})}dispose(){}async getSupportedFixes(t){let e=this.supportedFixes.get(t);if(e)return e;const n=await t.execute("getSupportedCodeFixes");if(!n.body)throw new Error("No code fixes are supported");return e=new Set(n.body.map((t=>parseInt(t,10)))),this.supportedFixes.set(t,e),e}}let Oi=100;async function Ii(t,e){let n;try{return await new Promise(((r,i)=>{try{const o=new v({command:t,args:["--init"],options:{cwd:e},exit:t=>{0===t?r():i(new Error("Tsc ended with nonzero exit code "+t))}});n=o.onWillThrowError(i)}catch(t){i(t)}}))}finally{n&&n.dispose()}}ci("atom-text-editor","typescript:build",(t=>({description:"Compile all files in project related to current active text editor",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);t.reportBuildStatus(void 0);const i=await r.execute("projectInfo",{file:n,needFileNameList:!0}),o=new Set(i.body.fileNames);o.delete(i.body.configFileName);let s=0;const a=[...o.values()].map((e=>{return n=r.execute("compileOnSaveEmitFile",{file:e,forced:!0}),i=()=>{s+=1,t.reportProgress({max:o.size,value:s})},n.then(i,i),n;var n,i}));try{if((await Promise.all(a)).some((t=>!1===t.body)))throw new Error("Emit failed");t.reportBuildStatus({success:!0})}catch(e){const n=e;console.error(n),t.reportBuildStatus({success:!1,message:n.message})}}}))),ci("atom-text-editor","typescript:check-all-files",(t=>({description:"Typecheck all files in project related to current active text editor",async didDispatch(e){var n;const r=e.getPath();if(void 0===r)return;const i=await t.getClient(r),o=await i.execute("projectInfo",{file:r,needFileNameList:!0}),s=new Set(null===(n=o.body.fileNames)||void 0===n?void 0:n.filter((t=>!t.endsWith("tsconfig.json")&&!t.includes(`${b.sep}node_modules${b.sep}`)))),a=s.size;if(i.multistepSupported){const e=i.on("syntaxDiag",(e=>{"file"in e&&s.delete(e.file),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0}),e.dispose()}else{let e;const n=i.on("syntaxDiag",(r=>{void 0!==e&&window.clearTimeout(e),e=window.setTimeout((()=>{s.clear(),n.dispose(),t.reportProgress({max:a,value:a})}),2e3),"file"in r&&s.delete(r.file),0===s.size&&(n.dispose(),window.clearTimeout(e)),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0})}}}))),ci("atom-workspace","typescript:clear-errors",(t=>({description:"Clear error messages",didDispatch(){t.clearErrors()}}))),ci("atom-text-editor","typescript:format-code",(t=>({description:"Format code in currently active text editor",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=[];for(const t of e.getSelectedBufferRanges())t.isEmpty()||r.push({line:(i=t).start.row+1,offset:i.start.column+1,endLine:i.end.row+1,endOffset:i.end.column+1});var i;if(0===r.length){const t=e.getBuffer().getEndPosition();r.push({line:1,offset:1,endLine:t.row+1,endOffset:t.column+1})}const o=await t.getClient(n),s=[];for(const t of r){const e=await o.execute("format",{...t,file:n});e.body&&s.push(...e.body)}s.length>0&&e.transact((()=>{!function(t,e){for(let n=e.length-1;n>=0;n--)t.setTextInBufferRange(Oe(e[n]),e[n].newText)}(e,s)}))}}))),ci("atom-text-editor","typescript:initialize-config",(()=>({description:"Create tsconfig.json in the project related to currently-active text edtior",async didDispatch(t,e){const n=atom.project.getDirectories();if(0===n.length)return e();const r=t.getPath();if(void 0===r)return;const i=(await br(r,"tsc")).pathToBin;for(const t of n)t.contains(r)&&(await Ii(i,t.getPath()),atom.notifications.addSuccess("Successfully created tsconfig.json in "+t.getPath()))}}))),ci("atom-text-editor","typescript:organize-imports",(t=>({description:"Organize module imports",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n),i=await r.execute("organizeImports",{scope:{type:"file",args:{file:n}}});i.body.length>0&&await t.applyEdits(i.body)}}))),ci("atom-text-editor","typescript:reload-projects",(t=>({description:"Reload projects",async didDispatch(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);await r.execute("reloadProjects")}})));var ji,Ni,Li={},Fi=!1;function Di(){return Fi||(Fi=!0,ji={},function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof A&&A.global===A&&A||this||{},e=t._,n=Array.prototype,r=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,o=n.push,s=n.slice,a=r.toString,c=r.hasOwnProperty,u=Array.isArray,l=Object.keys,f=Object.create,p=function(){},h=function(t){return t instanceof h?t:this instanceof h?void(this._wrapped=t):new h(t)};void 0===ji||ji.nodeType?t._=h:(!module.nodeType&&ji&&(ji=h),Ni=h,ji._=Ni),h.VERSION="1.9.1";var d,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},m=function(t,e,n){return h.iteratee!==d?h.iteratee(t,e):null==t?h.identity:h.isFunction(t)?g(t,e,n):h.isObject(t)&&!h.isArray(t)?h.matcher(t):h.property(t)};h.iteratee=d=function(t,e){return m(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},y=function(t){if(!h.isObject(t))return{};if(f)return f(t);p.prototype=t;var e=new p;return p.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},b=function(t,e){return null!=t&&c.call(t,e)},_=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},S=Math.pow(2,53)-1,x=w("length"),k=function(t){var e=x(t);return"number"==typeof e&&e>=0&&e<=S};h.each=h.forEach=function(t,e,n){var r,i;if(e=g(e,n),k(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=h.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},h.map=h.collect=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o};var E=function(t){var e=function(e,n,r,i){var o=!k(e)&&h.keys(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;r=n(r,e[c],c,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,g(n,i,4),r,o)}};h.reduce=h.foldl=h.inject=E(1),h.reduceRight=h.foldr=E(-1),h.find=h.detect=function(t,e,n){var r=(k(t)?h.findIndex:h.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},h.filter=h.select=function(t,e,n){var r=[];return e=m(e,n),h.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},h.reject=function(t,e,n){return h.filter(t,h.negate(m(e)),n)},h.every=h.all=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},h.some=h.any=function(t,e,n){e=m(e,n);for(var r=!k(t)&&h.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},h.contains=h.includes=h.include=function(t,e,n,r){return k(t)||(t=h.values(t)),("number"!=typeof n||r)&&(n=0),h.indexOf(t,e,n)>=0},h.invoke=v((function(t,e,n){var r,i;return h.isFunction(e)?i=e:h.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),h.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=_(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),h.pluck=function(t,e){return h.map(t,h.property(e))},h.where=function(t,e){return h.filter(t,h.matcher(e))},h.findWhere=function(t,e){return h.find(t,h.matcher(e))},h.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=k(t)?t:h.values(t)).length;a<c;a++)null!=(r=t[a])&&r>o&&(o=r);else e=m(e,n),h.each(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o},h.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=k(t)?t:h.values(t)).length;a<c;a++)null!=(r=t[a])&&r<o&&(o=r);else e=m(e,n),h.each(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},h.shuffle=function(t){return h.sample(t,1/0)},h.sample=function(t,e,n){if(null==e||n)return k(t)||(t=h.values(t)),t[h.random(t.length-1)];var r=k(t)?h.clone(t):h.values(t),i=x(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=h.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)},h.sortBy=function(t,e,n){var r=0;return e=m(e,n),h.pluck(h.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var C=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=m(r,i),h.each(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}};h.groupBy=C((function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]})),h.indexBy=C((function(t,e,n){t[n]=e})),h.countBy=C((function(t,e,n){b(t,n)?t[n]++:t[n]=1}));var T=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;h.toArray=function(t){return t?h.isArray(t)?s.call(t):h.isString(t)?t.match(T):k(t)?h.map(t,h.identity):h.values(t):[]},h.size=function(t){return null==t?0:k(t)?t.length:h.keys(t).length},h.partition=C((function(t,e,n){t[n?0:1].push(e)}),!0),h.first=h.head=h.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:h.initial(t,t.length-e)},h.initial=function(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},h.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:h.rest(t,Math.max(0,t.length-e))},h.rest=h.tail=h.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},h.compact=function(t){return h.filter(t,Boolean)};var P=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,s=x(t);o<s;o++){var a=t[o];if(k(a)&&(h.isArray(a)||h.isArguments(a)))if(e)for(var c=0,u=a.length;c<u;)r[i++]=a[c++];else P(a,e,n,r),i=r.length;else n||(r[i++]=a)}return r};h.flatten=function(t,e){return P(t,e,!1)},h.without=v((function(t,e){return h.difference(t,e)})),h.uniq=h.unique=function(t,e,n,r){h.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=m(n,r));for(var i=[],o=[],s=0,a=x(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&o===u||i.push(c),o=u):n?h.contains(o,u)||(o.push(u),i.push(c)):h.contains(i,c)||i.push(c)}return i},h.union=v((function(t){return h.uniq(P(t,!0,!0))})),h.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=x(t);r<i;r++){var o=t[r];if(!h.contains(e,o)){var s;for(s=1;s<n&&h.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},h.difference=v((function(t,e){return e=P(e,!0,!0),h.filter(t,(function(t){return!h.contains(e,t)}))})),h.unzip=function(t){for(var e=t&&h.max(t,x).length||0,n=Array(e),r=0;r<e;r++)n[r]=h.pluck(t,r);return n},h.zip=v(h.unzip),h.object=function(t,e){for(var n={},r=0,i=x(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var O=function(t){return function(e,n,r){n=m(n,r);for(var i=x(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};h.findIndex=O(1),h.findLastIndex=O(-1),h.sortedIndex=function(t,e,n,r){for(var i=(n=m(n,r,1))(e),o=0,s=x(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o};var I=function(t,e,n){return function(r,i,o){var a=0,c=x(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+c,a):c=o>=0?Math.min(o+1,c):o+c+1;else if(n&&o&&c)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(s.call(r,a,c),h.isNaN))>=0?o+a:-1;for(o=t>0?a:c-1;o>=0&&o<c;o+=t)if(r[o]===i)return o;return-1}};h.indexOf=I(1,h.findIndex,h.sortedIndex),h.lastIndexOf=I(-1,h.findLastIndex),h.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},h.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(s.call(t,r,r+=e));return n};var j=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=y(t.prototype),s=t.apply(o,i);return h.isObject(s)?s:o};h.bind=v((function(t,e,n){if(!h.isFunction(t))throw new TypeError("Bind must be called on a function");var r=v((function(i){return j(t,r,e,this,n.concat(i))}));return r})),h.partial=v((function(t,e){var n=h.partial.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return j(t,r,this,this,s)};return r})),h.partial.placeholder=h,h.bindAll=v((function(t,e){var n=(e=P(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=h.bind(t[r],t)}})),h.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},h.delay=v((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),h.defer=h.partial(h.delay,h,1),h.throttle=function(t,e,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:h.now(),r=null,s=t.apply(i,o),r||(i=o=null)},u=function(){var u=h.now();a||!1!==n.leading||(a=u);var l=e-(u-a);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),a=u,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},h.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},s=v((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,e),a&&(i=t.apply(this,s))}else r=h.delay(o,e,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},h.wrap=function(t,e){return h.partial(e,t)},h.negate=function(t){return function(){return!t.apply(this,arguments)}},h.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},h.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},h.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},h.once=h.partial(h.before,2),h.restArguments=v;var N=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(t,e){var n=L.length,i=t.constructor,o=h.isFunction(i)&&i.prototype||r,s="constructor";for(b(t,s)&&!h.contains(e,s)&&e.push(s);n--;)(s=L[n])in t&&t[s]!==o[s]&&!h.contains(e,s)&&e.push(s)};h.keys=function(t){if(!h.isObject(t))return[];if(l)return l(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return N&&F(t,e),e},h.allKeys=function(t){if(!h.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&F(t,e),e},h.values=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},h.mapObject=function(t,e,n){e=m(e,n);for(var r=h.keys(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},h.pairs=function(t){for(var e=h.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},h.invert=function(t){for(var e={},n=h.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},h.functions=h.methods=function(t){var e=[];for(var n in t)h.isFunction(t[n])&&e.push(n);return e.sort()};var D=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=o[u])}return n}};h.extend=D(h.allKeys),h.extendOwn=h.assign=D(h.keys),h.findKey=function(t,e,n){e=m(e,n);for(var r,i=h.keys(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r};var M,R,B=function(t,e,n){return e in n};h.pick=v((function(t,e){var n={},r=e[0];if(null==t)return n;h.isFunction(r)?(e.length>1&&(r=g(r,e[1])),e=h.allKeys(t)):(r=B,e=P(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),h.omit=v((function(t,e){var n,r=e[0];return h.isFunction(r)?(r=h.negate(r),e.length>1&&(n=e[1])):(e=h.map(P(e,!1,!1),String),r=function(t,n){return!h.contains(e,n)}),h.pick(t,r,n)})),h.defaults=D(h.allKeys,!0),h.create=function(t,e){var n=y(t);return e&&h.extendOwn(n,e),n},h.clone=function(t){return h.isObject(t)?h.isArray(t)?t.slice():h.extend({},t):t},h.tap=function(t,e){return e(t),t},h.isMatch=function(t,e){var n=h.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0},M=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&R(t,e,n,r)},R=function(t,e,n,r){t instanceof h&&(t=t._wrapped),e instanceof h&&(e=e._wrapped);var o=a.call(t);if(o!==a.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return i.valueOf.call(t)===i.valueOf.call(e)}var s="[object Array]"===o;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,u=e.constructor;if(c!==u&&!(h.isFunction(c)&&c instanceof c&&h.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!M(t[l],e[l],n,r))return!1}else{var f,p=h.keys(t);if(l=p.length,h.keys(e).length!==l)return!1;for(;l--;)if(f=p[l],!b(e,f)||!M(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},h.isEqual=function(t,e){return M(t,e)},h.isEmpty=function(t){return null==t||(k(t)&&(h.isArray(t)||h.isString(t)||h.isArguments(t))?0===t.length:0===h.keys(t).length)},h.isElement=function(t){return!(!t||1!==t.nodeType)},h.isArray=u||function(t){return"[object Array]"===a.call(t)},h.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){h["is"+t]=function(e){return a.call(e)==="[object "+t+"]"}})),h.isArguments(arguments)||(h.isArguments=function(t){return b(t,"callee")});var z=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof z&&(h.isFunction=function(t){return"function"==typeof t||!1}),h.isFinite=function(t){return!h.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},h.isNaN=function(t){return h.isNumber(t)&&isNaN(t)},h.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===a.call(t)},h.isNull=function(t){return null===t},h.isUndefined=function(t){return void 0===t},h.has=function(t,e){if(!h.isArray(e))return b(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!c.call(t,i))return!1;t=t[i]}return!!n},h.noConflict=function(){return t._=e,this},h.identity=function(t){return t},h.constant=function(t){return function(){return t}},h.noop=function(){},h.property=function(t){return h.isArray(t)?function(e){return _(e,t)}:w(t)},h.propertyOf=function(t){return null==t?function(){}:function(e){return h.isArray(e)?_(t,e):t[e]}},h.matcher=h.matches=function(t){return t=h.extendOwn({},t),function(e){return h.isMatch(e,t)}},h.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},h.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},h.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=h.invert(q),$=function(t){var e=function(e){return t[e]},n="(?:"+h.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};h.escape=$(q),h.unescape=$(H),h.result=function(t,e,n){h.isArray(e)||(e=[e]);var r=e.length;if(!r)return h.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=h.isFunction(o)?o.call(t):o}return t};var U=0;h.uniqueId=function(t){var e=++U+"";return t?t+e:e},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+W[t]};h.template=function(t,e,n){!e&&n&&(e=n),e=h.defaults({},e,h.templateSettings);var r,i=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,n,r,i,a){return s+=t.slice(o,a).replace(G,K),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,h)},c=e.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},h.chain=function(t){var e=h(t);return e._chain=!0,e};var Q=function(t,e){return t._chain?h(e).chain():e};h.mixin=function(t){return h.each(h.functions(t),(function(e){var n=h[e]=t[e];h.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),Q(this,n.apply(h,t))}})),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=n[t];h.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Q(this,n)}})),h.each(["concat","join","slice"],(function(t){var e=n[t];h.prototype[t]=function(){return Q(this,e.apply(this._wrapped,arguments))}})),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return h}))}()),ji}var Mi,Ri=!1;function Bi(){return Ri||(Ri=!0,function(){var t,e,n,r,i,o,s,a,c=[].slice;a=Di(),n={cmd:"⌘",ctrl:"⌃",alt:"⌥",option:"⌥",shift:"⇧",enter:"⏎",left:"←",right:"→",up:"↑",down:"↓"},r={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},o={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},s=function(t){var e,n,r,i,o;if(r=0,n=[],null==t)return n;for(e=i=0,o=t.length;i<o;e=++i)"."!==t[e]||0!==e&&"\\"===t[e-1]||(n.push(t.substring(r,e)),r=e+1);return n.push(t.substr(r,t.length)),n},e=function(t){return a.isObject(t)&&!a.isArray(t)},i={adviseBefore:function(t,e,n){var r;return r=t[e],t[e]=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],!1!==n.apply(this,t))return r.apply(this,t)}},camelize:function(t){return t?t.replace(/[_-]+(\w)/g,(function(t){return t[1].toUpperCase()})):""},capitalize:function(t){return t?"github"===t.toLowerCase()?"GitHub":t[0].toUpperCase()+t.slice(1):""},compactObject:function(t){var e,n,r;for(e in n={},t)null!=(r=t[e])&&(n[e]=r);return n},dasherize:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|(_)/g,(function(t,e){return e?"-"+e.toLowerCase():"-"})):""},deepClone:function(t){return a.isArray(t)?t.map((function(t){return i.deepClone(t)})):a.isObject(t)&&!a.isFunction(t)?i.mapObject(t,(function(t,e){return[t,i.deepClone(e)]})):t},deepExtend:function(t){var n,r,o,s,a,c,u;for(s=t,n=0;++n<arguments.length;)if(o=arguments[n],e(s)&&e(o))for(a=0,c=(u=Object.keys(o)).length;a<c;a++)s[r=u[a]]=i.deepExtend(s[r],o[r]);else s=i.deepClone(o);return s},deepContains:function(t,e){var n,r,i;if(null==t)return!1;for(r=0,i=t.length;r<i;r++)if(n=t[r],a.isEqual(n,e))return!0;return!1},endsWith:function(t,e){return null==e&&(e=""),!!t&&-1!==t.indexOf(e,t.length-e.length)},escapeAttribute:function(t){return t?t.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(t){return t?t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(t,e){var n,r,o,s;return r=(s=t.split(":"))[0],null==(n=s[1])?i.undasherize(r):(o=i.undasherize(r),null==e&&(e=i.undasherize(n)),o+": "+e)},humanizeKey:function(t,e){var s;return null==e&&(e=process.platform),t?(s="darwin"===e?n:r)[t]?s[t]:1===t.length&&null!=o[t]?[s.shift,o[t]]:1===t.length&&t===t.toUpperCase()&&t.toUpperCase()!==t.toLowerCase()?[s.shift,t.toUpperCase()]:1===t.length||/f[0-9]{1,2}/.test(t)?t.toUpperCase():"darwin"===e?t:i.capitalize(t):t},humanizeKeystroke:function(t,e){var n,r,o,s,c,u,l,f,p,h;if(null==e&&(e=process.platform),!t)return t;for(n=[],l=0,p=(c=t.split(" ")).length;l<p;l++){for(s=[],r=f=0,h=(u=(t=c[l]).split("-")).length;f<h;r=++f)""===(o=u[r])&&""===u[r-1]&&(o="-"),o&&s.push(i.humanizeKey(o,e));s=a.uniq(a.flatten(s)),s="darwin"===e?s.join(""):s.join("+"),n.push(s)}return n.join(" ")},isSubset:function(t,e){return a.every(t,(function(t){return a.include(e,t)}))},losslessInvert:function(t){var e,n,r;for(n in e={},t)null==e[r=t[n]]&&(e[r]=[]),e[r].push(n);return e},mapObject:function(t,e){var n,r,i,o,s,a,c;for(r={},o=0,s=(a=Object.keys(t)).length;o<s;o++)n=(c=e(n=a[o],t[n]))[0],i=c[1],r[n]=i;return r},multiplyString:function(t,e){var n,r;for(n="",r=0;r<e;)n+=t,r++;return n},pluralize:function(t,e,n){return null==t&&(t=0),null==n&&(n=e+"s"),1===t?t+" "+e:t+" "+n},remove:function(t,e){var n;return(n=t.indexOf(e))>=0&&t.splice(n,1),t},setValueForKeyPath:function(t,e,n){var r,i;for(i=s(e);i.length>1;)null==t[r=i.shift()]&&(t[r]={}),t=t[r];return null!=n?t[i.shift()]=n:delete t[i.shift()]},hasKeyPath:function(t,e){var n,r,i,o;for(i=0,o=(r=s(e)).length;i<o;i++){if(n=r[i],!t.hasOwnProperty(n))return!1;t=t[n]}return!0},spliceWithArray:function(t,e,n,r,i){var o,s,a,u;if(null==i&&(i=1e5),r.length<i)return t.splice.apply(t,[e,n].concat(c.call(r)));for(t.splice(e,n),u=[],o=s=0,a=r.length;i>0?s<=a:s>=a;o=s+=i)u.push(t.splice.apply(t,[e+o,0].concat(c.call(r.slice(o,o+i)))));return u},sum:function(t){var e,n,r;for(e=0,n=0,r=t.length;n<r;n++)e+=t[n];return e},uncamelcase:function(t){var e;return t?(e=t.replace(/([A-Z])|_+/g,(function(t,e){return null==e&&(e="")," "+e})),i.capitalize(e.trim())):""},undasherize:function(t){return t?t.split("-").map(i.capitalize).join(" "):""},underscore:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|-+/g,(function(t,e){return null==e&&(e=""),"_"+e.toLowerCase()})):""},valueForKeyPath:function(t,e){var n,r,i;for(r=0,i=(n=s(e)).length;r<i;r++)if(null==(t=t[n[r]]))return;return t},isEqual:function(e,n,r,i){return a.isArray(r)&&a.isArray(i)?t(e,n,r,i):t(e,n)},isEqualForProperties:function(){var t,e,n,r,i,o;for(t=arguments[0],e=arguments[1],i=0,o=(n=3<=arguments.length?c.call(arguments,2):[]).length;i<o;i++)if(r=n[i],!a.isEqual(t[r],e[r]))return!1;return!0}},t=function(e,n,r,i){var o,s,c,u,l,f,p,h,d,g,m,v,y,w;if(null==r&&(r=[]),null==i&&(i=[]),e===n)return a.isEqual(e,n);if(a.isFunction(e)||a.isFunction(n))return a.isEqual(e,n);for(v=r.length;v--;)if(r[v]===e)return i[v]===n;if(r.push(e),i.push(n),d=!1,a.isFunction(null!=e?e.isEqual:void 0))d=e.isEqual(n,r,i);else if(a.isFunction(null!=n?n.isEqual:void 0))d=n.isEqual(e,i,r);else if(a.isArray(e)&&a.isArray(n)&&e.length===n.length){for(d=!0,g=y=0,w=e.length;y<w;g=++y)if(c=e[g],!t(c,n[g],r,i)){d=!1;break}}else if(a.isRegExp(e)&&a.isRegExp(n))d=a.isEqual(e,n);else if(a.isElement(e)&&a.isElement(n))d=e===n;else if(a.isObject(e)&&a.isObject(n))if(o=e.constructor,f=n.constructor,s=a.isFunction(o)&&o instanceof o,p=a.isFunction(f)&&f instanceof f,o===f||s&&p){for(m in u=0,d=!0,e)if(l=e[m],a.has(e,m)&&(u++,!a.has(n,m)||!t(l,n[m],r,i))){d=!1;break}if(d){for(m in h=0,n)n[m],a.has(n,m)&&h++;d=u===h}}else d=!1;else d=a.isEqual(e,n);return r.pop(),i.pop(),d},Mi=a.extend({},a,i)}.call(Mi={})),Mi}var zi,qi=!1;function Hi(){zi={},function(){var t,e={};function n(){}function r(t){return t}function i(t){return!!t}function o(t){return!t}var s="object"==typeof self&&self.self===self&&self||"object"==typeof A&&A.global===A&&A||this;function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function c(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=s&&(t=s.async),e.noConflict=function(){return s.async=t,e};var u=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===u.call(t)};function f(t){return l(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function h(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t){return h(Array(t),(function(t,e){return e}))}function g(t,e,n){return p(t,(function(t,r,i){n=e(n,t,r,i)})),n}function m(t,e){p(y(t),(function(n){e(t[n],n)}))}function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function w(t){var e,n,r=-1;return f(t)?(e=t.length,function(){return++r<e?r:null}):(n=y(t),e=n.length,function(){return++r<e?n[r]:null})}function b(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function _(t){return function(e,n,r){return t(e,r)}}var S="function"==typeof setImmediate&&setImmediate,x=S?function(t){S(t)}:function(t){setTimeout(t,0)};function k(t){return function(e,r,i){i=c(i||n);var o=w(e=e||[]);if(t<=0)return i(null);var s=!1,u=0,l=!1;!function n(){if(s&&u<=0)return i(null);for(;u<t&&!l;){var c=o();if(null===c)return s=!0,void(u<=0&&i(null));u+=1,r(e[c],c,a((function(t){u-=1,t?(i(t),l=!0):n()})))}}()}}function E(t){return function(n,r,i){return t(e.eachOf,n,r,i)}}function C(t){return function(e,n,r,i){return t(k(n),e,r,i)}}function T(t){return function(n,r,i){return t(e.eachOfSeries,n,r,i)}}function P(t,e,r,i){i=c(i||n);var o=f(e=e||[])?[]:{};t(e,(function(t,e,n){r(t,(function(t,r){o[e]=r,n(t)}))}),(function(t){i(t,o)}))}function O(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(n){n&&i.push({index:e,value:t}),r()}))}),(function(){r(h(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function I(t,e,n,r){O(t,e,(function(t,e){n(t,(function(t){e(!t)}))}),r)}function j(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(t,r,i){if(!s)return i();o(t,(function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}))}arguments.length>3?t(r,i,c,a):(s=o,o=i,t(r,c,a))}}function N(t,e){return e}function L(t,e,r){r=r||n;var i=f(e)?[]:{};t(e,(function(t,e,n){t(b((function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)})))}),(function(t){r(t,i)}))}function F(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(t,e){i=i.concat(e||[]),r(t)}))}),(function(t){r(t,i)}))}function D(t,r,i){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");function o(t,r,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(t.started=!0,l(r)||(r=[r]),0===r.length&&t.idle())return e.setImmediate((function(){t.drain()}));p(r,(function(e){var r={data:e,callback:o||n};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()})),e.setImmediate(t.process)}function s(t,e){return function(){c-=1;var n=!1,r=arguments;p(e,(function(t){p(u,(function(e,r){e!==t||n||(u.splice(r,1),n=!0)})),t.callback.apply(t,r)})),t.tasks.length+c===0&&t.drain(),t.process()}}var c=0,u=[],f={tasks:[],concurrency:r,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){o(f,t,!1,e)},kill:function(){f.drain=n,f.tasks=[]},unshift:function(t,e){o(f,t,!0,e)},process:function(){for(;!f.paused&&c<f.concurrency&&f.tasks.length;){var e=f.payload?f.tasks.splice(0,f.payload):f.tasks.splice(0,f.tasks.length),n=h(e,(function(t){return t.data}));0===f.tasks.length&&f.empty(),c+=1,u.push(e[0]);var r=a(s(f,e));t(n,r)}},length:function(){return f.tasks.length},running:function(){return c},workersList:function(){return u},idle:function(){return f.tasks.length+c===0},pause:function(){f.paused=!0},resume:function(){if(!1!==f.paused){f.paused=!1;for(var t=Math.min(f.concurrency,f.tasks.length),n=1;n<=t;n++)e.setImmediate(f.process)}}};return f}function M(t){return b((function(e,n){e.apply(null,n.concat([b((function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&p(n,(function(e){console[t](e)})))}))]))}))}function R(t){return function(e,n,r){t(d(e),n,r)}}function B(t){return b((function(e,n){var r=b((function(n){var r=this,i=n.pop();return t(e,(function(t,e,i){t.apply(r,n.concat([i]))}),i)}));return n.length?r.apply(this,n):r}))}function z(t){return b((function(n){var r=n.pop();n.push((function(){var t=arguments;i?e.setImmediate((function(){r.apply(null,t)})):r.apply(null,t)}));var i=!0;t.apply(this,n),i=!1}))}"object"==typeof process&&"function"==typeof process.nextTick?e.nextTick=process.nextTick:e.nextTick=x,e.setImmediate=S?x:e.nextTick,e.forEach=e.each=function(t,n,r){return e.eachOf(t,_(n),r)},e.forEachSeries=e.eachSeries=function(t,n,r){return e.eachOfSeries(t,_(n),r)},e.forEachLimit=e.eachLimit=function(t,e,n,r){return k(e)(t,_(n),r)},e.forEachOf=e.eachOf=function(t,e,r){r=c(r||n);for(var i,o=w(t=t||[]),s=0;null!=(i=o());)s+=1,e(t[i],i,a(u));function u(t){s--,t?r(t):null===i&&s<=0&&r(null)}0===s&&r(null)},e.forEachOfSeries=e.eachOfSeries=function(t,r,i){i=c(i||n);var o=w(t=t||[]),s=o();!function n(){var c=!0;if(null===s)return i(null);r(t[s],s,a((function(t){if(t)i(t);else{if(null===(s=o()))return i(null);c?e.setImmediate(n):n()}}))),c=!1}()},e.forEachOfLimit=e.eachOfLimit=function(t,e,n,r){k(e)(t,n,r)},e.map=E(P),e.mapSeries=T(P),e.mapLimit=C(P),e.inject=e.foldl=e.reduce=function(t,n,r,i){e.eachOfSeries(t,(function(t,e,i){r(n,t,(function(t,e){n=e,i(t)}))}),(function(t){i(t,n)}))},e.foldr=e.reduceRight=function(t,n,i,o){var s=h(t,r).reverse();e.reduce(s,n,i,o)},e.transform=function(t,n,r,i){3===arguments.length&&(i=r,r=n,n=l(t)?[]:{}),e.eachOf(t,(function(t,e,i){r(n,t,e,i)}),(function(t){i(t,n)}))},e.select=e.filter=E(O),e.selectLimit=e.filterLimit=C(O),e.selectSeries=e.filterSeries=T(O),e.reject=E(I),e.rejectLimit=C(I),e.rejectSeries=T(I),e.any=e.some=j(e.eachOf,i,r),e.someLimit=j(e.eachOfLimit,i,r),e.all=e.every=j(e.eachOf,o,o),e.everyLimit=j(e.eachOfLimit,o,o),e.detect=j(e.eachOf,r,N),e.detectSeries=j(e.eachOfSeries,r,N),e.detectLimit=j(e.eachOfLimit,r,N),e.sortBy=function(t,n,r){function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}e.map(t,(function(t,e){n(t,(function(n,r){n?e(n):e(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return r(t);r(null,h(e.sort(i),(function(t){return t.value})))}))},e.auto=function(t,r,i){"function"==typeof arguments[1]&&(i=r,r=null),i=c(i||n);var o=y(t),s=o.length;if(!s)return i(null);r||(r=s);var a={},u=0,f=!1,h=[];function d(t){h.unshift(t)}function w(t){var e=v(h,t);e>=0&&h.splice(e,1)}function _(){s--,p(h.slice(0),(function(t){t()}))}d((function(){s||i(null,a)})),p(o,(function(n){if(!f){for(var o,s=l(t[n])?t[n]:[t[n]],c=b((function(t,r){if(u--,r.length<=1&&(r=r[0]),t){var o={};m(a,(function(t,e){o[e]=t})),o[n]=r,f=!0,i(t,o)}else a[n]=r,e.setImmediate(_)})),p=s.slice(0,s.length-1),h=p.length;h--;){if(!(o=t[p[h]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(l(o)&&v(o,n)>=0)throw new Error("Has cyclic dependencies")}y()?(u++,s[s.length-1](c,a)):d((function t(){y()&&(u++,w(t),s[s.length-1](c,a))}))}function y(){return u<r&&g(p,(function(t,e){return t&&a.hasOwnProperty(e)}),!0)&&!a.hasOwnProperty(n)}}))},e.retry=function(t,n,r){var i=5,o=0,s=[],a={times:i,interval:o};function c(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(t,n){function r(t,e){return function(r){t((function(t,n){r(!t||e,{err:t,result:n})}),n)}}function i(t){return function(e){setTimeout((function(){e(null)}),t)}}for(;a.times;){var o=!(a.times-=1);s.push(r(a.task,o)),!o&&a.interval>0&&s.push(i(a.interval))}e.series(s,(function(e,n){n=n[n.length-1],(t||a.callback)(n.err,n.result)}))}return u<=2&&"function"==typeof t&&(r=n,n=t),"function"!=typeof t&&c(a,t),a.callback=r,a.task=n,a.callback?l():l},e.waterfall=function(t,r){if(r=c(r||n),!l(t)){var i=new Error("First argument to waterfall must be an array of functions");return r(i)}if(!t.length)return r();!function t(e){return b((function(n,i){if(n)r.apply(null,[n].concat(i));else{var o=e.next();o?i.push(t(o)):i.push(r),z(e).apply(null,i)}}))}(e.iterator(t))()},e.parallel=function(t,n){L(e.eachOf,t,n)},e.parallelLimit=function(t,e,n){L(k(e),t,n)},e.series=function(t,n){L(e.eachOfSeries,t,n)},e.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},e.apply=b((function(t,e){return b((function(n){return t.apply(null,e.concat(n))}))})),e.concat=E(F),e.concatSeries=T(F),e.whilst=function(t,e,r){if(r=r||n,t()){var i=b((function(n,o){n?r(n):t.apply(this,o)?e(i):r.apply(null,[null].concat(o))}));e(i)}else r(null)},e.doWhilst=function(t,n,r){var i=0;return e.whilst((function(){return++i<=1||n.apply(this,arguments)}),t,r)},e.until=function(t,n,r){return e.whilst((function(){return!t.apply(this,arguments)}),n,r)},e.doUntil=function(t,n,r){return e.doWhilst(t,(function(){return!n.apply(this,arguments)}),r)},e.during=function(t,e,r){r=r||n;var i=b((function(e,n){e?r(e):(n.push(o),t.apply(this,n))})),o=function(t,n){t?r(t):n?e(i):r(null)};t(o)},e.doDuring=function(t,n,r){var i=0;e.during((function(t){i++<1?t(null,!0):n.apply(this,arguments)}),t,r)},e.queue=function(t,e){return D((function(e,n){t(e[0],n)}),e,1)},e.priorityQueue=function(t,r){function i(t,e){return t.priority-e.priority}var o=e.queue(t,r);return o.push=function(t,r,s){!function(t,r,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(t.started=!0,l(r)||(r=[r]),0===r.length)return e.setImmediate((function(){t.drain()}));p(r,(function(r){var a={data:r,priority:o,callback:"function"==typeof s?s:n};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)}))}(o,t,r,s)},delete o.unshift,o},e.cargo=function(t,e){return D(t,1,e)},e.log=M("log"),e.dir=M("dir"),e.memoize=function(t,n){var i={},o={},s=Object.prototype.hasOwnProperty;n=n||r;var a=b((function(r){var a=r.pop(),c=n.apply(null,r);s.call(i,c)?e.setImmediate((function(){a.apply(null,i[c])})):s.call(o,c)?o[c].push(a):(o[c]=[a],t.apply(null,r.concat([b((function(t){i[c]=t;var e=o[c];delete o[c];for(var n=0,r=e.length;n<r;n++)e[n].apply(null,t)}))])))}));return a.memo=i,a.unmemoized=t,a},e.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},e.times=R(e.map),e.timesSeries=R(e.mapSeries),e.timesLimit=function(t,n,r,i){return e.mapLimit(d(t),n,r,i)},e.seq=function(){var t=arguments;return b((function(r){var i=this,o=r[r.length-1];"function"==typeof o?r.pop():o=n,e.reduce(t,r,(function(t,e,n){e.apply(i,t.concat([b((function(t,e){n(t,e)}))]))}),(function(t,e){o.apply(i,[t].concat(e))}))}))},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))},e.applyEach=B(e.eachOf),e.applyEachSeries=B(e.eachOfSeries),e.forever=function(t,e){var r=a(e||n),i=z(t);!function t(e){if(e)return r(e);i(t)}()},e.ensureAsync=z,e.constant=b((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),e.wrapSync=e.asyncify=function(t){return b((function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then((function(t){o(null,t)})).catch((function(t){o(t.message?t:new Error(t))})):o(null,n)}))},zi?zi=e:"function"==typeof define&&define.amd?define([],(function(){return e})):s.async=e}()}var $i,Ui,Vi,Wi,Gi=!1;function Ki(t,e,n,r){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var i=e.mode,o=e.fs||Vi;void 0===i&&(i=Wi),r||(r=null);var s=n||function(){};t=Ui.resolve(t),o.mkdir(t,i,(function(n){if(!n)return s(null,r=r||t);switch(n.code){case"ENOENT":if(Ui.dirname(t)===t)return s(n);Ki(Ui.dirname(t),e,(function(n,r){n?s(n,r):Ki(t,e,s,r)}));break;default:o.stat(t,(function(t,e){t||!e.isDirectory()?s(n,r):s(null,r)}))}}))}function Qi(){return Gi||(Gi=!0,$i={},Ui=b,Vi=x,Wi=parseInt("0777",8),$i=Ki.mkdirp=Ki.mkdirP=Ki,Ki.sync=function t(e,n,r){n&&"object"==typeof n||(n={mode:n});var i=n.mode,o=n.fs||Vi;void 0===i&&(i=Wi),r||(r=null),e=Ui.resolve(e);try{o.mkdirSync(e,i),r=r||e}catch(i){switch(i.code){case"ENOENT":r=t(Ui.dirname(e),n,r),t(e,n,r);break;default:var s;try{s=o.statSync(e)}catch(t){throw i}if(!s.isDirectory())throw i}}return r}),$i}var Zi,Ji,Yi,Xi,to,eo,no,ro,io,oo=!1;function so(t){return"function"==typeof t?t:function(){var t;if(to){var e=new Error;t=function(t){t&&(e.message=t.message,n(t=e))}}else t=n;return t;function n(t){if(t){if(process.throwDeprecation)throw t;if(!process.noDeprecation){var e="fs: missing callback "+(t.stack||t.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}()}function ao(){return oo||(oo=!0,Zi={},Ji=b,Yi="win32"===process.platform,Xi=x,to=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG),Ji.normalize,eo=Yi?/(.*?)(?:[\/\\]+|$)/g:/(.*?)(?:[\/]+|$)/g,no=Yi?/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:/^[\/]*/,ro=function(t,e){if(t=Ji.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return e[t];var n,r,i,o,s=t,a={},c={};function u(){var e=no.exec(t);n=e[0].length,r=e[0],i=e[0],o="",Yi&&!c[i]&&(Xi.lstatSync(i),c[i]=!0)}for(u();n<t.length;){eo.lastIndex=n;var l=eo.exec(t);if(o=r,r+=l[0],i=o+l[1],n=eo.lastIndex,!(c[i]||e&&e[i]===i)){var f;if(e&&Object.prototype.hasOwnProperty.call(e,i))f=e[i];else{var p=Xi.lstatSync(i);if(!p.isSymbolicLink()){c[i]=!0,e&&(e[i]=i);continue}var h=null;if(!Yi){var d=p.dev.toString(32)+":"+p.ino.toString(32);a.hasOwnProperty(d)&&(h=a[d])}null===h&&(Xi.statSync(i),h=Xi.readlinkSync(i)),f=Ji.resolve(o,h),e&&(e[i]=f),Yi||(a[d]=h)}t=Ji.resolve(f,t.slice(n)),u()}}return e&&(e[s]=t),t},Zi.realpathSync=ro,io=function(t,e,n){if("function"!=typeof n&&(n=so(e),e=null),t=Ji.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return process.nextTick(n.bind(null,null,e[t]));var r,i,o,s,a=t,c={},u={};function l(){var e=no.exec(t);r=e[0].length,i=e[0],o=e[0],s="",Yi&&!u[o]?Xi.lstat(o,(function(t){if(t)return n(t);u[o]=!0,f()})):process.nextTick(f)}function f(){if(r>=t.length)return e&&(e[a]=t),n(null,t);eo.lastIndex=r;var c=eo.exec(t);return s=i,i+=c[0],o=s+c[1],r=eo.lastIndex,u[o]||e&&e[o]===o?process.nextTick(f):e&&Object.prototype.hasOwnProperty.call(e,o)?d(e[o]):Xi.lstat(o,p)}function p(t,r){if(t)return n(t);if(!r.isSymbolicLink())return u[o]=!0,e&&(e[o]=o),process.nextTick(f);if(!Yi){var i=r.dev.toString(32)+":"+r.ino.toString(32);if(c.hasOwnProperty(i))return h(null,c[i],o)}Xi.stat(o,(function(t){if(t)return n(t);Xi.readlink(o,(function(t,e){Yi||(c[i]=e),h(t,e)}))}))}function h(t,r,i){if(t)return n(t);var o=Ji.resolve(s,r);e&&(e[i]=o),d(o)}function d(e){t=Ji.resolve(e,t.slice(r)),l()}l()},Zi.realpath=io),Zi}var co,uo,lo,fo,po,ho,go,mo=!1;function vo(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function yo(t,e,n){if(ho)return lo(t,e,n);"function"==typeof e&&(n=e,e=null),lo(t,e,(function(r,i){vo(r)?go.realpath(t,e,n):n(r,i)}))}function wo(t,e){if(ho)return fo(t,e);try{return fo(t,e)}catch(n){if(vo(n))return go.realpathSync(t,e);throw n}}function bo(){uo.realpath=yo,uo.realpathSync=wo}function _o(){uo.realpath=lo,uo.realpathSync=fo}function So(){return mo||(mo=!0,co={},co=yo,yo.realpath=yo,yo.sync=wo,yo.realpathSync=wo,yo.monkeypatch=bo,yo.unmonkeypatch=_o,lo=(uo=x).realpath,fo=uo.realpathSync,po=process.version,ho=/^v[0-5]\./.test(po),go=ao()),co}var xo,ko,Eo=!1;function Co(){return Eo||(Eo=!0,xo={},xo=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);ko(i)?n.push.apply(n,i):n.push(i)}return n},ko=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),xo}var To,Ao=!1;function Po(t,e,n){t instanceof RegExp&&(t=Oo(t,n)),e instanceof RegExp&&(e=Oo(e,n));var r=Io(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Oo(t,e){var n=e.match(t);return n?n[0]:null}function Io(t,e,n){var r,i,o,s,a,c=n.indexOf(t),u=n.indexOf(e,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(t,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}function jo(){return Ao||(Ao=!0,To={},To=Po,Po.range=Io),To}var No,Lo,Fo,Do,Mo,Ro,Bo,zo,qo=!1;function Ho(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function $o(t){return t.split(Do).join("\\").split(Mo).join("{").split(Ro).join("}").split(Bo).join(",").split(zo).join(".")}function Uo(t){if(!t)return[""];var e=[],n=Fo("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=Uo(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function Vo(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),Zo(function(t){return t.split("\\\\").join(Do).split("\\{").join(Mo).split("\\}").join(Ro).split("\\,").join(Bo).split("\\.").join(zo)}(t),!0).map($o)):[]}function Wo(t){return"{"+t+"}"}function Go(t){return/^-?0\d/.test(t)}function Ko(t,e){return t<=e}function Qo(t,e){return t>=e}function Zo(t,e){var n=[],r=Fo("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=o||s,c=r.body.indexOf(",")>=0;if(!a&&!c)return r.post.match(/,.*\}/)?Zo(t=r.pre+"{"+r.body+Ro+r.post):[t];if(a)i=r.body.split(/\.\./);else if(1===(i=Uo(r.body)).length&&1===(i=Zo(i[0],!1).map(Wo)).length)return(f=r.post.length?Zo(r.post,!1):[""]).map((function(t){return r.pre+i[0]+t}));var u,l=r.pre,f=r.post.length?Zo(r.post,!1):[""];if(a){var p=Ho(i[0]),h=Ho(i[1]),d=Math.max(i[0].length,i[1].length),g=3==i.length?Math.abs(Ho(i[2])):1,m=Ko;h<p&&(g*=-1,m=Qo);var v=i.some(Go);u=[];for(var y=p;m(y,h);y+=g){var w;if(s)"\\"===(w=String.fromCharCode(y))&&(w="");else if(w=String(y),v){var b=d-w.length;if(b>0){var _=new Array(b+1).join("0");w=y<0?"-"+_+w.slice(1):_+w}}u.push(w)}}else u=Lo(i,(function(t){return Zo(t,!1)}));for(var S=0;S<u.length;S++)for(var x=0;x<f.length;x++){var k=l+u[S]+f[x];(!e||a||k)&&n.push(k)}return n}function Jo(){return qo||(qo=!0,No={},Lo=Co(),Fo=jo(),No=Vo,Do="\0SLASH"+Math.random()+"\0",Mo="\0OPEN"+Math.random()+"\0",Ro="\0CLOSE"+Math.random()+"\0",Bo="\0COMMA"+Math.random()+"\0",zo="\0PERIOD"+Math.random()+"\0"),No}var Yo,Xo,ts,es,ns,rs,is,os,ss,as,cs,us,ls=!1;function fs(t,e){return e=e||{},function(n,r,i){return hs(n,t,e)}}function ps(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function hs(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new ds(e,n).match(t))}function ds(t,e){if(!(this instanceof ds))return new ds(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==Xo.sep&&(t=t.split(Xo.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function gs(){if(!this._made){var t=this.pattern,e=this.options;if(e.nocomment||"#"!==t.charAt(0))if(t){this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map((function(t){return t.split(cs)})),this.debug(this.pattern,n),n=n.map((function(t,e,n){return t.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0}}function ms(){var t=this.pattern,e=!1,n=0;if(!this.options.nonegate){for(var r=0,i=t.length;r<i&&"!"===t.charAt(r);r++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}function vs(t,e){if(e||(e=this instanceof ds?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:es(t)}function ys(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===t)return ts;if(""===t)return"";var r,i="",o=!!n.nocase,s=!1,a=[],c=[],u=!1,l=-1,f=-1,p="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function d(){if(r){switch(r){case"*":i+=is,o=!0;break;case"?":i+=rs,o=!0;break;default:i+="\\"+r}h.debug("clearStateChar %j %j",r,i),r=!1}}for(var g,m=0,v=t.length;m<v&&(g=t.charAt(m));m++)if(this.debug("%s\t%s %s %j",t,m,i,g),s&&as[g])i+="\\"+g,s=!1;else switch(g){case"/":return!1;case"\\":d(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,m,i,g),u){this.debug("  in class"),"!"===g&&m===f+1&&(g="^"),i+=g;continue}h.debug("call clearStateChar %j",r),d(),r=g,n.noext&&d();continue;case"(":if(u){i+="(";continue}if(!r){i+="\\(";continue}a.push({type:r,start:m-1,reStart:i.length,open:ns[r].open,close:ns[r].close}),i+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,i),r=!1;continue;case")":if(u||!a.length){i+="\\)";continue}d(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}d(),i+="|";continue;case"[":if(d(),u){i+="\\"+g;continue}u=!0,f=m,l=i.length,i+=g;continue;case"]":if(m===f+1||!u){i+="\\"+g,s=!1;continue}if(u){var w=t.substring(f+1,m);try{RegExp("["+w+"]")}catch(t){var b=this.parse(w,us);i=i.substr(0,l)+"\\["+b[0]+"\\]",o=o||b[1],u=!1;continue}}o=!0,u=!1,i+=g;continue;default:d(),s?s=!1:!as[g]||"^"===g&&u||(i+="\\"),i+=g}for(u&&(w=t.substr(f+1),b=this.parse(w,us),i=i.substr(0,l)+"\\["+b[0],o=o||b[1]),y=a.pop();y;y=a.pop()){var _=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),_=_.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,n){return n||(n="\\"),e+e+n+"|"})),this.debug("tail=%j\n   %s",_,_,y,i);var S="*"===y.type?is:"?"===y.type?rs:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+S+"\\("+_}d(),s&&(i+="\\\\");var x=!1;switch(i.charAt(0)){case".":case"[":case"(":x=!0}for(var k=c.length-1;k>-1;k--){var E=c[k],C=i.slice(0,E.reStart),T=i.slice(E.reStart,E.reEnd-8),A=i.slice(E.reEnd-8,E.reEnd),P=i.slice(E.reEnd);A+=P;var O=C.split("(").length-1,I=P;for(m=0;m<O;m++)I=I.replace(/\)[+*?]?/,"");var j="";""===(P=I)&&e!==us&&(j="$"),i=C+T+P+j+A}if(""!==i&&o&&(i="(?=.)"+i),x&&(i=p+i),e===us)return[i,o];if(!o)return t.replace(/\\(.)/g,"$1");var N=n.nocase?"i":"";try{var L=new RegExp("^"+i+"$",N)}catch(t){return new RegExp("$.")}return L._glob=t,L._src=i,L}function ws(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?is:e.dot?os:ss,r=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===ts?n:"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(t){this.regexp=!1}return this.regexp}function bs(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"/"!==Xo.sep&&(t=t.split(Xo.sep).join("/")),t=t.split(cs),this.debug(this.pattern,"split",t);var r,i,o=this.set;for(this.debug(this.pattern,"set",o),i=t.length-1;i>=0&&!(r=t[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=t;if(n.matchBase&&1===s.length&&(a=[r]),this.matchOne(a,s,e))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}function _s(){Yo={},Yo=hs,hs.Minimatch=ds,Xo={sep:"/"};try{Xo=function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}("path")}catch(t){}ts=hs.GLOBSTAR=ds.GLOBSTAR={},es=Jo(),ns={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},is=(rs="[^/]")+"*?",os="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ss="(?:(?!(?:\\/|^)\\.).)*?",as="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{}),cs=/\/+/,hs.filter=fs,hs.defaults=function(t){if(!t||!Object.keys(t).length)return hs;var e=hs,n=function(n,r,i){return e.minimatch(n,r,ps(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,ps(t,r))},n},ds.defaults=function(t){return t&&Object.keys(t).length?hs.defaults(t).Minimatch:ds},ds.prototype.debug=function(){},ds.prototype.make=gs,ds.prototype.parseNegate=ms,hs.braceExpand=function(t,e){return vs(t,e)},ds.prototype.braceExpand=vs,ds.prototype.parse=ys,us={},hs.makeRe=function(t,e){return new ds(t,e||{}).makeRe()},ds.prototype.makeRe=ws,hs.match=function(t,e,n){var r=new ds(e,n=n||{});return t=t.filter((function(t){return r.match(t)})),r.options.nonull&&!t.length&&t.push(e),t},ds.prototype.match=bs,ds.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=e[o],l=t[i];if(this.debug(e,u,l),!1===u)return!1;if(u===ts){this.debug("GLOBSTAR",[e,u,l]);var f=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}for(;f<s;){var h=t[f];if(this.debug("\nglobstar while",t,f,e,p,h),this.matchOne(t.slice(f),e.slice(p),n))return this.debug("globstar found match!",f,s,h),!0;if("."===h||".."===h||!r.dot&&"."===h.charAt(0)){this.debug("dot detected!",t,f,e,p);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!n||(this.debug("\n>>> no match, partial?",t,f,e,p),f!==s))}if("string"==typeof u?(c=r.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,c)):(c=l.match(u),this.debug("pattern match",u,l,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return n;if(o===a)return i===s-1&&""===t[i];throw new Error("wtf?")}}function Ss(){return ls||(ls=!0,_s()),Yo}var xs,ks=!1;function Es(){return ks||(ks=!0,xs={},xs="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}),xs}var Cs,Ts,As,Ps=!1;function Os(t){return"/"===t.charAt(0)}function Is(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(t),n=e[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(e[2]||r)}function js(){return Ps||(Ps=!0,Cs={},Cs="win32"===process.platform?Is:Os,Ts=Os,Cs.posix=Ts,As=Is,Cs.win32=As),Cs}var Ns,Ls,Fs,Ds,Ms,Rs,Bs,zs,qs,Hs,$s,Us,Vs,Ws=!1;function Gs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ks(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function Qs(t,e){return t.localeCompare(e)}function Zs(t){var e=null;if("/**"===t.slice(-3)){var n=t.replace(/(\/\*\*)+$/,"");e=new Vs(n,{dot:!0})}return{matcher:new Vs(t,{dot:!0}),gmatcher:e}}function Js(t,e,n){if(n||(n={}),n.matchBase&&-1===e.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!n.silent,t.pattern=e,t.strict=!1!==n.strict,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),function(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Zs))}(t,n),t.changedCwd=!1;var r=process.cwd();Gs(n,"cwd")?(t.cwd=Hs.resolve(n.cwd),t.changedCwd=t.cwd!==r):t.cwd=r,t.root=n.root||Hs.resolve(t.cwd,"/"),t.root=Hs.resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=Us(t.cwd)?t.cwd:ta(t,t.cwd),"win32"===process.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,t.minimatch=new Vs(e,n),t.options=t.minimatch.options}function Ys(t){for(var e=t.nounique,n=e?[]:Object.create(null),r=0,i=t.matches.length;r<i;r++){var o=t.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);e?n.push.apply(n,s):s.forEach((function(t){n[t]=!0}))}else if(t.nonull){var a=t.minimatch.globSet[r];e?n.push(a):n[a]=!0}}if(e||(n=Object.keys(n)),t.nosort||(n=n.sort(t.nocase?Ks:Qs)),t.mark){for(r=0;r<n.length;r++)n[r]=t._mark(n[r]);t.nodir&&(n=n.filter((function(e){var n=!/\/$/.test(e),r=t.cache[e]||t.cache[ta(t,e)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n})))}t.ignore.length&&(n=n.filter((function(e){return!ea(t,e)}))),t.found=n}function Xs(t,e){var n=ta(t,e),r=t.cache[n],i=e;if(r){var o="DIR"===r||Array.isArray(r),s="/"===e.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=ta(t,i);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return i}function ta(t,e){var n=e;return n="/"===e.charAt(0)?Hs.join(t.root,e):Us(e)||""===e?e:t.changedCwd?Hs.resolve(t.cwd,e):Hs.resolve(e),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function ea(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return t.matcher.match(e)||!(!t.gmatcher||!t.gmatcher.match(e))}))}function na(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return!(!t.gmatcher||!t.gmatcher.match(e))}))}function ra(){return Ws||(Ws=!0,(Ns={}).alphasort=Qs,Ls=Ks,Ns.alphasorti=Ls,Fs=Js,Ns.setopts=Fs,Ds=Gs,Ns.ownProp=Ds,Ms=ta,Ns.makeAbs=Ms,Rs=Ys,Ns.finish=Rs,Bs=Xs,Ns.mark=Bs,zs=ea,Ns.isIgnored=zs,qs=na,Ns.childrenIgnored=qs,Hs=b,$s=Ss(),Us=js(),Vs=$s.Minimatch),Ns}var ia,oa,sa,aa,ca,ua,la,fa,pa,ha,da,ga,ma=!1;function va(t,e){if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new ya(t,e).found}function ya(t,e){if(!t)throw new Error("must provide pattern");if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof ya))return new ya(t,e);if(pa(this,t,e),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}function wa(){return ma||(ma=!0,ia={},ia=va,va.GlobSync=ya,oa=x,sa=So(),aa=Ss(),aa.Minimatch,ac().Glob,a,ca=b,ua=o,la=js(),fa=ra(),fa.alphasort,fa.alphasorti,pa=fa.setopts,ha=fa.ownProp,da=fa.childrenIgnored,ga=fa.isIgnored,ya.prototype._finish=function(){if(ua(this instanceof ya),this.realpath){var t=this;this.matches.forEach((function(e,n){var r=t.matches[n]=Object.create(null);for(var i in e)try{i=t._makeAbs(i),r[sa.realpathSync(i,t.realpathCache)]=!0}catch(e){if("stat"!==e.syscall)throw e;r[t._makeAbs(i)]=!0}}))}fa.finish(this)},ya.prototype._process=function(t,e,n){ua(this instanceof ya);for(var r,i=0;"string"==typeof t[i];)i++;switch(i){case t.length:return void this._processSimple(t.join("/"),e);case 0:r=null;break;default:r=t.slice(0,i).join("/")}var o,s=t.slice(i);null===r?o=".":la(r)||la(t.join("/"))?(r&&la(r)||(r="/"+r),o=r):o=r;var a=this._makeAbs(o);da(this,o)||(s[0]===aa.GLOBSTAR?this._processGlobStar(r,o,a,s,e,n):this._processReaddir(r,o,a,s,e,n))},ya.prototype._processReaddir=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){for(var a=r[0],c=!!this.minimatch.negate,u=a._glob,l=this.dot||"."===u.charAt(0),f=[],p=0;p<s.length;p++)("."!==(g=s[p]).charAt(0)||l)&&(c&&!t?!g.match(a):g.match(a))&&f.push(g);var h=f.length;if(0!==h)if(1!==r.length||this.mark||this.stat)for(r.shift(),p=0;p<h;p++){var d;g=f[p],d=t?[t,g]:[g],this._process(d.concat(r),i,o)}else for(this.matches[i]||(this.matches[i]=Object.create(null)),p=0;p<h;p++){var g=f[p];t&&(g="/"!==t.slice(-1)?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=ca.join(this.root,g)),this._emitMatch(i,g)}}},ya.prototype._emitMatch=function(t,e){if(!ga(this,e)){var n=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}},ya.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,n;try{n=oa.lstatSync(t)}catch(t){if("ENOENT"===t.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[t]=r,r||!n||n.isDirectory()?e=this._readdir(t,!1):this.cache[t]="FILE",e},ya.prototype._readdir=function(t,e){if(e&&!ha(this.symlinks,t))return this._readdirInGlobStar(t);if(ha(this.cache,t)){var n=this.cache[t];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,oa.readdirSync(t))}catch(e){return this._readdirError(t,e),null}},ya.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var r=e[n];r="/"===t?t+r:t+"/"+r,this.cache[r]=!0}return this.cache[t]=e,e},ya.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(e.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=e.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e)}},ya.prototype._processGlobStar=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=t?[t]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var f=0;f<l;f++)if("."!==s[f].charAt(0)||this.dot){var p=c.concat(s[f],a);this._process(p,i,!0);var h=c.concat(s[f],r);this._process(h,i,!0)}}},ya.prototype._processSimple=function(t,e){var n=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),n){if(t&&la(t)&&!this.nomount){var r=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=ca.join(this.root,t):(t=ca.resolve(this.root,t),r&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}},ya.prototype._stat=function(t){var e=this._makeAbs(t),n="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&ha(this.cache,e)){var r=this.cache[e];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var i=this.statCache[e];if(!i){var o;try{o=oa.lstatSync(e)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=oa.statSync(e)}catch(t){i=o}else i=o}return this.statCache[e]=i,r=!0,i&&(r=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||r,(!n||"FILE"!==r)&&r},ya.prototype._mark=function(t){return fa.mark(this,t)},ya.prototype._makeAbs=function(t){return fa.makeAbs(this,t)}),ia}var ba,_a=!1;function Sa(t,e){if(t&&e)return Sa(t)(e);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}function xa(){return _a||(_a=!0,ba={},ba=Sa),ba}var ka,Ea,Ca,Ta=!1;function Aa(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Pa(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}function Oa(){return Ta||(Ta=!0,ka={},Ea=xa(),ka=Ea(Aa),Ca=Ea(Pa),ka.strict=Ca,Aa.proto=Aa((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Aa(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Pa(this)},configurable:!0})}))),ka}var Ia,ja,Na,La,Fa=!1;function Da(t,e){return Na[t]?(Na[t].push(e),null):(Na[t]=[e],function(t){return La((function e(){var n=Na[t],r=n.length,i=Ma(arguments);try{for(var o=0;o<r;o++)n[o].apply(null,i)}finally{n.length>r?(n.splice(0,r),process.nextTick((function(){e.apply(null,i)}))):delete Na[t]}}))}(t))}function Ma(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r]=t[r];return n}function Ra(){return Fa||(Fa=!0,Ia={},ja=xa(),Na=Object.create(null),La=Oa(),Ia=ja(Da)),Ia}var Ba,za,qa,Ha,$a,Ua,Va,Wa,Ga,Ka,Qa,Za,Ja,Ya,Xa,tc,ec,nc,rc=!1;function ic(t,e,n){if("function"==typeof e&&(n=e,e={}),e||(e={}),e.sync){if(n)throw new TypeError("callback provided to sync glob");return Ka(t,e)}return new oc(t,e,n)}function oc(t,e,n){if("function"==typeof e&&(n=e,e=null),e&&e.sync){if(n)throw new TypeError("callback provided to sync glob");return new nc(t,e)}if(!(this instanceof oc))return new oc(t,e,n);Za(this,t,e),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=ec(n),this.on("error",n),this.on("end",(function(t){n(null,t)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return s();for(var o=0;o<r;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}function sc(){Ba={},Ba=ic,za=x,qa=So(),Ha=Ss(),Ha.Minimatch,$a=Es(),Ua=i.EventEmitter,Va=b,Wa=o,Ga=js(),Ka=wa(),Qa=ra(),Qa.alphasort,Qa.alphasorti,Za=Qa.setopts,Ja=Qa.ownProp,Ya=Ra(),a,Xa=Qa.childrenIgnored,tc=Qa.isIgnored,ec=Oa(),ic.sync=Ka,nc=ic.GlobSync=Ka.GlobSync,ic.glob=ic,ic.hasMagic=function(t,e){var n=function(t,e){if(null===e||"object"!=typeof e)return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}({},e);n.noprocess=!0;var r=new oc(t,n).minimatch.set;if(!t)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},ic.Glob=oc,$a(oc,Ua),oc.prototype._finish=function(){if(Wa(this instanceof oc),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Qa.finish(this),this.emit("end",this.found)}},oc.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var e=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--t&&e._finish()}},oc.prototype._realpathSet=function(t,e){var n=this.matches[t];if(!n)return e();var r=Object.keys(n),i=this,o=r.length;if(0===o)return e();var s=this.matches[t]=Object.create(null);r.forEach((function(n,r){n=i._makeAbs(n),qa.realpath(n,i.realpathCache,(function(r,a){r?"stat"===r.syscall?s[n]=!0:i.emit("error",r):s[a]=!0,0==--o&&(i.matches[t]=s,e())}))}))},oc.prototype._mark=function(t){return Qa.mark(this,t)},oc.prototype._makeAbs=function(t){return Qa.makeAbs(this,t)},oc.prototype.abort=function(){this.aborted=!0,this.emit("abort")},oc.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},oc.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var n=t[e];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(e=0;e<r.length;e++){var i=r[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},oc.prototype._process=function(t,e,n,r){if(Wa(this instanceof oc),Wa("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,e,n,r]);else{for(var i,o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return void this._processSimple(t.join("/"),e,r);case 0:i=null;break;default:i=t.slice(0,o).join("/")}var s,a=t.slice(o);null===i?s=".":Ga(i)||Ga(t.join("/"))?(i&&Ga(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(Xa(this,s))return r();a[0]===Ha.GLOBSTAR?this._processGlobStar(i,s,c,a,e,n,r):this._processReaddir(i,s,c,a,e,n,r)}},oc.prototype._processReaddir=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){return a._processReaddir2(t,e,n,r,i,o,u,s)}))},oc.prototype._processReaddir2=function(t,e,n,r,i,o,s,a){if(!s)return a();for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,f=this.dot||"."===l.charAt(0),p=[],h=0;h<s.length;h++){if("."!==(g=s[h]).charAt(0)||f)(u&&!t?!g.match(c):g.match(c))&&p.push(g)}var d=p.length;if(0===d)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(h=0;h<d;h++){var g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=Va.join(this.root,g)),this._emitMatch(i,g)}return a()}r.shift();for(h=0;h<d;h++){g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),this._process([g].concat(r),i,o,a)}a()},oc.prototype._emitMatch=function(t,e){if(!this.aborted&&!tc(this,e))if(this.paused)this._emitQueue.push([t,e]);else{var n=Ga(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0;var i=this.statCache[n];i&&this.emit("stat",e,i),this.emit("match",e)}}},oc.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var n=this,r=Ya("lstat\0"+t,(function(r,i){if(r&&"ENOENT"===r.code)return e();var o=i&&i.isSymbolicLink();n.symlinks[t]=o,o||!i||i.isDirectory()?n._readdir(t,!1,e):(n.cache[t]="FILE",e())}));r&&za.lstat(t,r)}},oc.prototype._readdir=function(t,e,n){if(!this.aborted&&(n=Ya("readdir\0"+t+"\0"+e,n))){if(e&&!Ja(this.symlinks,t))return this._readdirInGlobStar(t,n);if(Ja(this.cache,t)){var r=this.cache[t];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}za.readdir(t,function(t,e,n){return function(r,i){r?t._readdirError(e,r,n):t._readdirEntries(e,i,n)}}(this,t,n))}},oc.prototype._readdirEntries=function(t,e,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var i=e[r];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,n(null,e)}},oc.prototype._readdirError=function(t,e,n){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e)}return n()}},oc.prototype._processGlobStar=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){a._processGlobStar2(t,e,n,r,i,o,u,s)}))},oc.prototype._processGlobStar2=function(t,e,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=t?[t]:[],l=u.concat(c);this._process(l,i,!1,a);var f=this.symlinks[n],p=s.length;if(f&&o)return a();for(var h=0;h<p;h++){if("."!==s[h].charAt(0)||this.dot){var d=u.concat(s[h],c);this._process(d,i,!0,a);var g=u.concat(s[h],r);this._process(g,i,!0,a)}}a()},oc.prototype._processSimple=function(t,e,n){var r=this;this._stat(t,(function(i,o){r._processSimple2(t,e,i,o,n)}))},oc.prototype._processSimple2=function(t,e,n,r,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!r)return i();if(t&&Ga(t)&&!this.nomount){var o=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=Va.join(this.root,t):(t=Va.resolve(this.root,t),o&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()},oc.prototype._stat=function(t,e){var n=this._makeAbs(t),r="/"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&Ja(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return e(null,i);if(r&&"FILE"===i)return e()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return e(null,o);var s=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===s?e():e(null,s,o)}var a=this,c=Ya("stat\0"+n,(function(r,i){if(i&&i.isSymbolicLink())return za.stat(n,(function(r,o){r?a._stat2(t,n,null,i,e):a._stat2(t,n,r,o,e)}));a._stat2(t,n,r,i,e)}));c&&za.lstat(n,c)},oc.prototype._stat2=function(t,e,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[e]=!1,i();var o="/"===t.slice(-1);if(this.statCache[e]=r,"/"===e.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&"FILE"===s?i():i(null,s,r)}}function ac(){return rc||(rc=!0,sc()),Ba}var cc,uc,lc,fc,pc,hc,dc,gc,mc,vc=!1;function yc(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(e){t[e]=t[e]||fc[e],t[e+="Sync"]=t[e]||fc[e]})),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,!1===t.glob&&(t.disableGlob=!0),t.disableGlob=t.disableGlob||!1,t.glob=t.glob||dc}function wc(t,e,n){"function"==typeof e&&(n=e,e={}),uc(t,"rimraf: missing path"),uc.equal(typeof t,"string","rimraf: path should be a string"),uc.equal(typeof n,"function","rimraf: callback function required"),uc(e,"rimraf: invalid options argument provided"),uc.equal(typeof e,"object","rimraf: options should be object"),yc(e);var r=0,i=null,o=0;if(e.disableGlob||!pc.hasMagic(t))return s(null,[t]);function s(t,s){return t?n(t):0===(o=s.length)?n():void s.forEach((function(t){bc(t,e,(function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&r<e.maxBusyTries)return r++,setTimeout((function(){bc(t,e,s)}),100*r);if("EMFILE"===a.code&&gc<e.emfileWait)return setTimeout((function(){bc(t,e,s)}),gc++);"ENOENT"===a.code&&(a=null)}gc=0,function(t){i=i||t,0==--o&&n(i)}(a)}))}))}e.lstat(t,(function(n,r){if(!n)return s(null,[t]);pc(t,e.glob,s)}))}function bc(t,e,n){uc(t),uc(e),uc("function"==typeof n),e.lstat(t,(function(r,i){return r&&"ENOENT"===r.code?n(null):(r&&"EPERM"===r.code&&mc&&_c(t,e,r,n),i&&i.isDirectory()?xc(t,e,r,n):void e.unlink(t,(function(r){if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return mc?_c(t,e,r,n):xc(t,e,r,n);if("EISDIR"===r.code)return xc(t,e,r,n)}return n(r)})))}))}function _c(t,e,n,r){uc(t),uc(e),uc("function"==typeof r),n&&uc(n instanceof Error),e.chmod(t,hc,(function(i){i?r("ENOENT"===i.code?null:n):e.stat(t,(function(i,o){i?r("ENOENT"===i.code?null:n):o.isDirectory()?xc(t,e,n,r):e.unlink(t,r)}))}))}function Sc(t,e,n){uc(t),uc(e),n&&uc(n instanceof Error);try{e.chmodSync(t,hc)}catch(t){if("ENOENT"===t.code)return;throw n}try{var r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?Ec(t,e,n):e.unlinkSync(t)}function xc(t,e,n,r){uc(t),uc(e),n&&uc(n instanceof Error),uc("function"==typeof r),e.rmdir(t,(function(i){!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):function(t,e,n){uc(t),uc(e),uc("function"==typeof n),e.readdir(t,(function(r,i){if(r)return n(r);var o,s=i.length;if(0===s)return e.rmdir(t,n);i.forEach((function(r){wc(lc.join(t,r),e,(function(r){if(!o)return r?n(o=r):void(0==--s&&e.rmdir(t,n))}))}))}))}(t,e,r)}))}function kc(t,e){var n;if(yc(e=e||{}),uc(t,"rimraf: missing path"),uc.equal(typeof t,"string","rimraf: path should be a string"),uc(e,"rimraf: missing options"),uc.equal(typeof e,"object","rimraf: options should be object"),e.disableGlob||!pc.hasMagic(t))n=[t];else try{e.lstatSync(t),n=[t]}catch(r){n=pc.sync(t,e.glob)}if(n.length)for(var r=0;r<n.length;r++){t=n[r];try{var i=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&mc&&Sc(t,e,n)}try{i&&i.isDirectory()?Ec(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return mc?Sc(t,e,n):Ec(t,e,n);if("EISDIR"!==n.code)throw n;Ec(t,e,n)}}}function Ec(t,e,n){uc(t),uc(e),n&&uc(n instanceof Error);try{e.rmdirSync(t)}catch(r){if("ENOENT"===r.code)return;if("ENOTDIR"===r.code)throw n;"ENOTEMPTY"!==r.code&&"EEXIST"!==r.code&&"EPERM"!==r.code||function(t,e){uc(t),uc(e),e.readdirSync(t).forEach((function(n){kc(lc.join(t,n),e)}));var n=mc?100:1,r=0;for(;;){var i=!0;try{var o=e.rmdirSync(t,e);return i=!1,o}finally{if(++r<n&&i)continue}}}(t,e)}}function Cc(){return vc||(vc=!0,cc={},cc=wc,wc.sync=kc,uc=o,lc=b,fc=x,pc=ac(),hc=parseInt("666",8),dc={nosort:!0,silent:!0},gc=0,mc="win32"===process.platform),cc}(function(){var t,e,i,o,s,a,c,u,l,f,p,h,d,g,m,v,y,w,_,S=[].slice;u=x,s=r,v=b,_=Bi(),qi||(qi=!0,Hi()),a=zi,m=Qi(),y=Cc(),l={__esModule:!1,getHomeDirectory:function(){return"win32"!==process.platform||process.env.HOME?process.env.HOME:process.env.USERPROFILE},absolute:function(t){if(null==t)return null;t=l.resolveHome(t);try{return u.realpathSync(t)}catch(e){return e,t}},normalize:function(t){return null==t?null:l.resolveHome(v.normalize(t.toString()))},resolveHome:function(t){return"~"===t?l.getHomeDirectory():0===t.indexOf("~"+v.sep)?""+l.getHomeDirectory()+t.substring(1):t},tildify:function(t){var e,n;return"win32"===process.platform?t:(n=l.normalize(t),null==(e=l.getHomeDirectory())?t:n===e?"~":n.startsWith(v.join(e,v.sep))?v.join("~",v.sep,n.substring(e.length+1)):t)},getAppDataDirectory:function(){switch(process.platform){case"darwin":return l.absolute(v.join("~","Library","Application Support"));case"linux":return"/var/lib";case"win32":return process.env.APPDATA;default:return null}},isAbsolute:function(t){return null==t&&(t=""),"win32"!==process.platform?"/"===t[0]:":"===t[1]||"\\"===t[0]&&"\\"===t[1]},existsSync:function(t){return d(t)&&!1!==w(t)},isDirectorySync:function(t){var e;return!!d(t)&&(!!(e=w(t))&&e.isDirectory())},isDirectory:function(t,e){return d(t)?u.stat(t,(function(t,n){return e(null==t&&n.isDirectory())})):e(!1)},isFileSync:function(t){var e;return!!d(t)&&(!!(e=w(t))&&e.isFile())},isSymbolicLinkSync:function(t){var e;return!!d(t)&&(!!(e=g(t))&&e.isSymbolicLink())},isSymbolicLink:function(t,e){return d(t)?u.lstat(t,(function(t,n){return"function"==typeof e?e(null!=n&&n.isSymbolicLink()):void 0})):process.nextTick((function(){return"function"==typeof e?e(!1):void 0}))},isExecutableSync:function(t){var e;return!!d(t)&&(!!(e=w(t))&&0!=(1&e.mode))},getSizeSync:function(t){var e;return d(t)&&null!=(e=w(t).size)?e:-1},listSync:function(t,e){var n;return l.isDirectorySync(t)?(n=u.readdirSync(t),e&&(n=l.filterExtensions(n,e)),n=(n=n.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(e){return v.join(t,e)}))):[]},list:function(){var t,e,n,r;return r=arguments[0],(n=2<=arguments.length?S.call(arguments,1):[]).length>1&&(e=n.shift()),t=n.shift(),u.readdir(r,(function(n,i){return null!=n?t(n):(e&&(i=l.filterExtensions(i,e)),i=(i=i.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(t){return v.join(r,t)})),t(null,i))}))},filterExtensions:function(t,e){return e=e.map((function(t){return""===t?t:"."+t.replace(/^\./,"")})),t.filter((function(t){return _.include(e,v.extname(t))}))},listTreeSync:function(t){var e,n;return n=[],e=function(t){return n.push(t),!0},l.traverseTreeSync(t,e,e),n},move:function(t,e,n){return p(t,e,(function(r,i){var o,s;if(!r)return i?(s=v.dirname(e),u.exists(s,(function(r){if(!r)return l.makeTree(s,(function(r){if(!r)return u.rename(t,e,n);n(r)}));u.rename(t,e,n)}))):((o=new Error("'"+e+"' already exists.")).code="EEXIST",void n(o));n(r)}))},moveSync:function(t,e){var n,r;if(!h(t,e))throw(n=new Error("'"+e+"' already exists.")).code="EEXIST",n;return r=v.dirname(e),u.existsSync(r)||l.makeTreeSync(r),u.renameSync(t,e)},removeSync:function(t){return y.sync(t)},remove:function(t,e){return y(t,e)},writeFileSync:function(t,e,n){return m.sync(v.dirname(t)),u.writeFileSync(t,e,n)},writeFile:function(t,e,n,r){return r=_.last(arguments),m(v.dirname(t),(function(i){return null!=i?"function"==typeof r?r(i):void 0:u.writeFile(t,e,n,r)}))},copy:function(t,e,n){return m(v.dirname(e),(function(r){var i,o;if(null==r)return(o=u.createReadStream(t)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),(i=u.createWriteStream(e)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),i.on("close",(function(){return"function"==typeof n&&n(),n=null})),o.pipe(i);"function"==typeof n&&n(r)}))},copySync:function(t,e){var n,r,i,o,s,a,c;for(o=u.readdirSync(t),m.sync(e),c=[],s=0,a=o.length;s<a;s++)r=o[s],i=v.join(t,r),n=v.join(e,r),l.isDirectorySync(i)?c.push(l.copySync(i,n)):c.push(l.copyFileSync(i,n));return c},copyFileSync:function(t,e,n){var r,i,o,s,a,c;null==n&&(n=16384),m.sync(v.dirname(e)),s=null,a=null;try{for(s=u.openSync(t,"r"),a=u.openSync(e,"w"),i=1,o=0,c=[];i>0;)r=new Buffer(n),i=u.readSync(s,r,0,r.length,o),u.writeSync(a,r,0,i,o),c.push(o+=i);return c}finally{null!=s&&u.closeSync(s),null!=a&&u.closeSync(a)}},makeTreeSync:function(t){if(!l.isDirectorySync(t))return m.sync(t)},makeTree:function(t,e){return l.isDirectory(t,(function(n){return n?"function"==typeof e?e():void 0:m(t,(function(t){return"function"==typeof e?e(t):void 0}))}))},traverseTreeSync:function(t,e,n){var r;if(null==n&&(n=e),l.isDirectorySync(t))return(r=function(t,e,n){var i,o,s,a,c,l,f;for(c=0,l=(f=u.readdirSync(t)).length;c<l;c++)o=f[c],i=v.join(t,o),(a=u.lstatSync(i)).isSymbolicLink()&&(s=w(i))&&(a=s),a.isDirectory()?n(i)&&r(i,e,n):a.isFile()&&e(i)})(t,e,n)},traverseTree:function(t,e,n,r){return u.readdir(t,(function(i,o){var s,c,l,f,p;if(i)return"function"==typeof r?r():void 0;for((c=a.queue((function(t,r){return u.stat(t,(function(i,o){return i?r(i):o.isFile()?(e(t),r()):o.isDirectory()&&n(t)?u.readdir(t,(function(e,n){var i,o,s;if(e)return r(e);for(o=0,s=n.length;o<s;o++)i=n[o],c.unshift(v.join(t,i));return r()})):r()}))}))).concurrency=1,c.drain=r,p=[],l=0,f=o.length;l<f;l++)s=o[l],p.push(c.push(v.join(t,s)));return p}))},md5ForPath:function(t){var e;return e=u.readFileSync(t),n.createHash("md5").update(e).digest("hex")},resolve:function(){var t,e,n,r,i,o,s,a,c,u;if(t=1<=arguments.length?S.call(arguments,0):[],_.isArray(_.last(t))&&(n=t.pop()),o=null!=(u=t.pop())?u.toString():void 0,i=t,o){if(l.isAbsolute(o)){if(n&&(s=l.resolveExtension(o,n)))return s;if(l.existsSync(o))return o}for(a=0,c=i.length;a<c;a++)if(r=i[a],e=v.join(r,o),n){if(s=l.resolveExtension(e,n))return s}else if(l.existsSync(e))return l.absolute(e)}},resolveOnLoadPath:function(){var t,e,n;return t=1<=arguments.length?S.call(arguments,0):[],n=null,n=null!=module.paths?module.paths:process.resourcesPath?[v.join(process.resourcesPath,"app","node_modules")]:[],e=s.globalPaths.concat(n),l.resolve.apply(l,S.call(e).concat(S.call(t)))},resolveExtension:function(t,e){var n,r,i,o;for(i=0,o=e.length;i<o;i++)if(""===(n=e[i])){if(l.existsSync(t))return l.absolute(t)}else if(r=t+"."+n.replace(/^\./,""),l.existsSync(r))return l.absolute(r)},isCompressedExtension:function(t){return null!=t&&e.hasOwnProperty(t.toLowerCase())},isImageExtension:function(t){return null!=t&&i.hasOwnProperty(t.toLowerCase())},isPdfExtension:function(t){return".pdf"===(null!=t?t.toLowerCase():void 0)},isBinaryExtension:function(e){return null!=e&&t.hasOwnProperty(e.toLowerCase())},isReadmePath:function(t){var e;return e=v.extname(t),"readme"===v.basename(t,e).toLowerCase()&&(""===e||l.isMarkdownExtension(e))},isMarkdownExtension:function(t){return null!=t&&o.hasOwnProperty(t.toLowerCase())},isCaseInsensitive:function(){var t,e;return null==l.caseInsensitiveFs&&(t=w(process.execPath.toLowerCase()),e=w(process.execPath.toUpperCase()),l.caseInsensitiveFs=!(!t||!e)&&(t.dev===e.dev&&t.ino===e.ino)),l.caseInsensitiveFs},isCaseSensitive:function(){return!l.isCaseInsensitive()},statSyncNoException:function(){var t;return t=1<=arguments.length?S.call(arguments,0):[],w.apply(null,t)},lstatSyncNoException:function(){var t;return t=1<=arguments.length?S.call(arguments,0):[],g.apply(null,t)}},f=null,c=function(){return null===f&&(f=process.versions.electron&&parseInt(process.versions.electron.split(".")[0])<=2),f},w=function(){var t;if(t=1<=arguments.length?S.call(arguments,0):[],u.statSyncNoException&&c())return u.statSyncNoException.apply(u,t);try{return u.statSync.apply(u,t)}catch(t){return t,!1}},g=function(){var t;if(t=1<=arguments.length?S.call(arguments,0):[],u.lstatSyncNoException&&c())return u.lstatSyncNoException.apply(u,t);try{return u.lstatSync.apply(u,t)}catch(t){return t,!1}},t={".ds_store":!0,".a":!0,".exe":!0,".o":!0,".pyc":!0,".pyo":!0,".so":!0,".woff":!0},e={".bz2":!0,".egg":!0,".epub":!0,".gem":!0,".gz":!0,".jar":!0,".lz":!0,".lzma":!0,".lzo":!0,".rar":!0,".tar":!0,".tgz":!0,".war":!0,".whl":!0,".xpi":!0,".xz":!0,".z":!0,".zip":!0},i={".gif":!0,".ico":!0,".jpeg":!0,".jpg":!0,".png":!0,".tif":!0,".tiff":!0,".webp":!0},o={".markdown":!0,".md":!0,".mdown":!0,".mkd":!0,".mkdown":!0,".rmd":!0,".ron":!0},d=function(t){return null!=t&&"string"==typeof t&&t.length>0},p=function(t,e,n){return u.stat(t,(function(r,i){if(!r)return u.stat(e,(function(r,o){if(!r||"ENOENT"!==r.code)return n(void 0,t.toLowerCase()===e.toLowerCase()&&i.dev===o.dev&&i.ino===o.ino);n(void 0,!0)}));n(r)}))},h=function(t,e){var n,r;return r=w(t),n=w(e),!r||!n||t.toLowerCase()===e.toLowerCase()&&r.dev===n.dev&&r.ino===n.ino},Li=new Proxy({},{get:function(t,e){var n;return null!=(n=l[e])?n:u[e]},set:function(t,e,n){return l[e]=n}})}).call(Li);class Tc{constructor(t){this.props=t,this.model=atom.workspace.buildTextEditor({mini:!0,softWrapped:!0,lineNumberGutterVisible:!1}),this.element=atom.views.getView(this.model),this.model.setText(t.initialText),t.selectAll?this.model.selectAll():this.model.getLastCursor().moveToEndOfScreenLine(),this.setReadOnly(),this.setGrammar(),this.model.scrollToBufferPosition([0,0])}async update(t){this.element=atom.views.getView(this.model),this.props={...this.props,...t},this.setReadOnly(),this.setGrammar()}focus(){this.element.focus()}getModel(){return this.model}setReadOnly(){this.model.setReadOnly(!!this.props.readOnly)}setGrammar(){void 0!==this.props.grammar?atom.textEditors.setGrammarOverride(this.model,this.props.grammar):atom.textEditors.clearGrammarOverride(this.model)}}class Ac{constructor(t){this.props=t,pt.initialize(this)}async update(t){this.props={...this.props,...t},await pt.update(this)}render(){return pt.dom("div",{className:"atomts-rename-view",ref:"main"},pt.dom("div",{className:"block"},pt.dom("div",null,pt.dom("span",{ref:"title"},this.props.title),pt.dom("span",{className:"subtle-info-message"},pt.dom("span",null,"Close this panel with "),pt.dom("span",{className:"highlight"},"esc"),pt.dom("span",null," key. And commit with the "),pt.dom("span",{className:"highlight"},"enter"),pt.dom("span",null," key."))),pt.dom("div",{className:"find-container block"},pt.dom("div",{className:"editor-container"},pt.dom(Tc,{ref:"editor",initialText:this.props.initialText,selectAll:this.props.selectAll}))),this.renderValidationMessage()))}async destroy(){await pt.destroy(this)}focus(){return this.refs.editor.focus()}getText(){return this.refs.editor.getModel().getText()}renderValidationMessage(){return void 0!==this.props.validationMessage?pt.dom("div",{className:"highlight-error"},this.props.validationMessage):null}}async function Pc(t){const e=new Ac({title:t.title,initialText:t.text,selectAll:t.autoSelect}),n=atom.workspace.addModalPanel({item:e,priority:1e3}),r=document.activeElement;e.focus();const i=new d;try{return await new Promise((n=>{i.add(atom.commands.add(e.refs.main,{"core:cancel":()=>{n(void 0)},"core:confirm":()=>{const r=e.getText(),i=t.onValidate(r);i?Qt(e.update({validationMessage:i})):n(r)}}))}))}finally{n.destroy(),i.dispose(),r&&r.focus()}}function Oc(t){const e=new d;for(const n of ai)if("atom-text-editor"===n.selector){const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,{...r,async didDispatch(t){try{const e=t.currentTarget.getModel();He(e)?await r.didDispatch(e,(()=>t.abortKeyBinding())):(t.abortKeyBinding(),$e(e)&&atom.notifications.addWarning("Atom-TypeScript cancelled last command: Current editor has no file path",{description:`Atom-TypeScript needs to determine the file path of the current editor to execute \`${n.command}\`, which it failed to do. You probably just need to save the current file somewhere.`,dismissable:!0}))}catch(t){Ic(t)}}}))}else{const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,{...r,async didDispatch(){try{await r.didDispatch()}catch(t){Ic(t)}}}))}return e}function Ic(t){atom.notifications.addFatalError("Something went wrong, see details below.",{detail:t.message,dismissable:!0,stack:t.stack})}ci("atom-text-editor","typescript:rename-file",(t=>({description:"Rename current file",async didDispatch(e){const n=e.getPath();if(!n)return;const r=await Pc({autoSelect:!0,title:"Rename File",text:n,onValidate:t=>t.trim()?"":"If you want to abort : Press esc to exit"});if(!r)return;const i=await t.getClient(n),o=await i.execute("getEditsForFileRename",{oldFilePath:n,newFilePath:r});await t.applyEdits(o.body),await new Promise(((t,i)=>{Li.move(n,r,(n=>{n?i(n):(e.getBuffer().setPath(r),t())}))}))}}))),ci("atom-text-editor","typescript:rename-refactor",(t=>({description:"Rename symbol under text cursor everywhere it is used",async didDispatch(e){const n=We(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("rename",n),{info:o,locs:s}=i.body;if(!o.canRename)return void atom.notifications.addInfo("AtomTS: Rename not available at cursor location");const a=await Pc({autoSelect:!0,title:"Rename Variable",text:o.displayName,onValidate:t=>t.replace(/\s/g,"")!==t.trim()?"The new variable must not contain a space":t.trim()?"":"If you want to abort : Press esc to exit"});void 0!==a&&await t.applyEdits(s.map((t=>({fileName:t.file,textChanges:t.locs.map((t=>({...t,newText:a})))}))))}}))),ci("atom-workspace","typescript:restart-all-servers",(t=>({description:"Kill all tsserver instances. They will be auto-restarted",async didDispatch(){t.killAllServers()}}))),ci("atom-workspace","typescript:return-from-declaration",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",async didDispatch(){await t.histGoBack()}}))),ci("atom-workspace","typescript:show-editor-position-history",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",async didDispatch(){await t.histShowHistory()}}))),ci("atom-text-editor","typescript:toggle-semantic-view",(t=>({description:"Toggle semantic view outline",didDispatch(){t.toggleSemanticViewController()}}))),ci("atom-text-editor","typescript:show-tooltip",(t=>({description:"Show type tooltip at current text cursor position",didDispatch:async e=>t.showTooltipAt(e)}))),ci("atom-text-editor","typescript:show-signature-help",(t=>({description:"Show signature help tooltip at current text cursor position",didDispatch:async e=>t.showSigHelpAt(e)}))),ci("atom-text-editor","typescript:hide-signature-help",(t=>({description:"Hide the currently visible signature help",async didDispatch(e,n){t.hideSigHelpAt(e)||n()}}))),ci("atom-text-editor","typescript:signature-help-next",(t=>({description:"Show next signature help if available",async didDispatch(e,n){t.rotateSigHelp(e,1)||n()}}))),ci("atom-text-editor","typescript:signature-help-prev",(t=>({description:"Show previous signature help if available",async didDispatch(e,n){t.rotateSigHelp(e,-1)||n()}}))),ci("atom-text-editor","typescript:toggle-file-symbols",(t=>({description:"Toggle view for finding file symbols",async didDispatch(e){t.toggleFileSymbolsView(e)}}))),ci("atom-text-editor","typescript:toggle-project-symbols",(t=>({description:"Toggle view for finding file symbols",async didDispatch(e){t.toggleProjectSymbolsView(e)}})));class jc{constructor(t,e){this.children=e,this.props={...t,delay:{show:0,hide:0}},pt.initialize(this),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}async update(t,e){this.props={...this.props,...t},this.children=e,await pt.update(this),this.tooltipDisposable.dispose(),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}render(){return pt.dom("div",{className:"inline-block"},this.children?this.children:null)}async destroy(){await pt.destroy(this),this.tooltipDisposable.dispose()}}class Nc{constructor(t){this.hiddenBuildStatus=!1,this.disposables=new d,this.buildStatusClicked=()=>{this.props.buildStatus.success||atom.notifications.addError("Build failed",{detail:this.props.buildStatus.message,dismissable:!0})},this.props={...t},this.setHideBuildStatus(atom.config.get("atom-typescript").buildStatusTimeout),this.resetBuildStatusTimeout(),pt.initialize(this),this.disposables.add(atom.config.onDidChange("atom-typescript.buildStatusTimeout",(({newValue:t})=>{this.setHideBuildStatus(t),Qt(this.update({}))})))}async update(t){const e=void 0!==t.buildStatus&&t.buildStatus.success!==this.props.buildStatus.success;this.props={...this.props,...t},e&&this.resetBuildStatusTimeout(),await pt.update(this)}render(){if(this.hiddenBuildStatus)return pt.dom("span",null);let t,e;return this.props.buildStatus.success?(t="highlight-success",e="Emit Success"):(t="highlight-error",e="Emit Failed"),pt.dom(jc,{title:this.props.buildStatus.success?"Build was successful":"Build failed; click to show error message"},pt.dom("span",{className:t,on:{click:this.buildStatusClicked}},e))}async destroy(){await pt.destroy(this)}resetBuildStatusTimeout(){this.hiddenBuildStatus=!1,this.props.buildStatus.success&&this.hideBuildStatus()}setHideBuildStatus(t){this.hideBuildStatus=t>0?Jt.debounce((()=>{this.hiddenBuildStatus=!0,Qt(pt.update(this))}),1e3*t):0===t?()=>{this.hiddenBuildStatus=!0}:()=>{}}}class Lc{constructor(t){this.props={...t},pt.initialize(this)}async update(t){this.props={...this.props,...t},await pt.update(this)}render(){return pt.dom(jc,{title:()=>this.props.tsConfigPath.startsWith("/dev/null")?"No tsconfig.json":"Click to open "+atom.project.relativize(this.props.tsConfigPath)},pt.dom("a",{className:"inline-block",href:"",on:{click:t=>{t.preventDefault(),this.openConfigPath()}}},this.props.tsConfigPath.startsWith("/dev/null")?"No project":_((t=this.props.tsConfigPath,"~"+atom.project.relativize(t)))));var t}async destroy(){await pt.destroy(this)}openConfigPath(){this.props.tsConfigPath.startsWith("/dev/null")?atom.notifications.addInfo("No tsconfig for current file"):Qt(atom.workspace.open(this.props.tsConfigPath))}}class Fc{constructor(t={}){this.props={visible:!0,pending:[],progress:{max:0,value:0},...t},pt.initialize(this)}async update(t){this.props={...this.props,...t},await pt.update(this)}render(){return pt.dom("ts-status-panel",{className:this.props.visible?"":"hide"},this.renderVersion(),this.renderPending(),this.renderConfigPath(),this.renderStatus(),this.renderProgress())}async destroy(){await pt.destroy(this)}dispose(){Qt(this.destroy())}async show(){await this.update({visible:!0})}async hide(){await this.update({visible:!1})}renderVersion(){return void 0!==this.props.clientVersion?pt.dom(jc,{title:"Active TypeScript version"},this.props.clientVersion):null}renderPending(){return this.props.pending.length>0?pt.dom(jc,{title:`Pending Requests: <ul>${this.props.pending.map((({title:t})=>`<li>${t}</li>`)).join("")}</ul>`,html:!0},pt.dom("span",{ref:"pendingCounter"},this.props.pending.length.toString()),pt.dom("span",{ref:"pendingSpinner",className:"loading loading-spinner-tiny inline-block",style:{marginLeft:"5px",opacity:"0.5",verticalAlign:"sub"}})):null}renderConfigPath(){return void 0!==this.props.tsConfigPath?pt.dom(Lc,{tsConfigPath:this.props.tsConfigPath}):null}renderStatus(){return this.props.buildStatus?pt.dom(Nc,{buildStatus:this.props.buildStatus}):null}renderProgress(){return this.props.progress.value<this.props.progress.max?pt.dom("progress",{style:{verticalAlign:"baseline"},className:"inline-block",max:this.props.progress.max,value:this.props.progress.value}):null}}class Dc{constructor(t=[]){this.prevCursorPositions=t}async goBack(){return this.goHistory(1)}async goHistory(t){let e;for(;t-- >0;)e=this.prevCursorPositions.pop();if(e)return this.open({file:e.file,start:{line:e.line,offset:e.offset}});atom.notifications.addInfo("AtomTS: Previous position not found.")}async goForward(t,e){const n=We(t);if(n){this.prevCursorPositions.push(n);const t=100;this.prevCursorPositions.length>t&&this.prevCursorPositions.splice(0,this.prevCursorPositions.length-t)}return this.open(e)}async showHistory(){const t=await si({items:this.getHistory().slice().reverse().map(((t,e)=>({...t,idx:e}))),itemTemplate:(t,e)=>pt.dom("li",{className:"two-lines"},pt.dom("div",{className:"primary-line"},pt.dom(Jr,{label:t.file,query:e.getFilterQuery()})),pt.dom("div",{className:"secondary-line"},"Line: ",t.line,", column: ",t.offset)),itemFilterKey:"file"});t&&await this.goHistory(t.idx+1)}getHistory(){return this.prevCursorPositions}dispose(){}serialize(){return this.prevCursorPositions}async open(t){const e=await atom.workspace.open(t.file,{initialLine:t.start.line-1,initialColumn:t.start.offset-1,searchAllPanes:!0});return atom.workspace.isTextEditor(e)&&e.scrollToCursorPosition({center:!0}),e}}class Mc{constructor(t,e){let n,r,i;this.getClient=t,this.editor=e,this.disposables=new d,this.occurrenceMarkers=[],this.disposed=!1;let o=!1;this.disposables.add(atom.config.observe("atom-typescript.occurrenceHighlightDebounceTimeout",(t=>{n=Jt.debounce((()=>{Qt(this.update())}),t),i=3.5*t})),e.onDidChangeCursorPosition((()=>{void 0===r?n():o=!0})),e.onDidChangePath((()=>n())),e.onDidChangeGrammar((()=>n())),e.onDidChange((()=>{void 0!==r&&clearTimeout(r),r=window.setTimeout((()=>{o&&(n(),o=!1),r=void 0}),i)})))}dispose(){this.disposed||(this.disposed=!0,this.disposables.dispose(),this.clearMarkers())}clearMarkers(){for(const t of this.occurrenceMarkers)t.destroy();this.occurrenceMarkers=[]}async update(){if(this.disposed)return;if(!He(this.editor))return void this.clearMarkers();const t=this.editor.getPath();if(void 0===t)return;const e=await this.getClient(t);if(this.disposed)return;const n=this.editor.getLastCursor().getBufferPosition();try{const r=await e.execute("documentHighlights",{file:t,line:n.row+1,offset:n.column+1,filesToSearch:[t]});if(this.disposed)return;const i=Array.from(this.getNewOccurrenceMarkers(r.body));for(const t of this.occurrenceMarkers)i.includes(t)||t.destroy();this.occurrenceMarkers=i}catch(t){window.atom_typescript_debug&&console.error(t)}}*getNewOccurrenceMarkers(t){for(const e of t)if(e.file===this.editor.getPath())for(const t of e.highlightSpans){const e=Oe(t),n=this.occurrenceMarkers.find((t=>t.getBufferRange().isEqual(e)));if(n)yield n;else{const t=this.editor.markBufferRange(e);this.editor.decorateMarker(t,{type:"highlight",class:"atom-typescript-occurrence"}),yield t}}}}class Rc{constructor(t){this.disposables=new d,this.disposables.add(atom.workspace.observeTextEditors((e=>{const n=new Mc(t,e);this.disposables.add(n,e.onDidDestroy((()=>{this.disposables.remove(n),n.dispose()})))})))}dispose(){this.disposables.dispose()}}function Bc(t,e,n,r){let i,o=n.right,s=!1,a="";t.style.left="",t.style.top="",t.style.right="",t.style.bottom="";const c=e.clientWidth,u=getComputedStyle(t),l=parseInt(u.width,10),f=parseInt(u.height,10);if(o+l>=c&&(o=c-l-10),o<0&&(a="pre-wrap",o=10,s=10),"bottom"===r){const t=e.clientHeight;i=n.bottom,i+f>=t&&(i=n.top-f)}else"top"===r&&(i=n.top-f,i<0&&(i=n.bottom));t.style.left=o+"px",t.style.top=i+"px",!1!==s&&(t.style.right=s+"px"),a&&(t.style.whiteSpace=a)}class zc{constructor(t){this.parent=t,this.props={left:0,right:0,top:0,bottom:0},pt.initialize(this)}async destroy(){return pt.destroy(this)}async update(t){var e,n,r;void 0!==(null===(e=t.sigHelp)||void 0===e?void 0:e.selectedItemIndex)&&(null===(n=t.sigHelp)||void 0===n?void 0:n.selectedItemIndex)!==(null===(r=this.props.sigHelp)||void 0===r?void 0:r.selectedItemIndex)&&(this.props.visibleItem=void 0),this.props={...this.props,...t},void 0===this.props.sigHelp?this.props.visibleItem=void 0:void 0!==this.props.visibleItem&&(this.props.visibleItem=this.props.visibleItem%this.props.sigHelp.items.length,this.props.visibleItem<0&&(this.props.visibleItem+=this.props.sigHelp.items.length)),await pt.update(this)}writeAfterUpdate(){Bc(this.element,this.parent,this.props,atom.config.get("atom-typescript").sigHelpPosition)}render(){return pt.dom("div",{className:"atom-typescript-tooltip tooltip",key:this.sigHelpHash()},pt.dom("div",{className:"tooltip-inner"},this.tooltipContents()))}sigHelpHash(){if(!this.props.sigHelp)return;const{start:t,end:e}=this.props.sigHelp.applicableSpan;return`${t.line}:${t.offset}-${e.line}:${e.offset}`}tooltipContents(){if(!this.props.sigHelp)return"…";const{sigHelp:t}=this.props,e=void 0!==this.props.visibleItem?this.props.visibleItem:t.selectedItemIndex,n=t.items.length,r=["atom-typescript-tooltip-signature-help"];function i(n){const i=[];return n===t.selectedItemIndex&&i.push("atom-typescript-tooltip-signature-help-selected"),n===e&&i.push("atom-typescript-tooltip-signature-help-visible"),[...r,...i].join(" ")}return n>1&&r.push("atom-typescript-tooltip-signature-help-changable"),t.items.map(((e,n)=>pt.dom("div",{className:i(n)},pt.dom("div",null,De(e.prefixDisplayParts),this.renderSigHelpParams(e.parameters,t.argumentIndex),De(e.suffixDisplayParts),pt.dom("div",{className:"atom-typescript-tooltip-signature-help-documentation"},De(e.documentation))))))}renderSigHelpParams(t,e){return t.map(((t,n)=>pt.dom("span",{className:"atom-typescript-tooltip-signature-help-parameter"},n>0?", ":null,pt.dom("span",{className:n===e?"atom-typescript-tooltip-signature-help-selected":void 0},De(t.displayParts)))))}}class qc{constructor(t,e,n){this.deps=t,this.editor=e,this.cancelled=!1,this.disposables=new h.CompositeDisposable;const r=atom.views.getView(this.editor);this.view=new zc(r),r.appendChild(this.view.element);const i=Jt.debounce(this.updateTooltip.bind(this),100,{leading:!0});this.disposables.add(this.editor.onDidChangeCursorPosition((t=>{n=t.newBufferPosition,Qt(i(n))})),r.onDidChangeScrollTop((()=>{setImmediate((()=>this.updateTooltipPosition(n)))})),r.onDidChangeScrollLeft((()=>{setImmediate((()=>this.updateTooltipPosition(n)))}))),Qt(this.updateTooltip(n))}isDisposed(){return this.cancelled}dispose(){this.cancelled||(this.cancelled=!0,this.disposables.dispose(),Qt(this.view.destroy()))}async rotateSigHelp(t){const{visibleItem:e,sigHelp:n}=this.view.props,r=void 0!==e?e:void 0!==(null==n?void 0:n.selectedItemIndex)?null==n?void 0:n.selectedItemIndex:0;await this.view.update({visibleItem:r+t})}async updateTooltip(t){if(this.cancelled)return;let e;try{e=this.computeTooltipPosition(t)}catch(t){return void console.warn(t)}const n=await this.getMessage(t);this.cancelled||(n?await this.view.update({...e,sigHelp:n}):this.dispose())}updateTooltipPosition(t){if(this.cancelled)return;const e=this.computeTooltipPosition(t);Qt(this.view.update({...e}))}computeTooltipPosition(t){const e=atom.views.getView(this.editor),n=e.pixelPositionForBufferPosition(t),r=e.querySelector(".lines").getBoundingClientRect(),i=this.editor.getLineHeightInPixels(),o=e.getBoundingClientRect(),s=n.top+r.top-o.top+i/2,a=n.left+r.left-o.left,c=.7*i;return{left:a,right:a,top:s-c,bottom:s+c}}async getMessage(t){if(!He(this.editor))return;const e=this.editor.getPath();if(void 0===e)return;const n=await this.deps.getClient(e);try{return(await n.execute("signatureHelp",{file:e,line:t.row+1,offset:t.column+1})).body}catch(t){return}}}class Hc{constructor(t){this.deps=t,this.subscriptions=new h.CompositeDisposable,this.editorMap=new WeakMap,this.stoppedChanging=t=>e=>{if(!atom.config.get("atom-typescript.sigHelpDisplayOnChange"))return;if(void 0===t.getPath())return;const n=t.getLastCursor().getBufferPosition(),[r]=e.changes.filter((t=>t.newRange.containsPoint(n)));r&&null!==r.newText.match(/[<(,]/)&&Qt(this.showTooltip(t,n))},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=new h.CompositeDisposable;e.add(t.onDidDestroy((()=>{e.dispose(),this.subscriptions.remove(e);const n=this.editorMap.get(t);n&&n.dispose()})),t.onDidStopChanging(this.stoppedChanging(t))),this.subscriptions.add(e)})))}dispose(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=this.editorMap.get(t);e&&e.dispose()}}async showTooltipAt(t){const e=t.getLastCursor().getBufferPosition();return this.showTooltip(t,e)}rotateSigHelp(t,e){const n=this.editorMap.get(t);return!(!n||n.isDisposed())&&(Qt(n.rotateSigHelp(e)),!0)}hideTooltipAt(t){const e=this.editorMap.get(t);return!(!e||e.isDisposed())&&(e.dispose(),!0)}async showTooltip(t,e){const n=this.editorMap.get(t);n&&!n.isDisposed()||this.editorMap.set(t,new qc(this.deps,t,e))}}function $c(t,e,n,r){const i=e=>{const i=e.target.closest(n);i&&t.contains(i)&&r(e)};return t.addEventListener(e,i),new y((()=>{t.removeEventListener(e,i)}))}class Uc{constructor(){this.tooltip=null,this.props={left:0,right:0,top:0,bottom:0},pt.initialize(this)}async destroy(){return pt.destroy(this)}async update(t){this.props={...this.props,...t},this.tooltip=await Ar(this.props.info,pt,(t=>pt.dom("div",{className:"atom-typescript-tooltip-tooltip-code"},t))),await pt.update(this)}writeAfterUpdate(){Bc(this.element,document.body,this.props,atom.config.get("atom-typescript").tooltipPosition)}render(){return pt.dom("div",{className:"atom-typescript-tooltip tooltip"},pt.dom("div",{className:"tooltip-inner"},this.tooltip))}}class Vc{constructor(t,e,n,r){this.getClient=t,this.cancelled=!1,Qt(this.initialize(e,n,r))}dispose(){this.cancelled=!0,this.view&&(Qt(this.view.destroy()),this.view=void 0)}async initialize(t,e,n){const r=atom.views.getView(t);let i,o;try{i=r.pixelPositionForBufferPosition(n),o=r.pixelPositionForBufferPosition(n.traverse([0,1]))}catch(e){return void console.warn(e)}if(i.left>=o.left)return;const s=.7*t.getLineHeightInPixels(),a={left:e.clientX,right:e.clientX,top:e.clientY-s,bottom:e.clientY+s},c=await this.getMessage(t,n);this.cancelled||void 0!==c&&await this.showTooltip(a,c)}async getMessage(t,e){let n;const r=await this.getClient(t);if(!r)return;const i=t.getPath();try{if(void 0===i)return;n=await r.execute("quickinfo",{file:i,line:e.row+1,offset:e.column+1})}catch(t){return}return n.body}async showTooltip(t,e){this.view=new Uc,document.body.appendChild(this.view.element),await this.view.update({...t,info:e})}}class Wc{constructor(t){this.getClientInternal=t,this.subscriptions=new h.CompositeDisposable,this.editorMap=new WeakMap,this.getClient=async t=>{const e=t.getPath();if(void 0!==e&&He(t)&&k.existsSync(e))return this.getClientInternal(e)},this.clearExprTypeTimeout=()=>{void 0!==this.exprTypeTimeout&&(clearTimeout(this.exprTypeTimeout),this.exprTypeTimeout=void 0),this.hideExpressionType()},this.trackMouseMovement=t=>{let e;return n=>{const r=function(t,e){const n=atom.views.getView(t).getComponent().screenPositionForMouseEvent(e);if(!isNaN(n.row)&&!isNaN(n.column))return t.bufferPositionForScreenPosition(n)}(t,n);r&&(e&&e.isEqual(r)&&this.pendingTooltip||(e=r,this.clearExprTypeTimeout(),this.exprTypeTimeout=window.setTimeout((()=>this.showExpressionType(t,n,r)),atom.config.get("atom-typescript").tooltipDelay)))}},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=atom.views.getView(t),n=e.querySelector(".lines");this.editorMap.set(t,{rawView:e,lines:n});const r=new h.CompositeDisposable;r.add($c(e,"mousemove",".scroll-view",this.trackMouseMovement(t)),$c(e,"mouseout",".scroll-view",this.clearExprTypeTimeout),$c(e,"keydown",".scroll-view",this.clearExprTypeTimeout),e.onDidChangeScrollTop(this.clearExprTypeTimeout),e.onDidChangeScrollLeft(this.clearExprTypeTimeout),t.onDidDestroy((()=>{r.dispose(),this.subscriptions.remove(r),this.clearExprTypeTimeout()}))),this.subscriptions.add(r)})))}dispose(){this.subscriptions.dispose(),this.clearExprTypeTimeout()}showExpressionAt(t){const e=t.getLastCursor().getBufferPosition(),n=atom.views.getView(t);let r;try{r=n.pixelPositionForBufferPosition(e)}catch(t){return void console.warn(t)}this.showExpressionType(t,this.mousePositionForPixelPosition(t,r),e)}mousePositionForPixelPosition(t,e){const n=atom.views.getView(t).querySelector(".lines").getBoundingClientRect();return{clientY:e.top+n.top+t.getLineHeightInPixels()/2,clientX:e.left+n.left}}showExpressionType(t,e,n){this.pendingTooltip&&this.pendingTooltip.dispose(),this.pendingTooltip=new Vc(this.getClient,t,e,n)}hideExpressionType(){this.pendingTooltip&&(this.pendingTooltip.dispose(),this.pendingTooltip=void 0)}}class Gc{constructor(t){this.getClient=t,this.subscriptions=new d;const e=atom.workspace.paneForURI("atom-typescript://semantic-view");e&&(this.view=e.itemForURI("atom-typescript://semantic-view")),this.view&&Qt(this.view.setGetClient(this.getClient)),this.subscriptions.add(new y((()=>{this.view&&(atom.workspace.hide(this.view),Qt(this.view.destroy()))})),atom.config.observe("atom-typescript.showSemanticView",(t=>{t?Qt(this.show()):this.hide()})))}dispose(){this.subscriptions.dispose()}async toggle(){this.view?await atom.workspace.toggle(this.view):await this.show()}async show(){this.view||(this.view=nn.create({navTree:null}),await this.view.setGetClient(this.getClient)),await atom.workspace.open(this.view,{searchAllPanes:!0})}hide(){return!!this.view&&atom.workspace.hide(this.view)}}class Kc{constructor(t){this.position=t.position,this.name=t.name,this.type=t.type,this.parent=t.parent,this.file=t.file}static fromNavTree(t,e){const n=t.spans[0].start;return new Kc({name:t.text,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null})}static fromNavto(t,e){const n=t.start;return new Kc({name:t.name,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null,file:t.file})}}async function Qc(t,e){const n=await async function(t,e){try{const n=await e.getClient(t);return(await n.execute("navtree",{file:t})).body}catch(e){console.error(t,e)}}(t,e);return n&&n.childItems?Array.from(Jc(n.childItems)):[]}async function Zc(t,e,n){const r=await async function(t,e,n){try{const r=await n.getClient(t);return(await r.execute("navto",{file:t,currentFileOnly:!1,searchValue:e,maxResultCount:1e3})).body}catch(e){console.error(t,e)}}(t,e,n);return r?Array.from(function*(t,e){for(const n of t)yield Kc.fromNavto(n,e)}(r)):[]}function*Jc(t,e){t.sort(((t,e)=>t.spans[0].start.line-e.spans[0].start.line));for(const n of t){const t=Kc.fromNavTree(n,e);yield t,n.childItems&&(yield*Jc(n.childItems,t))}}async function Yc(t,e,n){if(void 0!==t.file)return n(e,{file:t.file,start:{line:t.position.row+1,offset:t.position.column+1}})}async function Xc(t,e){const n=t.getPath();if(void 0!==n){let r;atom.config.get("symbols-view.quickJumpToFileSymbol")&&(r=function(t){const e=atom.views.getView(t).getScrollTop();return{bufferRanges:t.getSelectedBufferRanges(),scrollTop:e}}(t));const i=await si({items:Qc(n,e),itemTemplate:({name:t,position:e},n)=>pt.dom("li",{className:"two-lines"},pt.dom("div",{className:"primary-line"},pt.dom(Jr,{label:t,query:n.getFilterQuery()})),pt.dom("div",{className:"secondary-line"},"Line "+(e.row+1))),didChangeSelection(e){atom.config.get("symbols-view.quickJumpToFileSymbol")&&e&&t.setCursorBufferPosition(e.position)},itemFilterKey:"name"});i?await Yc(i,t,e.histGoForward):r&&function(t,{bufferRanges:e,scrollTop:n}){const r=atom.views.getView(t);t.setSelectedBufferRanges(e),r.setScrollTop(n)}(t,r)}}class tu{constructor(t){this.deps=t}toggleFileView(t){Qt(Xc(t,this.deps))}toggleProjectView(t){Qt(async function(t,e){const n=t.getPath();if(void 0!==n){const r=await si({items:t=>Zc(n,t,e),itemTemplate({name:t,position:e,file:n},r){const i=atom.project.relativize(n);return pt.dom("li",{className:"two-lines"},pt.dom("div",{className:"primary-line"},pt.dom(Jr,{label:t,query:r.getFilterQuery()})),pt.dom("div",{className:"secondary-line"},`File ${i} line ${e.row+1}`))},itemFilterKey:"name"});r&&await Yc(r,t,e.histGoForward)}}(t,this.deps))}dispose(){}}class eu{constructor(){this.errors=new Map,this.fileGrammars=new Map,this.pushErrors=Jt.debounce(this.pushErrors.bind(this),100)}*getErrorsInRange(t,e){for(const n of this.errors.values()){const r=n.get(b.normalize(t));r&&(yield*r.filter((t=>Oe(t).intersectsWith(e))))}}*getErrorsAt(t,e){for(const n of this.errors.values()){const r=n.get(b.normalize(t));r&&(yield*r.filter((t=>Oe(t).containsPoint(e))))}}setErrors(t,e,n){let r=this.errors.get(t);r||(r=new Map,this.errors.set(t,r)),r.set(b.normalize(e),n),this.pushErrors()}clearFileErrors(t){for(const e of this.errors.values())e.delete(t);this.pushErrors()}clear(){this.linter&&this.linter.clearMessages()}setLinter(t){this.linter=t,this.pushErrors()}dispose(){this.clear(),this.linter&&this.linter.dispose(),this.linter=void 0}pushErrors(){this.linter&&this.linter.setAllMessages(this.getLinterErrors())}getLinterErrors(){if(atom.config.get("atom-typescript.suppressAllDiagnostics"))return[];const t=[];for(const e of this.errors.values())for(const[n,r]of e){const e=atom.workspace.getTextEditors().find((t=>t.getPath()===n)),i=e?e.getGrammar().scopeName:this.selectGrammar(n);if(!nu("suppressAllDiagnostics",i))for(const e of r){if(nu("ignoredDiagnosticCodes",i).includes(""+e.code))continue;if(nu("ignoreUnusedSuggestionDiagnostics",i)&&e.reportsUnnecessary)continue;if("suggestion"===e.category&&nu("ignoredSuggestionDiagnostics",i).includes(""+e.code))continue;if(nu("ignoreNonSuggestionSuggestionDiagnostics",i)&&"suggestion"===e.category&&!Me(e.code,Te.Suggestion))continue;let{start:r,end:o}=e;r&&o||(r=o={line:1,offset:1}),t.push({severity:this.getSeverity(nu("unusedAsInfo",i),e),excerpt:e.text,location:{file:n,position:Ie(r,o)}})}}return t}selectGrammar(t){const e=this.fileGrammars.get(t);if(void 0!==e)return e;const n=atom.grammars.selectGrammar(t,"").scopeName;return this.fileGrammars.set(t,n),n}getSeverity(t,e){if(t&&6133===e.code)return"info";switch(e.category){case"error":return"error";case"warning":return"warning";default:return"info"}}}function nu(t,e){return atom.config.get("atom-typescript."+t,{scope:[e]})}class ru{constructor(t,e){let n;this.buffer=t,this.deps=e,this.events=new h.Emitter,this.compileOnSave=!1,this.subscriptions=new h.CompositeDisposable,this.on=this.events.on.bind(this.events),this.dispose=()=>{this.subscriptions.dispose(),Qt(this.close())},this.init=async()=>{this.state&&(await this.state.client.execute("open",{file:this.state.filePath,fileContent:this.buffer.getText()}),Qt(this.getErr({allFiles:!1,delay:0})))},this.close=async()=>{if(await this.openPromise,this.state){const t=this.state.client,e=this.state.filePath;this.deps.clearFileErrors(e),this.state.subscriptions.dispose(),this.state=void 0,await t.execute("close",{file:e})}},this.onDidChangePath=t=>{Qt(this.close().then((()=>{this.openPromise=this.open(t)})))},this.onDidSave=async()=>{await Promise.all([this.getErr({allFiles:!0,delay:100}),this.doCompileOnSave()])},this.onDidChangeText=async({changes:t})=>{if(0===t.length||!this.state)return;const{client:e,filePath:n}=this.state;await Promise.all(t.reduceRight(((t,{oldRange:r,newText:i})=>(t.push(e.execute("change",{file:n,line:r.start.row+1,offset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1,insertString:i})),t)),[]))},this.subscriptions.add(atom.config.observe("atom-typescript.getErrDebounceTimeout",(t=>{n=Jt.debounce((()=>{Qt(this.getErr({allFiles:!1,delay:0}))}),t)})),t.onDidChangePath(this.onDidChangePath),t.onDidDestroy(this.dispose),t.onDidSave((()=>{Qt(this.onDidSave())})),t.onDidStopChanging((({changes:t})=>{t.length>0&&this.deps.reportBuildStatus(void 0)})),t.onDidChangeText((t=>{Qt(this.onDidChangeText(t)),n()}))),this.openPromise=this.open(this.buffer.getPath())}static create(t,e){const n=ru.bufferMap.get(t);if(n)return n;{const n=new ru(t,e);return ru.bufferMap.set(t,n),n}}static clearAllCache(){this.bufferMap=new WeakMap}getPath(){return this.state&&this.state.filePath}getInfo(){if(this.state)return{clientVersion:this.state.client.version,tsConfigPath:this.state.configFile&&this.state.configFile.getPath()}}async getErr(t){if(!this.state)return;const e=t.allFiles?Array.from(function*(){for(const t of atom.workspace.getTextEditors())He(t)&&(yield t.getPath())}()):[this.state.filePath];await this.state.client.execute("geterr",{files:e,delay:t.delay})}async compile(){if(!this.state)return;const{client:t,filePath:e}=this.state,n=await t.execute("compileOnSaveAffectedFileList",{file:e}),r=Jt.flatten(n.body.map((t=>t.fileNames)));if(0===r.length)return;const i=r.map((e=>t.execute("compileOnSaveEmitFile",{file:e})));if(!(await Promise.all(i)).every((t=>!!t.body)))throw new Error("Some files failed to emit")}async doCompileOnSave(){if(this.compileOnSave){this.deps.reportBuildStatus(void 0);try{await this.compile(),this.deps.reportBuildStatus({success:!0})}catch(t){const e=t;console.error("Save failed with error",e),this.deps.reportBuildStatus({success:!1,message:e.message})}}}async open(t){if(void 0===t||!ze(t))return this.close();{const e=await this.deps.getClient(t);this.state={client:e,filePath:t,configFile:void 0,subscriptions:new h.CompositeDisposable},this.state.subscriptions.add(e.on("restarted",(()=>Qt(this.init())))),await this.init();const n=await e.execute("projectInfo",{needFileNameList:!1,file:t});void 0!==n.body.configFileName&&(this.state.configFile=new h.File(n.body.configFileName),await this.readConfigFile(),this.state.subscriptions.add(this.state.configFile.onDidChange((()=>Qt(this.readConfigFile()))))),this.events.emit("opened")}}async readConfigFile(){if(!this.state||!this.state.configFile)return;const t=je(this.state.configFile.getPath());this.compileOnSave=t.compileOnSave;const e=atom.config.get("atom-typescript");await this.state.client.execute("configure",{file:this.state.filePath,formatOptions:t.formatCodeOptions,preferences:{includeCompletionsWithInsertText:!0,includeCompletionsForModuleExports:e.includeCompletionsForModuleExports,quotePreference:e.quotePreference,importModuleSpecifierEnding:e.importModuleSpecifierEnding,importModuleSpecifierPreference:"auto"===e.importModuleSpecifierPreference?void 0:e.importModuleSpecifierPreference,...t.preferences}})}}ru.bufferMap=new WeakMap;class iu{constructor(t,e){this.editor=t,this.opts=e,this.subscriptions=new d,this.isTypescript=!1,this.destroy=()=>{atom.views.getView(this.editor).classList.remove("typescript-editor"),this.subscriptions.dispose()},this.didActivate=()=>{this.isTypescript&&this.reportInfo()},this.onOpened=()=>{atom.workspace.getActiveTextEditor()===this.editor&&this.reportInfo()},this.checkIfTypescript=()=>{this.isTypescript=He(this.editor),this.isTypescript?atom.views.getView(this.editor).classList.add("typescript-editor"):atom.views.getView(this.editor).classList.remove("typescript-editor")},this.buffer=ru.create(t.getBuffer(),e),this.subscriptions.add(this.buffer.on("opened",this.onOpened)),this.checkIfTypescript(),this.subscriptions.add(t.onDidChangePath(this.checkIfTypescript),t.onDidChangeGrammar(this.checkIfTypescript),t.onDidDestroy(this.destroy),t.onDidSave((()=>{atom.config.get("atom-typescript.checkAllFilesOnSave")&&atom.commands.dispatch(atom.views.getView(t),"typescript:check-all-files")})))}static createFactory(t){return e=>{let n=iu.editorMap.get(e);return n||(n=new iu(e,t),iu.editorMap.set(e,n)),n}}static lookupPane(t){return iu.editorMap.get(t)}static clearAllCache(){this.editorMap=new WeakMap,ru.clearAllCache()}reportInfo(){const t=this.buffer.getInfo();t&&this.opts.reportClientInfo(t)}}iu.editorMap=new WeakMap;class ou{constructor(t){this.usingBuiltinTooltipManager=!0,this.usingBuiltinSigHelpManager=!0,this.pending=new Set,this.clearErrors=()=>{this.errorPusher.clear()},this.clearFileErrors=t=>{this.errorPusher.clearFileErrors(t)},this.getClient=async t=>this.clientResolver.get(t),this.killAllServers=()=>{Qt(this.clientResolver.restartAllServers())},this.withBuffer=async(t,e)=>{const n=b.normalize(t),r=atom.workspace.getTextEditors().find((t=>t.getPath()===n));if(r)return e(r.getBuffer());const i=await h.TextBuffer.load(n);try{return await e(i)}finally{i.isModified()&&await i.save(),i.destroy()}},this.reportBusyWhile=async(t,e)=>{if(this.busySignalService)return this.busySignalService.reportBusyWhile(t,e);{const n={title:t};try{return this.pending.add(n),this.drawPending(Array.from(this.pending)),await e()}finally{this.pending.delete(n),this.drawPending(Array.from(this.pending))}}},this.reportProgress=t=>{Qt(this.statusPanel.update({progress:t}))},this.reportBuildStatus=t=>{Qt(this.statusPanel.update({buildStatus:t}))},this.reportClientInfo=t=>{Qt(this.statusPanel.update(t))},this.applyEdits=async t=>{Promise.all(t.map((t=>this.withBuffer(t.fileName,(async e=>{e.transact((()=>{const n=t.textChanges.map((t=>({range:Oe(t),newText:t.newText}))).reverse().sort(((t,e)=>e.range.compare(t.range)));for(const t of n)e.setTextInRange(t.range,t.newText)}))})))))},this.showTooltipAt=async t=>{this.usingBuiltinTooltipManager?this.tooltipManager.showExpressionAt(t):await atom.commands.dispatch(atom.views.getView(t),"datatip:toggle")},this.showSigHelpAt=async t=>{this.usingBuiltinSigHelpManager?await this.sigHelpManager.showTooltipAt(t):await atom.commands.dispatch(atom.views.getView(t),"signature-help:show")},this.hideSigHelpAt=t=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.hideTooltipAt(t),this.rotateSigHelp=(t,e)=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.rotateSigHelp(t,e),this.histGoForward=(t,e)=>this.editorPosHist.goForward(t,e),this.drawPending=Jt.throttle((t=>Qt(this.statusPanel.update({pending:t}))),100,{leading:!1}),this.subscriptions=new d,this.clientResolver=new kr(this.reportBusyWhile),this.subscriptions.add(this.clientResolver),this.statusPanel=new Fc,this.subscriptions.add(this.statusPanel),this.errorPusher=new eu,this.subscriptions.add(this.errorPusher),this.codefixProvider=new Pi(this.clientResolver,this.errorPusher,this.applyEdits),this.subscriptions.add(this.codefixProvider),this.semanticViewController=new Gc(this.getClient),this.subscriptions.add(this.semanticViewController),this.editorPosHist=new Dc(t&&t.editorPosHistState),this.subscriptions.add(this.editorPosHist),this.symbolsViewController=new tu({histGoForward:this.histGoForward,getClient:this.getClient}),this.subscriptions.add(this.symbolsViewController),this.tooltipManager=new Wc(this.getClient),this.subscriptions.add(this.tooltipManager),this.sigHelpManager=new Hc({getClient:this.getClient}),this.subscriptions.add(this.sigHelpManager),this.occurrenceManager=new Rc(this.getClient),this.subscriptions.add(this.occurrenceManager),this.typescriptPaneFactory=iu.createFactory({clearFileErrors:this.clearFileErrors,getClient:this.getClient,reportBuildStatus:this.reportBuildStatus,reportClientInfo:this.reportClientInfo}),this.subscribeEditors(),this.subscriptions.add(Oc({getClient:this.getClient,applyEdits:this.applyEdits,clearErrors:this.clearErrors,killAllServers:this.killAllServers,reportProgress:this.reportProgress,reportBuildStatus:this.reportBuildStatus,toggleSemanticViewController:()=>{Qt(this.semanticViewController.toggle())},toggleFileSymbolsView:t=>{this.symbolsViewController.toggleFileView(t)},toggleProjectSymbolsView:t=>{this.symbolsViewController.toggleProjectView(t)},histGoForward:this.histGoForward,histGoBack:()=>this.editorPosHist.goBack(),histShowHistory:()=>this.editorPosHist.showHistory(),showTooltipAt:this.showTooltipAt,showSigHelpAt:this.showSigHelpAt,hideSigHelpAt:this.hideSigHelpAt,rotateSigHelp:this.rotateSigHelp}))}destroy(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=iu.lookupPane(t);e&&e.destroy()}iu.clearAllCache()}serialize(){return{version:"0.1",editorPosHistState:this.editorPosHist.serialize()}}consumeLinter(t){const e=t({name:"TypeScript"});this.errorPusher.setLinter(e),this.subscriptions.add(this.clientResolver.on("diagnostics",(({type:t,filePath:e,diagnostics:n})=>{this.errorPusher.setErrors(t,e,n)})))}consumeStatusBar(t){let e=100;for(const n of t.getRightTiles())"GRAMMAR-SELECTOR-STATUS"===atom.views.getView(n.getItem()).tagName&&(e=n.getPriority()-1);const n=t.addRightTile({item:this.statusPanel,priority:e}),r=new h.Disposable((()=>{n.destroy()}));return this.subscriptions.add(r),r}consumeDatatipService(t){if(atom.config.get("atom-typescript").preferBuiltinTooltips)return;const e=t.addProvider(new Ir(this.getClient));return this.subscriptions.add(e),this.tooltipManager.dispose(),this.usingBuiltinTooltipManager=!1,e}consumeSigHelpService(t){if(atom.config.get("atom-typescript").preferBuiltinSigHelp)return;const e=new vi(this.getClient),n=t(e);return this.subscriptions.add(n,e),this.sigHelpManager.dispose(),this.usingBuiltinSigHelpManager=!1,n}consumeBusySignal(t){if(atom.config.get("atom-typescript").preferBuiltinBusySignal)return;this.busySignalService=t;const e={dispose:()=>{this.busySignalService&&this.busySignalService.dispose(),this.busySignalService=void 0}};return this.subscriptions.add(e),e}provideAutocomplete(){return[new wi(this.getClient,this.applyEdits)]}provideIntentions(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async({bufferPosition:e,textEditor:n})=>(await t.runCodeFix(n,e)).map((e=>({priority:Oi++,title:"description"in e?e.description:e.actionDescription,selected:()=>{Qt(t.applyFix(e))}})))};var t}provideIntentionsHighlight(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async({visibleRange:e,textEditor:n})=>(await t.getFixableRanges(n,e)).map((t=>({range:t,created:t=>{}})))};var t}provideCodeActions(){return t=this.codefixProvider,{grammarScopes:qe(),priority:Er++,getCodeActions:async(e,n)=>(await t.runCodeFix(e,n.start)).map((e=>({getTitle:async()=>"description"in e?e.description:e.actionDescription,dispose:()=>{},apply:async()=>{await t.applyFix(e)}})))};var t}provideHyperclick(){return t=this.getClient,e=this.histGoForward,{priority:fi++,providerName:"typescript-hyperclick-provider",wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,async getSuggestionForWord(n,r,i){if(!He(n))return;const o=n.getPath();return void 0!==o?{range:i,callback:async()=>{var r;const s={file:o,line:i.start.row+1,offset:i.start.column+1},a=await t(s.file),c=await a.execute("definition",s),u=c.body?c.body[0]:void 0;if(1===(null===(r=c.body)||void 0===r?void 0:r.length)&&(null==u?void 0:u.start.line)===s.line&&(null==u?void 0:u.start.offset)===s.offset){const t=await a.execute("references",s);await ui(t,n,e)}else await li(c,n,e)}}:void 0}};var t,e}provideReferences(){return t=this.getClient,{isEditorSupported:async t=>He(t),async findReferences(e,n){const r=We(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("references",r);return o.body?{type:"data",baseUri:r.file,referencedSymbolName:o.body.symbolDisplayString,references:o.body.refs.map(Fr)}:void 0}};var t}provideOutlines(){return t=this.getClient,{name:"Atom-TypeScript",grammarScopes:qe(),priority:pi++,updateOnEdit:!0,async getOutline(e){const n=e.getPath();if(void 0===n)return;const r=await t(n),i=(await r.execute("navtree",{file:n})).body;return i?{outlineTrees:[hi(i)]}:void 0}};var t}provideDefinitions(){var t;if(!atom.config.get("atom-typescript").disableAtomIdeDefinitions)return t=this.getClient,{name:"atom-typescript",priority:Nr++,grammarScopes:qe(),wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,async getDefinition(e,n){if(!He(e))return;const r=We(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("definition",r);return o.body&&0!==o.body.length?{queryRange:void 0,definitions:o.body.map(Lr)}:void 0}}}provideCodeHighlight(){if(!atom.config.get("atom-typescript").preferBuiltinOccurrenceHighlight)return this.occurrenceManager.dispose(),Tr(this.getClient)}subscribeEditors(){this.subscriptions.add(atom.workspace.observeTextEditors((t=>{this.typescriptPaneFactory(t)})),atom.workspace.onDidChangeActiveTextEditor((t=>{if(t&&He(t)){Qt(this.statusPanel.show());const e=iu.lookupPane(t);e&&e.didActivate()}else Qt(this.statusPanel.hide())})))}}let su;var au=T(pt);exports.activate=function(t){au.setScheduler(atom.views),su=new ou(t),setImmediate((()=>Qt(async function(){["atom-ide-ui","linter","nuclide"].some((t=>atom.packages.isPackageLoaded(t)))||await P.install("atom-typescript",!0)}())))},exports.deactivate=function(){su&&su.destroy(),su=void 0},exports.serialize=function(){return su?su.serialize():void 0},exports.deserializeSemanticView=function(t){return nn.create(t.data)},exports.consumeLinter=function(t){if(su)return su.consumeLinter(t)},exports.consumeStatusBar=function(t){if(su)return su.consumeStatusBar(t)},exports.consumeDatatipService=function(t){if(su)return su.consumeDatatipService(t)},exports.consumeSignatureHelp=function(t){if(su)return su.consumeSigHelpService(t)},exports.consumeBusySignal=function(t){if(su)return su.consumeBusySignal(t)},exports.provideAutocomplete=function(){if(su)return su.provideAutocomplete()},exports.provideIntentions=function(){if(su)return su.provideIntentions()},exports.provideIntentionsHighlight=function(){if(su)return su.provideIntentionsHighlight()},exports.provideCodeActions=function(){if(su)return su.provideCodeActions()},exports.provideHyperclick=function(){if(su)return su.provideHyperclick()},exports.provideReferences=function(){if(su)return su.provideReferences()},exports.provideOutlines=function(){if(su)return su.provideOutlines()},exports.provideDefinitions=function(){if(su)return su.provideDefinitions()},exports.provideCodeHighlight=function(){if(su)return su.provideCodeHighlight()};
//# sourceMappingURL=main.js.map
